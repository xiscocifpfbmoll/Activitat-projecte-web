var Pixel=function(host,token){function calculateScrollPercent(){var body=document.body||{},html=document.documentElement||{},height=(height=width=0,width=window.screen.availWidth&&window.screen.width?window.screen.availWidth>window.screen.width?window.screen.width:window.screen.availWidth:window.screen.availWidth||window.screen.width,window.innerWidth&&window.innerWidth<width&&(width=window.innerWidth),height=window.screen.availHeight&&window.screen.height?window.screen.availHeight>window.screen.height?window.screen.height:window.screen.availHeight:window.screen.availHeight||window.screen.height,window.innerHeight&&window.innerHeight<height&&(height=window.innerHeight),1<window.innerWidth/window.innerHeight?{width:height<width?width:height,height:height<width?height:width}:{width:width<height?width:height,height:width<height?height:width}),width=function(){var body=document.body||{},html=document.documentElement||{};return Math.max(body.scrollHeight||0,body.offsetHeight||0,html.clientHeight||0,html.scrollHeight||0,html.offsetHeight||0)}(),html=html.scrollTop||body.scrollTop||window.pageYOffset||0,body=Math.min(html+height.height,width);return 0<width?body/width*100:0}var $pixel,data,anchorParams,camp_id,url_search,tc;window.MAT_blocked=!1,window.addEventListener("blockMat",function(event){window.MAT_blocked=!0}),window.addEventListener("unblockMat",function(event){window.MAT_blocked=!1}),host&&token&&(host.indexOf(".spxl.socy.es",host.length-".spxl.socy.es".length)<0&&(host="json.spxl.socy.es"),this.token=token="A3NO_734_752_123_A3ME"==(token="ATREStCJZbZJWdr"==(token="EUFM_734_026_541_A3ME"==(token="CINEMANIA"==token?"CINE_486_193_607":token)?"ONCE_928_838_342_A3ME":token)?"A3AN_934_952_923":token)?"A3NN_834_852_823":token,this.host=host,this.referrer=document.referrer,this.time_init=Date.now()/1e3,this.is_blur=!1,this.counter=0,($pixel=this).mat=null,this.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))try{return decodeURIComponent(c.substring(name.length))}catch(e){return c.substring(name.length)}}return""},this.setCookie=function(cname,cvalue,exhours){var d=new Date,exhours=(d.setTime(d.getTime()+60*exhours*60*1e3),"expires="+d.toUTCString());return"md_pxl_n"!=cname&&"_MAT_XUM_"!=cname?(document.cookie=cname+"=",document.cookie=cname+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=cname+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",document.cookie=cname+"="+cvalue+";"+exhours+";path=/",!!this.getCookie(cname)):"_MAT_XUM_"==cname?(document.cookie=cname+"=",document.cookie=cname+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=cname+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/",document.cookie=cname+"="+cvalue+";"+exhours+";path=/",localStorage.setItem("_MAT_XUM_",cvalue),!!this.getCookie(cname)&&!!localStorage.getItem("_MAT_XUM_")):(localStorage.setItem("md_pxl_n",cvalue),localStorage.setItem("md_pxl_n_expires",exhours),!!localStorage.getItem("md_pxl_n")&&!!localStorage.getItem("md_pxl_n_expires"))},this.serialize=function(obj){var key,str="";for(key in obj)""!=str&&(str+="&"),str+=key+"="+encodeURIComponent(obj[key]);return str},this.get=function(url,dataObject,callback,errorCallback){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){xhr.readyState===XMLHttpRequest.DONE&&200===xhr.status&&"function"==typeof callback&&callback(xhr.responseText),xhr.readyState===XMLHttpRequest.DONE&&200!==xhr.status&&"function"==typeof errorCallback&&errorCallback(xhr.responseText)},xhr.open("GET",url+"?"+this.serialize(dataObject),!0),xhr.send()},this.getWithCredentials=function(url,dataObject,callback,errorCallback){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){xhr.readyState===XMLHttpRequest.DONE&&200===xhr.status&&"function"==typeof callback&&callback(xhr.responseText),xhr.readyState===XMLHttpRequest.DONE&&200!==xhr.status&&"function"==typeof errorCallback&&errorCallback(xhr.responseText)},xhr.withCredentials=!0,xhr.open("GET",url+"?"+this.serialize(dataObject),!0),xhr.send()},this.getJSON=function(url,dataObject,callback,errorCallback){this.get(url,dataObject,function(data){callback(JSON.parse(data))},function(data){"function"==typeof errorCallback&&errorCallback(JSON.parse(data))})},this.getJSONWithCredentials=function(url,dataObject,callback,errorCallback){this.getWithCredentials(url,dataObject,function(data){callback(JSON.parse(data))},function(data){"function"==typeof errorCallback&&errorCallback(JSON.parse(data))})},this.ping=function(seconds,id_media){var $this;this.idv&&!this.is_blur&&0!==(seconds="number"!=typeof seconds?0:seconds)&&($this=this,window.setTimeout(function(){$pixel.counter=$pixel.counter+1,$pixel.get("https://p1.socy.es/pf1.json",{idv:$pixel.idv,t:$pixel.token,time:Math.floor(Date.now()/1e3-$this.time_init),prof:Math.floor($pixel.maxScroll),c:$pixel.counter,i:id_media,a:Math.floor(Date.now()/1e3)},function(pingObject){$pixel.ping(seconds,id_media)})},1e3*seconds))},this._ga=this.getCookie("_ga"),this._gid=this.getCookie("_gid"),this.maxScroll=calculateScrollPercent(),this._uid=this._ga||this._gid||this.getCookie("__bs_id")||"bs.1.0."+function(length){for(var result="",alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<length;i++)result+=alphabet.charAt(Math.floor(Math.random()*alphabet.length));return result}(12),this.setCookie("__bs_id",this._uid,8760),data={t:$pixel.token,r:$pixel.referrer,h:window&&window.location&&window.location.href,_ga:$pixel._ga,_gid:$pixel._gid,_uid:$pixel._uid},(token=window&&window.location&&window.location.hash)&&(anchorParams={},(token=(token=(token=(token=token.slice(1)).split("#"))[0]).split("@")).map(function(param,i){param=param.split("=");return"mat_token"!==param[0]||void 0===param[1]||(anchorParams[param[0]]=param[1].substring(0,45),!1)}),data.fm=anchorParams.mat_token||""),(""===document.referrer||document.referrer.indexOf(window.location.host)<0&&document.referrer.indexOf("traffic.besocy.com")<0)&&sessionStorage.setItem("original_visit",""),localStorage.getItem("md_pxl_n")&&(data.n=localStorage.getItem("md_pxl_n")),sessionStorage.getItem("matSessionID")&&(data.matSession=sessionStorage.getItem("matSessionID")),sessionStorage.getItem("original_visit")&&(data.original_visit=sessionStorage.getItem("original_visit")),location.search&&(tc=(url_search=new URLSearchParams(location.search)).get("_tcode"),camp_id=url_search.get("sp_ad"),tc)&&(data._tcode=tc),location.hash&&(tc=(url_search=new URLSearchParams(location.hash.replace("#",""))).get("_tcode"),camp_id=url_search.get("sp_ad"),tc)&&(data._tcode=tc),dt_spxl_CO={camp_id:camp_id,getData:function(){var that=this;return new Promise(function(resolve,reject){try{var request;that.camp_id?((request=new XMLHttpRequest).open("GET","https://co.socy.es/"+that.camp_id,!0),request.onload=function(){200<=request.status&&request.status<400?(data=JSON.parse(request.responseText))?resolve(data):reject({error:2,error_msg:"json parse error"}):reject({error:1,error_msg:"http error"})},request.onerror=function(){reject({error:1,error_msg:"http error"})},request.send()):reject({error:0,error_msg:"Not campaign found"})}catch(e){reject(e)}})}},$pixel.getJSON("https://"+host+"/pixel.json",data,function(responseData){for(var cookie in $pixel.idv=responseData.__IDV__,$pixel.browserId=responseData.__NAVEGADOR__,$pixel.cookies=responseData.__COOKIES__,$pixel.medio=responseData.__MEDIADATA__,$pixel.adsocyTest=responseData.__ADSOCY_TEST__,$pixel.geoip=responseData.__GEOIP__,$pixel.adsocyTest=$pixel.adsocyTest?JSON.stringify($pixel.adsocyTest):"",$pixel.adsocyTest&&sessionStorage.setItem("adsocy_test",$pixel.adsocyTest),$pixel.cookies)$pixel.cookies[cookie]&&"false"!=$pixel.cookies[cookie]?$pixel.setCookie(cookie,$pixel.cookies[cookie],148):$pixel.setCookie(cookie,$pixel.cookies[cookie],0);if($pixel.idv&&($pixel.xandrUserMapping=null,!(-1<window.location.href.indexOf("ref=iframe")||window.frameElement))){$pixel.medio&&$pixel.medio.ping&&0<$pixel.medio.ping&&$pixel.ping(parseInt($pixel.medio.ping),parseInt($pixel.medio.id)),(""===document.referrer||document.referrer.indexOf(window.location.host)<0&&document.referrer.indexOf("traffic.besocy.com")<0)&&sessionStorage.setItem("original_visit",$pixel.idv),window.onscroll=function(){var actualScroll=calculateScrollPercent();actualScroll>$pixel.maxScroll&&($pixel.maxScroll=actualScroll)},window.onblur=function(){$pixel.is_blur=!0},window.onfocus=function(){$pixel.is_blur?($pixel.time_init=Date.now()/1e3,$pixel.is_blur=!1,$pixel.medio&&$pixel.medio.ping&&0<$pixel.medio.ping&&$pixel.ping(parseInt($pixel.medio.ping),parseInt($pixel.medio.id))):$pixel.is_blur=!1},$pixel.initMAT=function(){"undefined"!=typeof Mat&&window.__mat_data&&($pixel.mat=new Mat($pixel,window.__mat_data))},$pixel.getMAT=function(endpoint,styles,script,noCacheEndpoint){var metaKeywords,matToken;$pixel.getCookie("_MAT_TK_")&&"void"!==$pixel.getCookie("_MAT_TK_").substring(0,4)&&$pixel.medio.id&&!window.frameElement&&(matToken=$pixel.getCookie("_MAT_TK_"),metaKeywords=document.querySelector("meta[name='keywords']"),styles=styles||"https://mat.socy.es/mat/css/"+$pixel.token+"?mat_token="+matToken,script=script||"https://mat.socy.es/mat/js/"+$pixel.token+"?mat_token="+matToken,$pixel.loadData={matToken:matToken,metaKeywords:metaKeywords,endpoint:endpoint=endpoint||"https://mat.socy.es/mat.json",styles:styles,script:script,noCacheEndpoint:noCacheEndpoint,consent:""},-1!==endpoint.search("/yc/")?$pixel.loadMat():($pixel.medio.consent_name&&$pixel.getCookie($pixel.medio.consent_name)?$pixel.loadData.consent=$pixel.getCookie($pixel.medio.consent_name):$pixel.getCookie("euconsent-v2")?$pixel.loadData.consent=$pixel.getCookie("euconsent-v2"):$pixel.getCookie("eupubconsent-v2")&&($pixel.loadData.consent=$pixel.getCookie("eupubconsent-v2")),$pixel.medio.sconsent&&"1"===$pixel.medio.sconsent&&""!==$pixel.loadData.consent&&$pixel.medio.consent_sign&&this.get("https://mat.socy.es/mat.php/api/sconsent",{cid:$pixel.medio.client,mid:$pixel.medio.id,s:$pixel.medio.consent_sign,c:$pixel.loadData.consent}),$pixel.getCookie("_MAT_XUM_")?($pixel.xandrUserMapping={pixel_uid:$pixel.browserId,xandr_uid:$pixel.getCookie("_MAT_XUM_")},$pixel.loadMat()):((matToken=document.createElement("script")).src="https://secure.adnxs.com/getuid?https://mat.socy.es/mat.php/api/xandr_usermapping?pxl_id="+$pixel.browserId+"&consent="+$pixel.loadData.consent+"&user_id=$UID",document.body.appendChild(matToken))))},$pixel.loadMat=function(){var loadData=$pixel.loadData;$pixel.xandrUserMapping&&($pixel.xandrUserMapping.consent=loadData.consent),document.querySelector("link#mat-styles")||(dlink=document.getElementsByTagName("link")[0],(link=document.createElement("link")).id="mat-styles",link.rel="stylesheet",link.href=loadData.styles,dlink.parentNode.insertBefore(link,dlink));document.querySelector("script#mat-scripts")||((link=document.createElement("script")).setAttribute("id","mat-scripts"),link.setAttribute("crossorigin","anonymous"),link.setAttribute("async","1"),link.onload=$pixel.initMAT,zzzPixelScript.parentNode.insertBefore(link,zzzPixelScript),link.src=loadData.script);var dlink=-1!==loadData.endpoint.search("/yc/"),link=sessionStorage.getItem("matSessionID")?sessionStorage.getItem("matSessionID"):"",preMatR=document.location.href||$pixel.referrer,geoip=(dlink&&(link="sessionCached",preMatR=""),"");dlink?$pixel.geoip&&$pixel.geoip.countryCode&&["ES"].includes($pixel.geoip.countryCode)&&(geoip=JSON.stringify({countryCode:$pixel.geoip.countryCode})):geoip=JSON.stringify($pixel.geoip),$pixel.getJSON(loadData.endpoint,{media:$pixel.medio.id,matToken:loadData.matToken,_ga:dlink?"":$pixel._uid,matSession:link,_:!dlink&&loadData.noCacheEndpoint?(new Date).getTime():"",adsocyTest:sessionStorage.getItem("adsocy_test")?sessionStorage.getItem("adsocy_test"):"",geoip:geoip,matR:preMatR,xandrData:$pixel.xandrUserMapping&&!dlink?JSON.stringify($pixel.xandrUserMapping):""},function(data){if(data.mat){if((window.__mat_data=data).session)if("sessionCached"===data.session){for(var digits=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],matSession="",i=0;i<32;i++)matSession+=digits[Math.floor(Math.random()*digits.length)];$pixel.setCookie("matSessionID",matSession,1)}else $pixel.setCookie("matSessionID",data.session,1);$pixel.initMAT()}else $pixel.setCookie("_MAT_TK_","void_1_nomatdata",.00167)},function(data){$pixel.setCookie("_MAT_TK_","void_2_loadfail",.00167)})};responseData=null;if(!$pixel.getCookie("_MAT_TK_")&&$pixel.medio.id&&2==$pixel.medio.phase?responseData={media:$pixel.medio.id,t:1}:$pixel.getCookie("_MAT_TK_")&&"void"!==$pixel.getCookie("_MAT_TK_").substring(0,4)&&$pixel.medio.id&&(responseData={media:$pixel.medio.id,matToken:$pixel.getCookie("_MAT_TK_"),t:1}),responseData)if(responseData.matToken&&$pixel.getCookie("_MAT_CHK_")&&!$pixel.getCookie("__MAT_REGENERATE__")){var checkData=$pixel.getCookie("_MAT_CHK_");try{var checkData=JSON.parse(atob(checkData)),re=new RegExp(checkData.ua);navigator.userAgent.match(re)?$pixel.getMAT(checkData.ep,checkData.st,checkData.sc,!1):$pixel.setCookie("_MAT_TK_","void_6_novalidcachedtoken",.1)}catch(e){$pixel.setCookie("_MAT_TK_","void_7_novalidcachedtokendata",.1)}}else $pixel.getJSON("https://mat.socy.es/mat.php/check",responseData,function(matCheck){if("success"==matCheck.result&&matCheck.tokensData){for(var endpoint,noCache,checkData,tokenData=null,i=0;i<Object.keys(matCheck.tokensData).length;i++){var re=new RegExp(matCheck.tokensData[i].uaRegExp);if(navigator.userAgent.match(re)){tokenData=matCheck.tokensData[i];break}}tokenData?(endpoint=null,noCache=!1,$pixel.getCookie("__MAT_REGENERATE__")&&"void"!=$pixel.getCookie("__MAT_REGENERATE__").substring(0,4)?($pixel.setCookie("__MAT_REGENERATE__","void_3_regenerate",.25),endpoint=tokenData.endpointRegenerate,noCache=!0):endpoint=tokenData.endpoint,checkData={ua:tokenData.uaRegExp,ep:endpoint,st:tokenData.styles,sc:tokenData.script},$pixel.setCookie("_MAT_TK_",tokenData.data.token,.25),$pixel.setCookie("_MAT_CHK_",btoa(JSON.stringify(checkData)),.25),$pixel.getMAT(endpoint,tokenData.styles,tokenData.script,noCache)):$pixel.setCookie("_MAT_TK_","void_4_novalidtoken",.1)}else $pixel.setCookie("_MAT_TK_","void_5_notokenfound",.1)},function(){$pixel.setCookie("_MAT_TK_","void_5_checkfail",.00167)})}}))};!function(){window.zzzPixelScript=document.currentScript||document.getElementById("dogtrack-pixel")||document.getElementById("dogtrack-app")||document.getElementById("besocy_spixel");var parser=document.createElement("a");parser.href=zzzPixelScript.src,zzzPixelScript.dataset.h||(zzzPixelScript.dataset.h=zzzPixelScript.h||parser.hostname),zzzPixelScript.dataset.t||("string"==typeof(parser=zzzPixelScript.t||parser.pathname.replace("/pixel/js/","").replace("pixel/js/",""))&&-1<parser.indexOf("/")&&(parser=parser.substring(0,parser.indexOf("/"))),zzzPixelScript.dataset.t=parser),zzzPixelScript.p=new Pixel(zzzPixelScript.dataset.h,zzzPixelScript.dataset.t)}();