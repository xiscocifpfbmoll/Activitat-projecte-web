(function(){'use strict';class aa{constructor(){}getElement(){}init(){}resized(){}whenComplete(){}shouldFadeBody(){}hasLoadingIndicator(){}};async function ba(a,b,c,d){const e=await a.acceptResult();if(e.origin!=b||c&&!e.originVerified||d&&!e.secureChannel)throw Error("channel mismatch");return e.data};function ca(a){if(/swg.debug=1/.test(self.location.hash)){const b=Array.prototype.slice.call(arguments,0);b.unshift("[Subscriptions]");m.apply(m,b)}}function m(a){console.log.apply(console,arguments)}function p(a){console.warn.apply(console,arguments)}
function q(a,b,c){if(!a){const f=(b||"Assertion failed").split("%s");let g=f.shift();for(let h=2;h<arguments.length;h++){const k=arguments[h],l=f.shift();var d=g;var e=(e=k)&&1==e.nodeType?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):e;g=d+(e+l)}throw Error(g);}};let da;
const ea="Webkit webkit Moz moz O o".split(" "),fa={"align-content":"normal",animation:"none","align-items":"normal","align-self":"auto","alignment-baseline":"auto","backface-visibility":"hidden","background-clip":"border-box","background-image":"none","baseline-shift":"0","block-size":"auto",border:"none","border-collapse":"separate",bottom:"0","box-sizing":"border-box","break-after":"auto","break-before":"auto","break-inside":"auto","buffered-rendering":"auto","caption-side":"top","caret-color":"rgb(51, 51, 51)",clear:"none",
color:"rgb(51, 51, 51)","color-rendering":"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"rgb(51, 51, 51)","column-rule-style":"none","column-rule-width":"0","column-span":"none","column-width":"auto",contain:"none","counter-increment":"none","counter-reset":"none",cursor:"auto",direction:"inherit",display:"block","empty-cells":"show",filter:"none",flex:"none","flex-flow":"row nowrap","float":"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"none",
"font-size":"medium","font-family":"",height:"auto",hyphens:"manual","image-rendering":"auto","inline-size":"",isolation:"auto","justify-content":"normal","justify-items":"normal","justify-self":"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)","line-break":"auto","line-height":"normal","margin-bottom":"0",mask:"none","max-block-size":"none","max-height":"none","max-inline-size":"none","max-width":"none","min-block-size":"none","min-height":"0","min-inline-size":"0","min-width":"0",
"mix-blend-mode":"normal","object-fit":"fill","offset-distance":"none","offset-path":"none","offset-rotate":"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"none","overflow-anchor":"auto","overflow-wrap":"normal",overflow:"visible",padding:"0",page:"",perspective:"none","pointer-events":"auto",position:"static",quotes:"",resize:"none",right:"0","scroll-behavior":"auto","tab-size":"8","table-layout":"auto","text-align":"start","text-align-last":"auto","text-anchor":"start","text-combine-upright":"none",
"text-decoration":"none","text-indent":"0","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-size-adjust":"auto","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none",transition:"none 0s ease 0s","unicode-bidi":"normal","user-select":"auto","vector-effect":"none","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"0","word-wrap":"normal",
"writing-mode":"horizontal-tb",zoom:"1","z-index":"auto"};function ha(a,b,c){if(b.startsWith("--"))return b;da||(da={});let d=da[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(let g=0;g<ea.length;g++){const h=ea[g]+e;if(void 0!==a[h]){e=h;break a}}e=""}const f=e;void 0!==a[f]&&(d=f)}c||(da[b]=d)}return d}function r(a,b){for(const c in b)a.style.setProperty(ha(b,c),b[c].toString(),"important")}function ia(a,b,c){(b=ha(a.style,b,void 0))&&(a.style[b]=c)}
function ja(a,b){for(const c in b)ia(a,c,b[c])}function ka(a){var b=["height"];const c={};for(const d of b)c[d]=null;ja(a,c)};function v(a,b,c){b=a.createElement(b);for(const d in c)"style"==d?ja(b,c[d]):b.setAttribute(d,c[d]);return b}function la(a,b){const c=v(a.getWin().document,"style",{type:"text/css"});c.textContent=b;a.getHead().appendChild(c)};function w(a){return"AbortError"===(null==a?void 0:a.name)}function ma(a){a=Error("AbortError: "+a);a.name="AbortError";return a}function na(a){setTimeout(()=>{throw a;})};const oa={frameborder:"0",scrolling:"no"};function pa(a,b,c){a.A=b;a.Nd(b);a.A.onResizeRequest(d=>{c.resizeView(a,d)});return a.A.whenReady()}
class x extends aa{constructor(a,b,c,d,e=!1,f=!1){super();this.g=a;this.j=this.g.document;this.s=v(this.j,"iframe",oa);this.m=b;this.cb=c;this.V=d||{};this.Ee=e;this.ne=f;this.Nd=this.A=null;this.la=new Promise(g=>{this.Nd=g})}getElement(){return this.s}async init(a){const b=await this.m.openIframe(this.s,this.cb,this.V);return pa(this,b,a)}shouldFadeBody(){return this.Ee}hasLoadingIndicator(){return this.ne}async on(a,b){(await this.la).on(a,b)}async execute(a){(await this.la).execute(a)}async acceptResult(){return(await this.la).acceptResult()}async acceptResultAndVerify(a,
b,c){const d=await this.la;return ba(d,a,b,c)}whenComplete(){return this.acceptResult()}onCancel(a){this.acceptResult().catch(b=>{w(b)&&a();throw b;})}resized(){this.A&&this.A.resized()}};const qa={UNKNOWN:0,IMPRESSION_PAYWALL:1,IMPRESSION_AD:2,IMPRESSION_OFFERS:3,IMPRESSION_SUBSCRIBE_BUTTON:4,IMPRESSION_SMARTBOX:5,IMPRESSION_SWG_BUTTON:6,IMPRESSION_CLICK_TO_SHOW_OFFERS:7,IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED:8,IMPRESSION_SUBSCRIPTION_COMPLETE:9,IMPRESSION_ACCOUNT_CHANGED:10,IMPRESSION_PAGE_LOAD:11,IMPRESSION_LINK:12,IMPRESSION_SAVE_SUBSCR_TO_GOOGLE:13,IMPRESSION_GOOGLE_UPDATED:14,IMPRESSION_SHOW_OFFERS_SMARTBOX:15,IMPRESSION_SHOW_OFFERS_SWG_BUTTON:16,IMPRESSION_SELECT_OFFER_SMARTBOX:17,
IMPRESSION_SELECT_OFFER_SWG_BUTTON:18,IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON:19,IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON:20,IMPRESSION_METER_TOAST:21,IMPRESSION_REGWALL:22,IMPRESSION_SHOWCASE_REGWALL:23,IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT:24,IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT:25,IMPRESSION_CONTRIBUTION_OFFERS:26,IMPRESSION_TWG_COUNTER:27,IMPRESSION_TWG_SITE_SUPPORTER_WALL:28,IMPRESSION_TWG_PUBLICATION:29,IMPRESSION_TWG_STATIC_BUTTON:30,IMPRESSION_TWG_DYNAMIC_BUTTON:31,IMPRESSION_TWG_STICKER_SELECTION_SCREEN:32,
IMPRESSION_TWG_PUBLICATION_NOT_SET_UP:33,IMPRESSION_REGWALL_OPT_IN:34,IMPRESSION_NEWSLETTER_OPT_IN:35,IMPRESSION_SUBSCRIPTION_OFFERS_ERROR:36,IMPRESSION_CONTRIBUTION_OFFERS_ERROR:37,IMPRESSION_TWG_SHORTENED_STICKER_FLOW:38,IMPRESSION_SUBSCRIPTION_LINKING_LOADING:39,IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE:40,IMPRESSION_SUBSCRIPTION_LINKING_ERROR:41,IMPRESSION_SURVEY:42,IMPRESSION_REGWALL_ERROR:43,IMPRESSION_NEWSLETTER_ERROR:44,IMPRESSION_SURVEY_ERROR:45,IMPRESSION_METER_TOAST_ERROR:46,IMPRESSION_MINI_PROMPT:47,
IMPRESSION_MINI_PROMPT_ERROR:48,ACTION_SUBSCRIBE:1E3,ACTION_PAYMENT_COMPLETE:1001,ACTION_ACCOUNT_CREATED:1002,ACTION_ACCOUNT_ACKNOWLEDGED:1003,ACTION_SUBSCRIPTIONS_LANDING_PAGE:1004,ACTION_PAYMENT_FLOW_STARTED:1005,ACTION_OFFER_SELECTED:1006,ACTION_SWG_BUTTON_CLICK:1007,ACTION_VIEW_OFFERS:1008,ACTION_ALREADY_SUBSCRIBED:1009,ACTION_NEW_DEFERRED_ACCOUNT:1010,ACTION_LINK_CONTINUE:1011,ACTION_LINK_CANCEL:1012,ACTION_GOOGLE_UPDATED_CLOSE:1013,ACTION_USER_CANCELED_PAYFLOW:1014,ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE:1015,
ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL:1016,ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK:1017,ACTION_SWG_BUTTON_SELECT_OFFER_CLICK:1018,ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK:1019,ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK:1020,ACTION_USER_CONSENT_DEFERRED_ACCOUNT:1021,ACTION_USER_DENY_DEFERRED_ACCOUNT:1022,ACTION_DEFERRED_ACCOUNT_REDIRECT:1023,ACTION_GET_ENTITLEMENTS:1024,ACTION_METER_TOAST_SUBSCRIBE_CLICK:1025,ACTION_METER_TOAST_EXPANDED:1026,ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION:1027,ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN:1028,
ACTION_METER_TOAST_CLOSED_BY_X_CLICKED:1029,ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK:1030,ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK:1031,ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE:1032,ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE:1033,ACTION_CONTRIBUTION_OFFER_SELECTED:1034,ACTION_SHOWCASE_REGWALL_GSI_CLICK:1035,ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK:1036,ACTION_SUBSCRIPTION_OFFERS_CLOSED:1037,ACTION_CONTRIBUTION_OFFERS_CLOSED:1038,ACTION_TWG_STATIC_CTA_CLICK:1039,ACTION_TWG_DYNAMIC_CTA_CLICK:1040,
ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK:1041,ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK:1042,ACTION_TWG_COUNTER_CLICK:1043,ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK:1044,ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK:1045,ACTION_TWG_PAID_STICKER_SELECTION_CLICK:1046,ACTION_TWG_FREE_STICKER_SELECTION_CLICK:1047,ACTION_TWG_MINI_SUPPORTER_WALL_CLICK:1048,ACTION_TWG_CREATOR_BENEFIT_CLICK:1049,ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK:1050,ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK:1051,
ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK:1052,ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK:1053,ACTION_REGWALL_OPT_IN_BUTTON_CLICK:1054,ACTION_REGWALL_ALREADY_OPTED_IN_CLICK:1055,ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK:1056,ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK:1057,ACTION_REGWALL_OPT_IN_CLOSE:1058,ACTION_NEWSLETTER_OPT_IN_CLOSE:1059,ACTION_SHOWCASE_REGWALL_SIWG_CLICK:1060,ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK:1061,ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK:1062,ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK:1063,
ACTION_SUBSCRIPTION_OFFERS_RETRY:1064,ACTION_CONTRIBUTION_OFFERS_RETRY:1065,ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK:1066,ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING:1067,ACTION_SURVEY_SUBMIT_CLICK:1068,ACTION_SURVEY_CLOSED:1069,ACTION_SURVEY_DATA_TRANSFER:1070,ACTION_REGWALL_PAGE_REFRESH:1071,ACTION_NEWSLETTER_PAGE_REFRESH:1072,ACTION_SURVEY_PAGE_REFRESH:1073,ACTION_METER_TOAST_PAGE_REFRESH:1074,ACTION_MINI_PROMPT_INTERACTION:1075,ACTION_SURVEY_PREVIOUS_BUTTON_CLICK:1076,ACTION_SURVEY_NEXT_BUTTON_CLICK:1077,
EVENT_PAYMENT_FAILED:2E3,EVENT_REGWALL_OPT_IN_FAILED:2001,EVENT_NEWSLETTER_OPT_IN_FAILED:2002,EVENT_REGWALL_ALREADY_OPT_IN:2003,EVENT_NEWSLETTER_ALREADY_OPT_IN:2004,EVENT_SUBSCRIPTION_LINKING_FAILED:2005,EVENT_SURVEY_ALREADY_SUBMITTED:2006,EVENT_SURVEY_COMPLETION_RECORD_FAILED:2007,EVENT_SURVEY_DATA_TRANSFER_FAILED:2008,EVENT_CUSTOM:3E3,EVENT_CONFIRM_TX_ID:3001,EVENT_CHANGED_TX_ID:3002,EVENT_GPAY_NO_TX_ID:3003,EVENT_GPAY_CANNOT_CONFIRM_TX_ID:3004,EVENT_GOOGLE_UPDATED:3005,EVENT_NEW_TX_ID:3006,EVENT_UNLOCKED_BY_SUBSCRIPTION:3007,
EVENT_UNLOCKED_BY_METER:3008,EVENT_NO_ENTITLEMENTS:3009,EVENT_HAS_METERING_ENTITLEMENTS:3010,EVENT_OFFERED_METER:3011,EVENT_UNLOCKED_FREE_PAGE:3012,EVENT_INELIGIBLE_PAYWALL:3013,EVENT_UNLOCKED_FOR_CRAWLER:3014,EVENT_TWG_COUNTER_VIEW:3015,EVENT_TWG_SITE_SUPPORTER_WALL_VIEW:3016,EVENT_TWG_STATIC_BUTTON_VIEW:3017,EVENT_TWG_DYNAMIC_BUTTON_VIEW:3018,EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE:3019,EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE:3020,EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC:3021,
EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC:3022,EVENT_REGWALL_OPTED_IN:3023,EVENT_NEWSLETTER_OPTED_IN:3024,EVENT_SHOWCASE_METERING_INIT:3025,EVENT_DISABLE_MINIPROMPT_DESKTOP:3026,EVENT_SUBSCRIPTION_LINKING_SUCCESS:3027,EVENT_SURVEY_SUBMITTED:3028,EVENT_LINK_ACCOUNT_SUCCESS:3029,EVENT_SAVE_SUBSCRIPTION_SUCCESS:3030,EVENT_SURVEY_DATA_TRANSFER_COMPLETE:3031,EVENT_SUBSCRIPTION_STATE:4E3},ra={UNKNOWN_CLIENT:0,SWG_CLIENT:1,AMP_CLIENT:2,PROPENSITY_CLIENT:3,SWG_SERVER:4,PUBLISHER_CLIENT:5,SHOWCASE_CLIENT:6};
class sa{constructor(a=[],b=!0){const c=b?1:0;this.O=null==a[c]?null:a[c]}getComplete(){return this.O}setComplete(a){this.O=a}toArray(a=!0){const b=[this.O];a&&b.unshift(this.label());return b}label(){return"AccountCreationRequest"}}class ta{constructor(a=[],b=!0){b=b?1:0;this.Da=null==a[b]?null:a[b]}getAction(){return this.Da}setAction(a){this.Da=a}toArray(a=!0){const b=[this.Da];a&&b.unshift(this.label());return b}label(){return"ActionRequest"}}
class ua{constructor(a=[],b=!0){b=b?1:0;this.Zc=null==a[b]?null:a[b];this.oc=null==a[1+b]?null:a[1+b]}getSubscriberOrMember(){return this.Zc}setSubscriberOrMember(a){this.Zc=a}getLinkRequested(){return this.oc}setLinkRequested(a){this.oc=a}toArray(a=!0){const b=[this.Zc,this.oc];a&&b.unshift(this.label());return b}label(){return"AlreadySubscribedResponse"}}
class va{constructor(a=[],b=!0){const c=b?1:0;this.Xb=null==a[c]?null:a[c];this.cd=null==a[1+c]?null:a[1+c];this.Lc=null==a[2+c]?null:a[2+c];this.kd=null==a[3+c]?null:a[3+c];this.hd=null==a[4+c]?null:a[4+c];this.jd=null==a[5+c]?null:a[5+c];this.I=null==a[6+c]?null:a[6+c];this.Jc=null==a[7+c]?null:a[7+c];this.Wa=a[8+c]||[];this.Qb=null==a[9+c]?null:a[9+c];this.oa=null==a[10+c]?null:a[10+c];this.kb=null==a[11+c]||void 0==a[11+c]?null:new y(a[11+c],b);this.Ic=null==a[12+c]?null:a[12+c];this.hc=null==
a[13+c]?null:a[13+c]}getEmbedderOrigin(){return this.Xb}setEmbedderOrigin(a){this.Xb=a}getTransactionId(){return this.cd}setTransactionId(a){this.cd=a}getReferringOrigin(){return this.Lc}setReferringOrigin(a){this.Lc=a}getUtmSource(){return this.kd}setUtmSource(a){this.kd=a}getUtmCampaign(){return this.hd}setUtmCampaign(a){this.hd=a}getUtmMedium(){return this.jd}setUtmMedium(a){this.jd=a}getSku(){return this.I}setSku(a){this.I=a}getReadyToPay(){return this.Jc}setReadyToPay(a){this.Jc=a}getLabelList(){return this.Wa}setLabelList(a){this.Wa=
a}getClientVersion(){return this.Qb}setClientVersion(a){this.Qb=a}getUrl(){return this.oa}setUrl(a){this.oa=a}getClientTimestamp(){return this.kb}setClientTimestamp(a){this.kb=a}getReaderSurfaceType(){return this.Ic}setReaderSurfaceType(a){this.Ic=a}getIntegrationVersion(){return this.hc}setIntegrationVersion(a){this.hc=a}toArray(a=!0){const b=[this.Xb,this.cd,this.Lc,this.kd,this.hd,this.jd,this.I,this.Jc,this.Wa,this.Qb,this.oa,this.kb?this.kb.toArray(a):[],this.Ic,this.hc];a&&b.unshift(this.label());
return b}label(){return"AnalyticsContext"}}class wa{constructor(a=[],b=!0){b=b?1:0;this.ac=null==a[b]?null:a[b];this.jc=null==a[1+b]?null:a[1+b]}getEventOriginator(){return this.ac}setEventOriginator(a){this.ac=a}getIsFromUserAction(){return this.jc}setIsFromUserAction(a){this.jc=a}toArray(a=!0){const b=[this.ac,this.jc];a&&b.unshift(this.label());return b}label(){return"AnalyticsEventMeta"}}
class xa{constructor(a=[],b=!0){const c=b?1:0;this.G=null==a[c]||void 0==a[c]?null:new va(a[c],b);this.ta=null==a[1+c]?null:a[1+c];this.pb=null==a[2+c]||void 0==a[2+c]?null:new wa(a[2+c],b);this.rb=null==a[3+c]||void 0==a[3+c]?null:new z(a[3+c],b)}getContext(){return this.G}setContext(a){this.G=a}getEvent(){return this.ta}setEvent(a){this.ta=a}getMeta(){return this.pb}setMeta(a){this.pb=a}getParams(){return this.rb}setParams(a){this.rb=a}toArray(a=!0){const b=[this.G?this.G.toArray(a):[],this.ta,
this.pb?this.pb.toArray(a):[],this.rb?this.rb.toArray(a):[]];a&&b.unshift(this.label());return b}label(){return"AnalyticsRequest"}}class ya{constructor(a=[],b=!0){b=b?1:0;this.ta=null==a[b]?null:a[b]}getEvent(){return this.ta}setEvent(a){this.ta=a}toArray(a=!0){const b=[this.ta];a&&b.unshift(this.label());return b}label(){return"AudienceActivityClientLogsRequest"}}
class za{constructor(a=[],b=!0){b=b?1:0;this.Aa=null==a[b]?null:a[b];this.Fb=null==a[1+b]?null:a[1+b];this.gd=null==a[2+b]?null:a[2+b];this.Hb=null==a[3+b]?null:a[3+b]}getSwgUserToken(){return this.Aa}setSwgUserToken(a){this.Aa=a}getActionCompleted(){return this.Fb}setActionCompleted(a){this.Fb=a}getUserEmail(){return this.gd}setUserEmail(a){this.gd=a}getAlreadyCompleted(){return this.Hb}setAlreadyCompleted(a){this.Hb=a}toArray(a=!0){const b=[this.Aa,this.Fb,this.gd,this.Hb];a&&b.unshift(this.label());
return b}label(){return"CompleteAudienceActionResponse"}}class Aa{constructor(a=[],b=!0){b=b?1:0;this.wa=null==a[b]?null:a[b];this.Wc=null==a[1+b]?null:a[1+b]}getJwt(){return this.wa}setJwt(a){this.wa=a}getSource(){return this.Wc}setSource(a){this.Wc=a}toArray(a=!0){const b=[this.wa,this.Wc];a&&b.unshift(this.label());return b}label(){return"EntitlementJwt"}}
class Ba{constructor(a=[],b=!0){const c=b?1:0;this.Eb=null==a[c]||void 0==a[c]?null:new Aa(a[c],b);this.jb=null==a[1+c]||void 0==a[1+c]?null:new y(a[1+c],b);this.Zb=null==a[2+c]?null:a[2+c];this.Yb=null==a[3+c]?null:a[3+c];this.Ba=null==a[4+c]?null:a[4+c];this.va=null==a[5+c]?null:a[5+c];this.ca=null==a[6+c]||void 0==a[6+c]?null:new y(a[6+c],b)}getUsedEntitlement(){return this.Eb}setUsedEntitlement(a){this.Eb=a}getClientEventTime(){return this.jb}setClientEventTime(a){this.jb=a}getEntitlementSource(){return this.Zb}setEntitlementSource(a){this.Zb=
a}getEntitlementResult(){return this.Yb}setEntitlementResult(a){this.Yb=a}getToken(){return this.Ba}setToken(a){this.Ba=a}getIsUserRegistered(){return this.va}setIsUserRegistered(a){this.va=a}getSubscriptionTimestamp(){return this.ca}setSubscriptionTimestamp(a){this.ca=a}toArray(a=!0){const b=[this.Eb?this.Eb.toArray(a):[],this.jb?this.jb.toArray(a):[],this.Zb,this.Yb,this.Ba,this.va,this.ca?this.ca.toArray(a):[]];a&&b.unshift(this.label());return b}label(){return"EntitlementsRequest"}}
class Ca{constructor(a=[],b=!0){b=b?1:0;this.wa=null==a[b]?null:a[b];this.Aa=null==a[1+b]?null:a[1+b]}getJwt(){return this.wa}setJwt(a){this.wa=a}getSwgUserToken(){return this.Aa}setSwgUserToken(a){this.Aa=a}toArray(a=!0){const b=[this.wa,this.Aa];a&&b.unshift(this.label());return b}label(){return"EntitlementsResponse"}}
class z{constructor(a=[],b=!0){const c=b?1:0;this.Vc=null==a[c]?null:a[c];this.dc=null==a[1+c]?null:a[1+c];this.ec=null==a[2+c]?null:a[2+c];this.I=null==a[3+c]?null:a[3+c];this.uc=null==a[4+c]?null:a[4+c];this.va=null==a[5+c]?null:a[5+c];this.$c=null==a[6+c]?null:a[6+c];this.ca=null==a[7+c]||void 0==a[7+c]?null:new y(a[7+c],b)}getSmartboxMessage(){return this.Vc}setSmartboxMessage(a){this.Vc=a}getGpayTransactionId(){return this.dc}setGpayTransactionId(a){this.dc=a}getHadLogged(){return this.ec}setHadLogged(a){this.ec=
a}getSku(){return this.I}setSku(a){this.I=a}getOldTransactionId(){return this.uc}setOldTransactionId(a){this.uc=a}getIsUserRegistered(){return this.va}setIsUserRegistered(a){this.va=a}getSubscriptionFlow(){return this.$c}setSubscriptionFlow(a){this.$c=a}getSubscriptionTimestamp(){return this.ca}setSubscriptionTimestamp(a){this.ca=a}toArray(a=!0){const b=[this.Vc,this.dc,this.ec,this.I,this.uc,this.va,this.$c,this.ca?this.ca.toArray(a):[]];a&&b.unshift(this.label());return b}label(){return"EventParams"}}
class Da{constructor(a=[],b=!0){b=b?1:0;this.O=null==a[b]?null:a[b];this.$b=null==a[1+b]?null:a[1+b]}getComplete(){return this.O}setComplete(a){this.O=a}getError(){return this.$b}setError(a){this.$b=a}toArray(a=!0){const b=[this.O,this.$b];a&&b.unshift(this.label());return b}label(){return"FinishedLoggingResponse"}}
class Ea{constructor(a=[],b=!0){b=b?1:0;this.Mb=null==a[b]?null:a[b];this.Ba=null==a[1+b]?null:a[1+b]}getAuthCode(){return this.Mb}setAuthCode(a){this.Mb=a}getToken(){return this.Ba}setToken(a){this.Ba=a}toArray(a=!0){const b=[this.Mb,this.Ba];a&&b.unshift(this.label());return b}label(){return"LinkSaveTokenRequest"}}
class Fa{constructor(a=[],b=!0){b=b?1:0;this.Oc=null==a[b]?null:a[b]}getRequested(){return this.Oc}setRequested(a){this.Oc=a}toArray(a=!0){const b=[this.Oc];a&&b.unshift(this.label());return b}label(){return"LinkingInfoResponse"}}class Ga{constructor(a=[],b=!0){b=b?1:0;this.fd=null==a[b]?null:a[b]}getUrlPath(){return this.fd}setUrlPath(a){this.fd=a}toArray(a=!0){const b=[this.fd];a&&b.unshift(this.label());return b}label(){return"OpenDialogRequest"}}
class Ha{constructor(a=[],b=!0){b=b?1:0;this.I=null==a[b]?null:a[b];this.tc=null==a[1+b]?null:a[1+b];this.yc=null==a[2+b]?null:a[2+b];this.Bc=null==a[3+b]?null:a[3+b];this.sc=null==a[4+b]?null:a[4+b];this.Ub=null==a[5+b]?null:a[5+b];this.Ib=null==a[6+b]?null:a[6+b];this.Sc=null==a[7+b]?null:a[7+b]}getSku(){return this.I}setSku(a){this.I=a}getOldSku(){return this.tc}setOldSku(a){this.tc=a}getOneTime(){return this.yc}setOneTime(a){this.yc=a}getPlayOffer(){return this.Bc}setPlayOffer(a){this.Bc=a}getOldPlayOffer(){return this.sc}setOldPlayOffer(a){this.sc=
a}getCustomMessage(){return this.Ub}setCustomMessage(a){this.Ub=a}getAnonymous(){return this.Ib}setAnonymous(a){this.Ib=a}getSharingPolicyEnabled(){return this.Sc}setSharingPolicyEnabled(a){this.Sc=a}toArray(a=!0){const b=[this.I,this.tc,this.yc,this.Bc,this.sc,this.Ub,this.Ib,this.Sc];a&&b.unshift(this.label());return b}label(){return"SkuSelectedResponse"}}
class Ia{constructor(a=[],b=!0){b=b?1:0;this.ic=null==a[b]?null:a[b]}getIsClicked(){return this.ic}setIsClicked(a){this.ic=a}toArray(a=!0){const b=[this.ic];a&&b.unshift(this.label());return b}label(){return"SmartBoxMessage"}}class Ja{constructor(a=[],b=!0){b=b?1:0;this.Yc=null==a[b]?null:a[b]}getSubscribe(){return this.Yc}setSubscribe(a){this.Yc=a}toArray(a=!0){const b=[this.Yc];a&&b.unshift(this.label());return b}label(){return"SubscribeResponse"}}
class Ka{constructor(a=[],b=!0){b=b?1:0;this.X=null==a[b]?null:a[b];this.za=null==a[1+b]?null:a[1+b]}getPublisherProvidedId(){return this.X}setPublisherProvidedId(a){this.X=a}getSuccess(){return this.za}setSuccess(a){this.za=a}toArray(a=!0){const b=[this.X,this.za];a&&b.unshift(this.label());return b}label(){return"SubscriptionLinkingCompleteResponse"}}
class La{constructor(a=[],b=!0){b=b?1:0;this.X=null==a[b]?null:a[b]}getPublisherProvidedId(){return this.X}setPublisherProvidedId(a){this.X=a}toArray(a=!0){const b=[this.X];a&&b.unshift(this.label());return b}label(){return"SubscriptionLinkingResponse"}}
class Ma{constructor(a=[],b=!0){b=b?1:0;this.Kb=null==a[b]?null:a[b];this.Lb=null==a[1+b]?null:a[1+b];this.Jb=null==a[2+b]?null:a[2+b]}getAnswerId(){return this.Kb}setAnswerId(a){this.Kb=a}getAnswerText(){return this.Lb}setAnswerText(a){this.Lb=a}getAnswerCategory(){return this.Jb}setAnswerCategory(a){this.Jb=a}toArray(a=!0){const b=[this.Kb,this.Lb,this.Jb];a&&b.unshift(this.label());return b}label(){return"SurveyAnswer"}}
class Na{constructor(a=[],b=!0){this.Cb=(a[b?1:0]||[]).map(c=>new Oa(c,b))}getSurveyQuestionsList(){return this.Cb}setSurveyQuestionsList(a){this.Cb=a}toArray(a=!0){const b=[this.Cb?this.Cb.map(c=>c.toArray(a)):[]];a&&b.unshift(this.label());return b}label(){return"SurveyDataTransferRequest"}}
class Pa{constructor(a=[],b=!0){b=b?1:0;this.za=null==a[b]?null:a[b]}getSuccess(){return this.za}setSuccess(a){this.za=a}toArray(a=!0){const b=[this.za];a&&b.unshift(this.label());return b}label(){return"SurveyDataTransferResponse"}}
class Oa{constructor(a=[],b=!0){const c=b?1:0;this.Gc=null==a[c]?null:a[c];this.Hc=null==a[1+c]?null:a[1+c];this.Fc=null==a[2+c]?null:a[2+c];this.Bb=(a[3+c]||[]).map(d=>new Ma(d,b))}getQuestionId(){return this.Gc}setQuestionId(a){this.Gc=a}getQuestionText(){return this.Hc}setQuestionText(a){this.Hc=a}getQuestionCategory(){return this.Fc}setQuestionCategory(a){this.Fc=a}getSurveyAnswersList(){return this.Bb}setSurveyAnswersList(a){this.Bb=a}toArray(a=!0){const b=[this.Gc,this.Hc,this.Fc,this.Bb?this.Bb.map(c=>
c.toArray(a)):[]];a&&b.unshift(this.label());return b}label(){return"SurveyQuestion"}}class y{constructor(a=[],b=!0){b=b?1:0;this.Rc=null==a[b]?null:a[b];this.qc=null==a[1+b]?null:a[1+b]}getSeconds(){return this.Rc}setSeconds(a){this.Rc=a}getNanos(){return this.qc}setNanos(a){this.qc=a}toArray(a=!0){const b=[this.Rc,this.qc];a&&b.unshift(this.label());return b}label(){return"Timestamp"}}
class Qa{constructor(a=[],b=!0){b=b?1:0;this.Ea=null==a[b]?null:a[b]}getClose(){return this.Ea}setClose(a){this.Ea=a}toArray(a=!0){const b=[this.Ea];a&&b.unshift(this.label());return b}label(){return"ToastCloseRequest"}}class Ra{constructor(a=[],b=!0){b=b?1:0;this.rc=null==a[b]?null:a[b]}getNative(){return this.rc}setNative(a){this.rc=a}toArray(a=!0){const b=[this.rc];a&&b.unshift(this.label());return b}label(){return"ViewSubscriptionsResponse"}}
const Sa={AccountCreationRequest:sa,ActionRequest:ta,AlreadySubscribedResponse:ua,AnalyticsContext:va,AnalyticsEventMeta:wa,AnalyticsRequest:xa,AudienceActivityClientLogsRequest:ya,CompleteAudienceActionResponse:za,EntitlementJwt:Aa,EntitlementsRequest:Ba,EntitlementsResponse:Ca,EventParams:z,FinishedLoggingResponse:Da,LinkSaveTokenRequest:Ea,LinkingInfoResponse:Fa,OpenDialogRequest:Ga,SkuSelectedResponse:Ha,SmartBoxMessage:Ia,SubscribeResponse:Ja,SubscriptionLinkingCompleteResponse:Ka,SubscriptionLinkingResponse:La,
SurveyAnswer:Ma,SurveyDataTransferRequest:Na,SurveyDataTransferResponse:Pa,SurveyQuestion:Oa,Timestamp:y,ToastCloseRequest:Qa,ViewSubscriptionsResponse:Ra};const Ta={"-":"+",_:"/"},Ua={"+":"-","/":"_","=":""};function Va(a){const b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){const d=a.charCodeAt(c);q(255>=d,"Characters must be in range [0,255]");b[c]=d}return b}function Wa(a){const b=Array(a.length);for(let c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")}function Xa(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode(a);const b=Wa(new Uint8Array(a));return decodeURIComponent(escape(b))}
function Ya(a){return"undefined"!==typeof TextEncoder?(new TextEncoder("utf-8")).encode(a):Va(unescape(encodeURIComponent(a)))}function Za(a){const b=atob(a.replace(/[-_]/g,c=>Ta[c]));return Va(b)}function $a(a){a=Wa(a);return btoa(a).replace(/[+/=]/g,b=>Ua[b])};function ab(a,b){try{return JSON.parse(a)}catch(c){b&&b(c)}}function bb(a,b){const c=ab(a);return c&&c[b]||null};function cb(a){function b(){throw Error(`Invalid token: "${a}"`);}const c=a.split(".");3!=c.length&&b();const d=Za(c[0]),e=Za(c[1]);return{header:ab(Xa(d),b),payload:ab(Xa(e),b),verifiable:`${c[0]}.${c[1]}`,sig:c[2]}}class db{constructor(){}decode(a){return cb(a).payload}};class eb{constructor(a,b,c,d,e,f,g,h){this.service=a;this.raw=b;this.entitlements=c;this.isReadyToPay=g||!1;this.decryptedDocumentKey=h||null;this.Ec=d;this.md=e;this.vd=f}clone(){return new eb(this.service,this.raw,this.entitlements.map(a=>a.clone()),this.Ec,this.md,this.vd,this.isReadyToPay,this.decryptedDocumentKey)}json(){return{service:this.service,entitlements:this.entitlements.map(a=>a.json()),isReadyToPay:this.isReadyToPay}}enablesThisWithCacheableEntitlements(){return!!this.getEntitlementForThis()&&
!this.enablesThisWithGoogleMetering()&&!this.enablesThisWithGoogleDevMode()}enablesThisWithGoogleMetering(){const a=this.getEntitlementForThis();return!!a&&"google:metering"===a.source}enablesThisWithGoogleDevMode(){const a=this.getEntitlementForThis();if(!a)return!1;const b="google"===a.source&&-1!==a.subscriptionToken.indexOf("GOOGLE_DEV_MODE_ORDER"),c="GOOGLE_DEV_MODE_TOKEN"===a.subscriptionToken;return b||c}enablesThis(a){return this.enables(this.Ec,a)}enablesAny(a){for(let b=0;b<this.entitlements.length;b++)if(0<
this.entitlements[b].products.length&&(!a||a==this.entitlements[b].source))return!0;return!1}enables(a,b){return a?!!this.getEntitlementFor(a,b):!1}getEntitlementForThis(a){return this.getEntitlementFor(this.Ec,a)}getEntitlementFor(a,b){if(!a)return p("SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID."),null;const c=this.entitlements.filter(f=>f.enables(a)&&(!b||
b===f.source)),d=c.find(({source:f})=>"google:metering"!==f),e=c.find(({source:f})=>"google:metering"===f);return d||e||null}getEntitlementForSource(a){if(0<this.entitlements.length)for(let b=0;b<this.entitlements.length;b++)if(this.entitlements[b].subscriptionToken&&a==this.entitlements[b].source)return this.entitlements[b];return null}ack(){this.md(this)}consume(a){this.vd(this,a)}}
function fb(a,b){return(Array.isArray(a)?a:[a]).map(c=>{var d=c;d||(d={});c=d.source||"";const e=d.products||[],f=d.subscriptionToken;let g;try{g=f?b.decode(f):null}catch(k){g=null}d=d.subscriptionTimestamp;let h;try{h=new y([d.seconds_,d.nanos_],!1)}catch(k){h=null}return new gb(c,e,f,g,h)})}
class gb{constructor(a,b,c,d,e){this.source=a;this.products=b;this.subscriptionToken=c;this.subscriptionTokenContents=d;this.subscriptionTimestamp=e}clone(){return new gb(this.source,this.products.slice(0),this.subscriptionToken,this.subscriptionTokenContents,this.subscriptionTimestamp)}json(){return{source:this.source,products:this.products,subscriptionToken:this.subscriptionToken}}enables(a){if(!a)return!1;const b=a.indexOf(":");if(-1!=b){const c=a.substring(0,b+1);if(c+"*"==a&&1<=this.products.filter(d=>
d.substring(0,b+1)==c).length)return ca("enabled with wildcard productId"),!0;if(this.products.includes(c+"*"))return ca("enabled with wildcard entitlement"),!0}return this.products.includes(a)}getSku(){if("google"!==this.source)return null;const a=bb(this.subscriptionToken,"productId")||null;a||p("Unable to retrieve SKU from SwG subscription token");return a}};class hb{constructor(a,b){this.idToken=a;this.data=b;this.id=b.sub;this.email=b.email;this.emailVerified=b.email_verified;this.name=b.name;this.givenName=b.given_name;this.familyName=b.family_name;this.pictureUrl=b.picture}clone(){return new hb(this.idToken,this.data)}json(){return{id:this.id,email:this.email,emailVerified:this.emailVerified,name:this.name,givenName:this.givenName,familyName:this.familyName,pictureUrl:this.pictureUrl}}};class ib{constructor(a,b,c,d,e,f,g=null,h=null,k=null,l=null){this.raw=a;this.purchaseData=b;this.userData=c;this.entitlements=d;this.productType=e;this.Qa=f;this.oldSku=g;this.swgUserToken=h;this.paymentRecurrence=k;this.requestMetadata=l}clone(){return new ib(this.raw,this.purchaseData,this.userData,this.entitlements,this.productType,this.Qa,this.oldSku,this.swgUserToken)}json(){return{purchaseData:this.purchaseData.json(),userData:this.userData?this.userData.json():null,entitlements:this.entitlements?
this.entitlements.json():null,oldSku:this.oldSku,productType:this.productType,swgUserToken:this.swgUserToken}}complete(){return this.Qa()}}class jb{constructor(a,b){this.data=this.raw=a;this.signature=b}clone(){return new jb(this.raw,this.signature)}json(){return{data:this.raw,signature:this.signature}}};class kb{constructor(a,b,c,d){this.entitlements=a;this.userData=b;this.purchaseDataList=c;this.purchaseData=c[0];this.Qa=d}clone(){return new kb(this.entitlements,this.userData,this.purchaseDataList,this.Qa)}json(){return{entitlements:this.entitlements.json(),userData:this.userData.json(),purchaseDataList:this.purchaseDataList.map(a=>a.json()),purchaseData:this.purchaseData.json()}}complete(){return this.Qa()}};const lb={UNKNOWN:"unknown",NON_SUBSCRIBER:"non_subscriber",SUBSCRIBER:"subscriber",PAST_SUBSCRIBER:"past_subscriber"},mb={IMPRESSION_PAYWALL:"paywall",IMPRESSION_AD:"ad_shown",IMPRESSION_OFFERS:"offers_shown",ACTION_SUBSCRIPTIONS_LANDING_PAGE:"subscriptions_landing_page",ACTION_OFFER_SELECTED:"offer_selected",ACTION_PAYMENT_FLOW_STARTED:"payment_flow_start",ACTION_PAYMENT_COMPLETED:"payment_complete",EVENT_CUSTOM:"custom"};const nb={GENERAL:"general",PAYWALL:"paywall"};let ob,pb;function C(a){ob||(ob=self.document.createElement("a"),pb=self.UrlCache||(self.UrlCache=Object.create(null)));const b=pb[a];if(b)return b;var c=ob;c.href=a;const d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:c.protocol+"//"+c.host};c.origin&&"null"!==c.origin?d.origin=c.origin:"data:"!==d.protocol&&d.host||(d.origin=d.href);return pb[a]=d}
function D(a){return a?(/^[?#]/.test(a)?a.slice(1):a).split("&").reduce((b,c)=>{c=c.split("=");try{const d=decodeURIComponent(c[0]||""),e=decodeURIComponent(c[1]||"");d&&(b[d]=e)}catch(d){p(`SwG could not parse a URL query param: ${c[0]}`)}return b},{}):{}}function E(a,b,c){const d=a.indexOf("?"),e=a.indexOf("#");let f="";-1!=e&&(f=a.substring(e),a=a.substring(0,e));-1==d?a+="?":d<a.length-1&&(a+="&");a+=encodeURIComponent(b)+"="+encodeURIComponent(c);return a+f}
function qb(a){const b=a.getRootNode();let c;return(null==(c=b.querySelector("link[rel='canonical']"))?void 0:c.href)||b.location.origin+b.location.pathname}const rb=C(self.window.location.href);C(self.document.referrer);const sb={zero:0,nocache:1,hr1:36E5,hr12:432E5},tb={"default":{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:"hr1"},prod:{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:sb.hr1},autopush:{frontEnd:"https://subscribe-autopush.sandbox.google.com",payEnv:"PRODUCTION",playEnv:"AUTOPUSH",feCache:sb.nocache},qual:{frontEnd:"https://subscribe-qual.sandbox.google.com",payEnv:"SANDBOX",playEnv:"STAGING",feCache:sb.hr1}};
function F(){const a=D(self.location.hash)["swg.mode"];return a&&tb[a]?tb[a]:tb["default"]}function ub(a){const b=D(self.location.hash)["swg.experiments"];void 0!==b&&(a=E(a,"e",b));return`${F().frontEnd}/swg/_/api/v1`+a}function vb(a){return"https://pubads.g.doubleclick.net"+a}
function G(a,b={},c=!0,d=""){const e=d?c?`swg/${d}`:`${d}/swg`:"swg";a=E(`${F().frontEnd}/${e}/_/ui/v1${a}`,"_",wb());d=D(self.location.hash);const f=d["swg.boqjsmode"];void 0!==f&&(a=E(a,"jsmode",f));d=d["swg.experiments"];void 0!==d&&(a=E(a,"e",d));for(const g in b)a=E(a,g,b[g]);return a}function H(a){return Object.assign(a,{_client:"SwG 1.0.5"})}function wb(){var a=F().feCache;let b=sb[a];null==b&&(b=1);if(0===b)return"_";const c=Date.now();return String(1>=b?c:Math.floor(c/b))};const xb={IMMEDIATE_WITH_TIME_PRORATION:1},yb={AUTO:1,ONE_TIME:2};function I(a,b=null){return new z([,,,,a,,,b])}
class J{constructor(a,b,c="SUBSCRIPTION"){this.h=a;this.Ac=a.payClient();this.M=a.pageConfig();this.o=a.dialogManager();this.ma=b;this.Pd=c;this.U=a.analytics();this.u=a.eventManager();this.D=a.clientConfigManager()}async start(){var a=(await this.D.getClientConfig()).paySwgVersion;const b={skuId:this.ma.skuId,publicationId:this.M.getPublicationId()};a&&(b.swgVersion=a);if(this.ma.oldSku){b.oldSku=this.ma.oldSku;var c=this.ma.replaceSkuProrationMode;b.replaceSkuProrationMode=c?xb[c]:xb.IMMEDIATE_WITH_TIME_PRORATION;
this.U.setSku(b.oldSku)}this.ma.oneTime&&(b.paymentRecurrence=yb.ONE_TIME);this.ma.metadata&&(b.metadata=this.ma.metadata);c="UI_CONTRIBUTION"==this.Pd?"contribute":"subscribe";this.h.callbacks().triggerFlowStarted(c,this.ma);this.u.logSwgEvent(1005,!0,I(b.skuId));zb=!0;this.Ac.start({apiVersion:1,allowedPaymentMethods:["CARD"],environment:F().payEnv,playEnvironment:F().playEnv,swg:b,i:{startTimeMs:Date.now(),productType:this.Pd}},{forceRedirect:"redirect"==this.h.config().windowOpenMode,forceDisableNative:"2"==
a||"3"==a});Promise.resolve()}}
function Ab(a){const b=a.eventManager();a.payClient().onResponse(async c=>{a.entitlementsManager().blockNextNotification();var d=new Bb(a);const e=Cb(a,c,d.complete.bind(d));a.callbacks().triggerPaymentResponse(e);try{const f=await e,g=bb(f.purchaseData.raw,"productId")||null;a.analytics().setSku(g||"");b.logSwgEvent(1001,!0,I(g||"","UI_CONTRIBUTION"==f.productType?"contribute":"subscribe"));d.start(f)}catch(f){if(w(f))d="UI_CONTRIBUTION"==f.productType?"contribute":"subscribe",a.callbacks().triggerFlowCanceled(d),
a.eventManager().logSwgEvent(1014,!0);else throw a.eventManager().logSwgEvent(2E3,!1),a.jserror().error("Pay failed",f),f;}})}
class Bb{constructor(a){this.g=a.win();this.h=a;this.m=a.activities();this.o=a.dialogManager();this.ab=this.l=null;this.U=a.analytics();this.u=a.eventManager();this.D=a.clientConfigManager();this.I=null}async start(a){this.I=bb(a.purchaseData.raw,"productId")||null;this.u.logSwgEvent(10,!0,I(this.I||""));this.h.entitlementsManager().reset(!0);const b={publicationId:this.h.pageConfig().getPublicationId(),productType:a.productType,isSubscriptionUpdate:!!a.oldSku,isOneTime:!!a.paymentRecurrence};a.userData&&
a.entitlements?(b.idToken=a.userData.idToken,this.h.entitlementsManager().pushNextEntitlements(a.entitlements.raw),a.swgUserToken&&this.h.storage().set("USER_TOKEN",a.swgUserToken,!0)):b.loginHint=a.userData&&a.userData.email;const c={};if("VIRTUAL_GIFT"===b.productType){Object.assign(c,{productType:b.productType,publicationId:b.publicationId,offerId:this.I,origin:C(this.g.location.href).origin,isPaid:!0,checkOrderStatus:!0});a.requestMetadata&&(c.canonicalUrl=a.requestMetadata.contentId,c.isAnonymous=
a.requestMetadata.anonymous,b.contentTitle=a.requestMetadata.contentTitle);a.swgUserToken&&(b.swgUserToken=a.swgUserToken);const e=bb(a.purchaseData.raw,"orderId")||null;e&&(b.orderId=e)}this.D.shouldForceLangInIframes()&&(c.hl=this.D.getLanguage());const d=G("/payconfirmiframe",c);a=await this.D.getClientConfig();b.useUpdatedConfirmUi=a.useUpdatedOfferFlows;b.skipAccountCreationScreen=a.skipAccountCreationScreen;this.l=new x(this.g,this.m,d,H(b),!0);this.l.on(Ca,this.ke.bind(this));this.l.acceptResult().then(()=>
{this.o.completeView(this.l)});this.ab=this.o.openView(this.l);this.ab.then(()=>{this.h.callbacks().triggerPayConfirmOpened(this.l)})}ke(a){const b=a.getJwt();b&&this.h.entitlementsManager().pushNextEntitlements(b)}async complete(){this.u.logSwgEvent(1002,!0,I(this.I||""));var a=Date.now().toString();this.h.storage().set("READ_TIME",a,!1);this.h.entitlementsManager().unblockNextNotification();a=await this.D.getClientConfig();await this.ab;if(!a.skipAccountCreationScreen){const b=new sa;b.setComplete(!0);
this.l.execute(b)}try{await this.l.acceptResult()}catch(b){}a.skipAccountCreationScreen||this.u.logSwgEvent(1003,!0,I(this.I||""));this.h.entitlementsManager().setToastShown(!0)}}var zb=!1;
async function Cb(a,b,c){const d=!zb;zb=!1;var e=await b,f=void 0;if("object"===typeof e&&e.googleTransactionId){const t=a.analytics().getTransactionId(),A=e.googleTransactionId;d?(a.analytics().setTransactionId(A),b=3004):t===A?b=3001:(f=new z,f.setGpayTransactionId(A),b=3002)}else f=new z,f.setHadLogged(!d),b=3003;a.eventManager().logSwgEvent(b,!0,f);var g=b=null,h="SUBSCRIPTION";let k=f=null,l=null;e&&("string"==typeof e?g=e:("swgCallbackData"in e?b=e.swgCallbackData:"integratorClientCallbackData"in
e&&(g=e.integratorClientCallbackData),"paymentRequest"in e?(h=e.paymentRequest.swg||{},f=h.oldSku,k=h.paymentRecurrence,l=h.metadata,h=(e.paymentRequest.i||{}).productType||"SUBSCRIPTION"):"productType"in e&&(h=e.productType)));g&&!b&&(g=atob(g))&&(b=JSON.parse(g).swgCallbackData);if(!b)throw Error("unexpected payment response");e=g=JSON.stringify(b);g=new jb(b.purchaseData,b.purchaseDataSignature);var n=b.idToken;if(n){var u=(new db).decode(n);u=new hb(n,u)}else u=null;n=b;a=n.signedEntitlements?
a.entitlementsManager().parseEntitlements(n):null;return new ib(e,g,u,a,h,c,f,b.swgUserToken,k,l)};async function Db(a,b){const c=await a.rd;return a.Uc(c)?new x(a.g,a.m,a.cc(c,a.h.pageConfig()),b,!0):null}
class Eb{constructor(a,b){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.u=a.eventManager();this.D=a.clientConfigManager();this.l=null;let c;const d=null!=(c=null==b?void 0:b.isClosable)?c:!1,e=a.activities().addDefaultArguments({showNative:a.callbacks().hasSubscribeRequestCallback(),productType:"SUBSCRIPTION",list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:d});if(b&&b.oldSku){e.oldSku=b.oldSku;q(e.skus,"Need a sku list if old sku is provided!");let f=e.skus;
const g=e.oldSku;f=f.filter(h=>h!==g);q(0<f.length,"Sku list only contained offer user already has");e.skus=f}if(e.skus&&1===e.skus.length&&(a=e.skus[0],b=e.oldSku)){const f=new Ha;f.setSku(a);f.setOldSku(b);this.Ab(f);return}this.Fe=e.skus||["*"];this.rd=this.D.getClientConfig();this.hb=Db(this,e)}Ab(a){const b=a.getSku();if(b){const c={skuId:b};if(a=a.getOldSku())c.oldSku=a,this.h.analytics().setSku(a);this.u.logSwgEvent(1006,!0,new z([,,,,b]));(new J(this.h,c)).start()}}Va(a){a.getSubscriberOrMember()&&
(this.u.logSwgEvent(1009,!0),this.h.callbacks().triggerLoginRequest({linkRequested:!!a.getLinkRequested()}))}Ge(a){a.getNative()&&this.h.callbacks().triggerSubscribeRequest()}async start(){if(this.l=await this.hb){this.h.callbacks().triggerFlowStarted("showOffers",{skus:this.Fe,source:"SwG"});this.l.onCancel(()=>{this.h.callbacks().triggerFlowCanceled("showOffers")});this.l.on(Ha,this.Ab.bind(this));this.l.on(ua,this.Va.bind(this));this.l.on(Ra,this.Ge.bind(this));var a=await this.rd;return this.o.openView(this.l,
!1,this.bc(a,this.D.shouldAllowScroll()))}}Uc(a){let b;return!1!==(null==(b=a.uiPredicates)?void 0:b.canDisplayAutoPrompt)}bc(a,b){return a.useUpdatedOfferFlows?{desktopConfig:{isCenterPositioned:!0,supportsWideScreen:!0},shouldDisableBodyScrolling:!b}:{}}cc(a,b){if(!a.useUpdatedOfferFlows){const e=D(this.g.location.hash)["swg.newoffercard"];return G("/offersiframe",e?{useNewOfferCard:e}:{})}const c={publicationId:b.getPublicationId()};this.D.shouldForceLangInIframes()&&(c.hl=this.D.getLanguage());
let d;if(null==(d=a.uiPredicates)?0:d.purchaseUnavailableRegion)c.purchaseUnavailableRegion="true";return G("/subscriptionoffersiframe",c)}showNoEntitlementFoundToast(){this.l&&this.l.execute(new Ca)}}
class Fb{constructor(a,b){this.h=a;this.v=b;this.m=a.activities();this.o=a.dialogManager();this.u=a.eventManager();this.l=new x(a.win(),this.m,G("/optionsiframe"),H({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:!0}),!1)}start(){this.h.callbacks().triggerFlowStarted("showSubscribeOption");this.l.onCancel(()=>{this.h.callbacks().triggerFlowCanceled("showSubscribeOption")});this.l.on(Ja,this.Jd.bind(this));
this.l.acceptResult().then(a=>{a=a.data;const b=new Ja;a.subscribe&&b.setSubscribe(!0);this.Jd(b)},a=>{this.o.completeView(this.l);throw a;});this.u.logSwgEvent(7);return this.o.openView(this.l)}Jd(a){a.getSubscribe()&&(a=this.v||{},void 0==a.isClosable&&(a.isClosable=!0),this.u.logSwgEvent(1008,!0),(new Eb(this.h,a)).start())}}
class Gb{constructor(a,b={}){this.h=a;this.v=b;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.u=a.eventManager();this.l=new x(this.g,this.m,G("/abbrvofferiframe"),H({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),showNative:a.callbacks().hasSubscribeRequestCallback(),list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:!0}),!1)}Va(a){a.getSubscriberOrMember()&&(this.u.logSwgEvent(1009,!0),this.h.callbacks().triggerLoginRequest({linkRequested:!!a.getLinkRequested()}))}start(){this.h.callbacks().triggerFlowStarted("showAbbrvOffer");
this.l.onCancel(()=>{this.h.callbacks().triggerFlowCanceled("showAbbrvOffer")});this.l.on(ua,this.Va.bind(this));this.l.acceptResult().then(a=>{a.data.viewOffers?(a=this.v||{},void 0==a.isClosable&&(a.isClosable=!0),this.u.logSwgEvent(1008,!0),(new Eb(this.h,a)).start()):a.data["native"]&&(this.h.callbacks().triggerSubscribeRequest(),this.o.completeView(this.l))});this.u.logSwgEvent(8);return this.o.openView(this.l)}};/*

 Copyright 2017 The Web Activities Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var Hb=class{constructor(a,b,c,d,e,f){this.code=a;this.data="ok"==a?b:null;this.mode=c;this.origin=d;this.originVerified=e;this.secureChannel=f;this.ok="ok"==a;this.error="failed"==a?Error(String(b)||""):null}};let Ib;function Jb(a){Ib||(Ib=document.createElement("a"));Ib.href=a;return Ib}
function Kb(a){if(a.origin)return a.origin;const b=a.protocol;let c=a.host;"https:"==b&&c.indexOf(":443")==c.length-4?c=c.replace(":443",""):"http:"==b&&c.indexOf(":80")==c.length-3&&(c=c.replace(":80",""));return b+"//"+c}function Lb(a){const b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function Mb(a){return a?(/^[?#]/.test(a)?a.slice(1):a).split("&").reduce((b,c)=>{var d=c.split("=");c=decodeURIComponent(d[0]||"");d=decodeURIComponent(d[1]||"");c&&(b[c]=d);return b},{}):{}}
function Nb(a,b){return a+(-1==a.indexOf("#")?"#":"&")+encodeURIComponent("__WA__")+"="+encodeURIComponent(b)}function Ob(a){const b={requestId:a.requestId,returnUrl:a.returnUrl,args:a.args};void 0!==a.origin&&(b.origin=a.origin);void 0!==a.originVerified&&(b.originVerified=a.originVerified);return JSON.stringify(b)}
function Pb(a,b,c){if(b.ok)c(b);else{var d;if(!(d=b.error)){d=null;if("function"==typeof a.DOMException){a=a.DOMException;try{d=new a("AbortError","AbortError")}catch(e){}}d||(d=Error("AbortError"),d.name="AbortError",d.code=20)}a=d;a.activityResult=b;c(Promise.reject(a))}}function Qb(a){const b=a.navigator;return/Trident|MSIE|IEMobile/i.test(b&&b.userAgent)}function Rb(a){a=a.navigator;return/Edge/i.test(a&&a.userAgent)}function Sb(a){setTimeout(()=>{throw a;})}
function Tb(a){a.ia&&!a.bd&&(a.bd="function"==typeof a.ad?a.ad():a.ad);return a.bd}function Ub(a,b){a.A&&K(a.A);a.A=b;a.A.onmessage=c=>{var d=c.data;const e=d&&d.cmd;d=d&&d.payload||null;e&&a.Ia(e,d,c)}}function Vb(a,b){a.da||(a.da={});var c=a.da[b];if(!c){let d;c=new Promise(e=>{d=e});c={port1:null,port2:null,resolver:d,promise:c};a.da[b]=c}return c}
class Wb{constructor(a,b,c){this.g=a;this.ad=b;this.R=c;this.Ce=!0;this.bd=null;this.ld=!1;this.da=this.vc=this.ia=this.A=null;this.qd=this.fc.bind(this)}connect(a){if(this.ia)throw Error("already connected");this.ia=a;this.g.addEventListener("message",this.qd)}disconnect(){if(this.ia&&(this.ia=null,this.A&&(K(this.A),this.A=null),this.g.removeEventListener("message",this.qd),this.da)){for(const a in this.da){const b=this.da[a];b.port1&&K(b.port1);b.port2&&K(b.port2)}this.da=null}}isConnected(){return null!=
this.R}getTarget(){const a=Tb(this);if(!a)throw Error("not connected");return a}getTargetOrigin(){if(null==this.R)throw Error("not connected");return this.R}sendConnectCommand(){const a=Qb(this.g)||Rb(this.g);this.sendCommand("connect",{acceptsChannel:a})}sendStartCommand(a){let b=null;this.ld&&"function"==typeof this.g.MessageChannel&&(b=new this.g.MessageChannel);b?(this.sendCommand("start",a,[b.port2]),Ub(this,b.port1)):this.sendCommand("start",a)}sendCommand(a,b,c){const d={sentinel:"__ACTIVITIES__",
cmd:a,payload:b||null};if(this.A)this.A.postMessage(d,c||void 0);else{const e=this.getTarget(),f="connect"==a?null!=this.R?this.R:"*":this.getTargetOrigin();e.postMessage(d,f,c||void 0)}}customMessage(a){this.sendCommand("msg",a)}onCustomMessage(a){this.vc=a}startChannel(a){a=a||"";const b=Vb(this,a);if(!b.port1){const c=new this.g.MessageChannel;b.port1=c.port1;b.port2=c.port2;b.resolver(b.port1)}b.port2&&(this.sendCommand("cnset",{name:a},[b.port2]),b.port2=null);return b.promise}askChannel(a){a=
a||"";const b=Vb(this,a);b.port1||this.sendCommand("cnget",{name:a});return b.promise}fc(a){if(!this.Ce||Tb(this)==a.source){var b=a.data;if(b&&"__ACTIVITIES__"==b.sentinel){var c=b.cmd;if(!this.A||"connect"==c||"start"==c){var d=a.origin;b=b.payload||null;null==this.R&&"start"==c&&(this.R=d);null==this.R&&a.source&&Tb(this)==a.source&&(this.R=d);d==this.R&&this.Ia(c,b,a)}}}}Ia(a,b,c){"connect"==a?(this.A&&(K(this.A),this.A=null),this.ld=b&&b.acceptsChannel||!1,this.ia(a,b)):"start"==a?((c=c.ports&&
c.ports[0])&&Ub(this,c),this.ia(a,b)):"msg"==a?null!=this.vc&&null!=b&&this.vc(b):"cnget"==a?this.startChannel(b.name):"cnset"==a?(a=c.ports[0],b=Vb(this,b.name),b.port1=a,b.resolver(a)):this.ia(a,b)}}function K(a){try{a.close()}catch(b){}}
var Xb=class{constructor(a,b,c){this.s=a;this.oa=b;this.V=c||null;this.g=this.s.ownerDocument.defaultView;this.R=Kb(Jb(b));this.Tb=!1;this.Ra=null;this.Sb=new Promise(d=>{this.Ra=d});this.wb=null;this.ab=new Promise(d=>{this.wb=d});this.S=null;this.zb=new Promise(d=>{this.S=d});this.yb=this.wc=null;this.B=new Wb(this.g,()=>this.s.contentWindow,this.R)}getMode(){return"iframe"}connect(){var a=this.s;if("isConnected"in a)a=a.isConnected;else{var b=a.ownerDocument&&a.ownerDocument.documentElement;a=
b&&b.contains(a)||!1}if(!a)throw Error("iframe must be in DOM");this.B.connect(this.Ia.bind(this));this.s.src=this.oa;return this.Sb}disconnect(){this.Tb=!1;this.B.disconnect()}acceptResult(){return this.zb}getTargetWin(){return this.s.contentWindow||null}message(a){this.B.customMessage(a)}onMessage(a){this.B.onCustomMessage(a)}messageChannel(a){return this.B.askChannel(a)}whenReady(){return this.ab}onResizeRequest(a){this.wc=a;Promise.resolve().then(()=>{null!=this.yb&&a(this.yb)})}resized(){this.Tb&&
this.B.sendCommand("resized",{height:this.s.offsetHeight})}Ia(a,b){"connect"==a?(this.Tb=!0,this.B.sendStartCommand(this.V),this.Ra()):"result"==a?this.S&&(a=b.code,b=new Hb(a,"failed"==a?Error(b.data||""):b.data,"iframe",this.B.getTargetOrigin(),!0,!0),Pb(this.g,b,this.S),this.S=null,this.B.sendCommand("close"),this.disconnect()):"ready"==a?this.wb&&(this.wb(),this.wb=null):"resize"==a&&(this.yb=b.height,this.wc&&this.wc(this.yb))}};
function Yb(a){const b=Zb(a);let c=a.oa;if(!a.v.skipRequestInUrl){const f=a.v.returnUrl||Lb(a.g.location.href),g=Ob({requestId:a.Be,returnUrl:f,args:a.V});c=Nb(c,g)}let d,e=a.Md;"_top"!=e&&Qb(a.g)&&(e="_top");try{d=a.g.open(c,e,b)}catch(f){}if(!d&&"_top"!=e&&!a.v.disableRedirectFallback){e="_top";try{d=a.g.open(c,e)}catch(f){}}d?(a.na=d,"_top"!=e&&$b(a)):ac(a,Error("failed to open window"));return a.zb.catch(()=>{})}
function Zb(a){var b=a.g.screen;const c=b.availWidth||b.width,d=b.availHeight||b.height,e=a.g==a.g.top,f=Rb(a.g),g=Math.max(c-(e&&a.g.outerWidth>a.g.innerWidth?Math.min(100,a.g.outerWidth-a.g.innerWidth):f?100:0),.5*c),h=Math.max(d-(e&&a.g.outerHeight>a.g.innerHeight?Math.min(100,a.g.outerHeight-a.g.innerHeight):f?100:0),.5*d);var k=Math.floor(Math.min(600,.9*g)),l=Math.floor(Math.min(600,.9*h));a.v.width&&(k=Math.min(a.v.width,g));a.v.height&&(l=Math.min(a.v.height,h));a=Math.floor((b.width-k)/2);
b=Math.floor((b.height-l)/2);k={height:l,width:k,resizable:"yes",scrollbars:"yes"};f||(k.left=a,k.top=b);l="";for(const n in k)l&&(l+=","),l+=`${n}=${k[n]}`;return l}function $b(a){a.ua=a.g.setInterval(()=>{bc(a,!0)},500);a.B=new Wb(a.g,a.na,null);a.B.connect(a.Ia.bind(a))}function ac(a,b){a.S&&a.S(Promise.reject(b));a.disconnect()}function bc(a,b){if(!a.na||a.na.closed)a.ua&&(a.g.clearInterval(a.ua),a.ua=null),a.g.setTimeout(()=>{try{cc(a,"canceled",null)}catch(c){ac(a,c)}},b?3E3:0)}
function cc(a,b,c){if(a.S){const d=a.B.isConnected();b=new Hb(b,c,"popup",d?a.B.getTargetOrigin():Kb(Jb(a.oa)),d,d);Pb(a.g,b,a.S);a.S=null}a.B&&a.B.sendCommand("close");a.disconnect()}
var dc=class{constructor(a,b,c,d,e,f){if(!d||"_blank"!=d&&"_top"!=d&&"_"==d[0])throw Error('The only allowed targets are "_blank", "_top" and name targets');this.g=a;this.Be=b;this.oa=c;this.Md=d;this.V=e||null;this.v=f||{};this.Ra=null;this.Sb=new Promise(g=>{this.Ra=g});this.S=null;this.zb=new Promise(g=>{this.S=g});this.B=this.ua=this.na=null}getMode(){return"_top"==this.Md?"redirect":"popup"}open(){return Yb(this)}whenConnected(){return this.Sb}disconnect(){this.ua&&(this.g.clearInterval(this.ua),
this.ua=null);this.B&&(this.B.disconnect(),this.B=null);if(this.na){try{this.na.close()}catch(a){}this.na=null}this.S=null}getTargetWin(){return this.na}acceptResult(){return this.zb}message(a){this.B.customMessage(a)}onMessage(a){this.B.onCustomMessage(a)}messageChannel(a){return this.B.askChannel(a)}Ia(a,b){"connect"==a?(this.B.sendStartCommand(this.V),this.Ra()):"result"==a?(a=b.code,cc(this,a,"failed"==a?Error(b.data||""):b.data)):"check"==a&&this.g.setTimeout(()=>bc(this),200)}};
class ec{constructor(a,b,c,d,e){this.g=a;this.$d=b;this.ee=c;this.R=d;this.Ie=e}getMode(){return"redirect"}acceptResult(){const a=new Hb(this.$d,this.ee,"redirect",this.R,this.Ie,!1);return new Promise(b=>{Pb(this.g,a,b)})}}function fc(a,b,c,d,e,f){const g=new dc(a.g,b,c,d,e,f);g.open().then(()=>{gc(a,b,g)});return g}function hc(a,b){Promise.resolve().then(()=>{b(a)})}function gc(a,b,c){const d=a.Mc[b];d&&d.forEach(e=>{hc(c,e)});a.P[b]=c}
var ic=class{constructor(a){this.version="1.24";this.g=a;this.Ad=a.location.hash;this.Mc={};this.P={};this.Sd=null;this.Ae=new Promise(b=>{this.Sd=b})}openIframe(a,b,c){const d=new Xb(a,b,c);return d.connect().then(()=>d)}open(a,b,c,d,e){return{targetWin:fc(this,a,b,c,d,e).getTargetWin()}}openWithMessaging(a,b,c,d,e){const f=fc(this,a,b,c,d,e);return f.whenConnected().then(()=>f)}onResult(a,b){let c=this.Mc[a];c||(c=[],this.Mc[a]=c);c.push(b);let d=this.P[a];if(!d&&this.Ad){try{var e=this.g,f=Mb(this.Ad).__WA_RES__;
if(f){var g=JSON.parse(f);if(g&&g.requestId==a){var h=e.location.hash;if(h){var k=encodeURIComponent("__WA_RES__")+"=";f=-1;do if(f=h.indexOf(k,f),-1!=f){const B=0<f?h.substring(f-1,f):"";if(""==B||"?"==B||"#"==B||"&"==B){let N=h.indexOf("&",f+1);-1==N&&(N=h.length);h=h.substring(0,f)+h.substring(N+1)}else f++}while(-1!=f&&f<h.length)}var l=h;l=l||"";if(l!=e.location.hash&&e.history&&e.history.replaceState)try{e.history.replaceState(e.history.state,"",l)}catch(B){}var n=g.code,u=g.data,t=g.origin,
A=e.document.referrer&&Kb(Jb(e.document.referrer));d=new ec(e,n,u,t,t==A)}else d=null}else d=null}catch(B){Sb(B),this.Sd(B)}d&&(this.P[a]=d)}(a=d)&&hc(a,b)}onRedirectError(a){this.Ae.then(a)}};class jc{constructor(a){this.A=a}acceptResult(){return this.A.acceptResult()}}
class kc{constructor(a,b,c,d){this.aa=new Xb(a,b,d);this.Ob={};this.h=c}whenReady(){return this.aa.whenReady()}async connect(){await this.aa.connect();this.aa.onMessage(a=>{if(a=a&&a.RESPONSE){var b=this.Ob[a[0]];if(b){a:{var c=a?a[0]:null;if(c&&(c=Sa[c])){a=new c(a);break a}throw Error("Deserialization failed for "+a);}b(a)}}});if(this.h&&this.h.eventManager())this.on(xa,a=>{this.h.eventManager().logEvent({eventType:a.getEvent(),eventOriginator:4,isFromUserAction:a.getMeta().getIsFromUserAction(),
additionalParameters:a.getParams()})})}disconnect(){this.aa.disconnect()}getMode(){return this.aa.getMode()}acceptResult(){return this.aa.acceptResult()}onResizeRequest(a){return this.aa.onResizeRequest(a)}execute(a){this.aa.message({REQUEST:a.toArray()})}on(a,b){let c=null;try{c=(new a).label()}catch(d){c=null}if(!c)throw Error("Invalid data type");if(this.Ob[c])throw Error("Invalid type or duplicate callback for ",c);this.Ob[c]=b}resized(){this.aa.resized()}}
async function lc(a,b,c,d){const e=new kc(b,c,a.h,d);await e.connect();return e}
class mc{constructor(a){this.h=a;this.m=new ic(a.win())}addDefaultArguments(a){var b=this.h;const c=b.pageConfig();b=b.analytics().getContext();return Object.assign({analyticsContext:b.toArray(),publicationId:c.getPublicationId(),productId:c.getProductId(),_client:"SwG 1.0.5",supportsEventManager:!0},a||{})}async openIframe(a,b,c,d=!1){d&&(c=this.addDefaultArguments(c));const e=await this.h.storage().get("USER_TOKEN",!0),f=(new URL(b)).searchParams;e&&!f.has("sut")&&(b=E(b,"sut",e));const g=this.h.pageConfig().getPublicationId();
g&&!f.has("publicationId")&&(b=E(b,"publicationId",g));return lc(this,a,b,c)}open(a,b,c,d,e,f=!1){f&&(d=this.addDefaultArguments(d));return this.m.open(a,b,c,d,e)}onResult(a,b){this.m.onResult(a,c=>{b(new jc(c))})}onRedirectError(a){this.m.onRedirectError(a)}getOriginalWebActivityPorts(){return this.m}};function L(a){return"[object Object]"===Object.prototype.toString.call(a)}function M(a,b){for(const c in a)if(a[c]===b)return!0;return!1}function O(a){return"function"===typeof a}function P(a){return"boolean"===typeof a};function nc(a,b){return"Event has an invalid "+a+"("+b+")"}
class oc{constructor(a){this.Ed=[];this.zd=[];this.kc=null;this.Bd=a}registerEventListener(a){if(!O(a))throw Error("Event manager listeners must be a function");this.Ed.push(a)}registerEventFilterer(a){if(!O(a))throw Error("Event manager filterers must be a function");this.zd.push(a)}logEvent(a,b){if(!L(a))throw Error("Event must be a valid object");if(!M(qa,a.eventType))throw Error(nc("eventType",a.eventType));if(!M(ra,a.eventOriginator))throw Error(nc("eventOriginator",a.eventOriginator));if(!L(a.additionalParameters)&&
null!=a.additionalParameters)throw Error(nc("additionalParameters",a.additionalParameters));if(null!=a.isFromUserAction&&!P(a.isFromUserAction))throw Error(nc("isFromUserAction",a.isFromUserAction));this.kc=this.fc(a,b)}async fc(a,b){await this.Bd;for(const c of this.zd)try{if(1===c(a))return}catch(d){m(d)}for(const c of this.Ed)try{c(a,b)}catch(d){m(d)}}logSwgEvent(a,b=!1,c=null){this.logEvent({eventType:a,eventOriginator:1,isFromUserAction:b,additionalParameters:c})}getReadyPromise(){return this.Bd}}
;let pc=null;
function Q(a){if(!pc){pc={};let f="replace-subscription,update-google-transaction-id,smartbox,pay-client-redirect,use-article-endpoint,disable-desktop-miniprompt,logging-audience-activity";try{const g=D(a.location.hash)["swg.experiments"];g&&(f+=","+g)}catch(g){na(g)}for(let g of f.split(","))if(g=g.trim())try{let h=void 0,k=void 0,l=void 0;var b=a,c=g,d=pc;let n=!1;const u=c.indexOf(":");-1==u?(l=c,k=100,n=!1):(l=c.substring(0,u).trim(),c=c.substring(u+1),"c"==c.substring(c.length-1)&&(n=!0,c=c.substring(0,
c.length-1)),k=parseInt(c,10));if(isNaN(k))throw Error("invalid fraction");if(99<k)h=!0;else if(1>k)h=!1;else if(b.sessionStorage){n=n&&20>=k;try{c="subscribe.google.com:e:"+l+":"+k+(n?"c":"");var e=b.sessionStorage.getItem(c);let t="e"==e?"e":"c"==e?"c":null;!t&&100*b.Math.random()<=k*(n?2:1)&&(t=(n?.5>=b.Math.random():1)?"e":"c",b.sessionStorage.setItem(c,t));h=!!t;"c"==t&&(l="c-"+l)}catch(t){h=!1,na(t)}}else h=!1;d[l]=h}catch(h){na(h)}}return pc}
function qc(a){a=Q(a);const b=[];for(const c in a)a[c]&&b.push(c);return b};function rc(){var a=Date.now().toString(16);let b=a.substring(a.length-8).toUpperCase()+"-",c=0;a=new Uint8Array(23);self.crypto.getRandomValues(a);for(var d=a.length-1;-1<d;d--)a[d]%=16;for(d=9;36>d;d++)switch(d){case 13:case 18:case 23:b+="-";break;case 14:b+="4";break;case 19:b+="0123456789ABCDEF"[a[c++]&3|8];break;default:b+="0123456789ABCDEF"[a[c++]]}return b}
async function sc(a){var b;const c=null==(b=self.crypto)?void 0:b.subtle;if(!c)return p("Swgjs only works on secure (HTTPS or localhost) pages."),Promise.reject("Swgjs only works on secure (HTTPS or localhost) pages.");var d=await c.digest("SHA-512",Ya(a));b=[];d=new DataView(d);for(let e=0;e<d.byteLength;e+=4){const f=d.getUint32(e).toString(16);b.push(("00000000"+f).slice(-8))}return b.join("")};function tc(a){return new y([Math.floor(a/1E3),a%1E3*1E6],!1)};const uc={opacity:"0",position:"absolute",top:"-10px",left:"-10px",height:"1px",width:"1px"};function vc(a){const b=new Da;b.setComplete(!1);b.setError(a);return b}
function wc(a){const b=a.G;var c=a.j.getWin();Q(c)["update-google-transaction-id"]?b.setTransactionId(rc()+".swg"):b.setTransactionId(rc());b.setReferringOrigin(C(a.j.getWin().document.referrer).origin);b.setClientVersion("SwG 1.0.5");b.setUrl(qb(a.j));const d=D(a.j.getWin().location.search),e=d.utm_campaign,f=d.utm_medium;a=d.utm_source;e&&b.setUtmCampaign(e);f&&b.setUtmMedium(f);a&&b.setUtmSource(a)}
async function xc(a,b){const c=await a.start(),d=new wa;d.setEventOriginator(b.eventOriginator);d.setIsFromUserAction(!!b.isFromUserAction);a.G.setClientTimestamp(a.ie());const e=new xa;e.setEvent(b.eventType);e.setContext(a.G);e.setMeta(d);b.additionalParameters instanceof z&&e.setParams(b.additionalParameters);c.execute(e)}
class yc{constructor(a,b){this.H=b;this.j=a.doc();this.h=a;this.m=a.activities();this.s=v(this.j.getWin().document,"iframe",{});r(this.s,uc);this.j.getBody().appendChild(this.getElement());this.yd=!1;this.G=new va;wc(this);this.kc=this.la=null;this.u=a.eventManager();this.u.registerEventListener(this.Ha.bind(this));this.Db=0;this.vb=this.ob=null;this.pc=!1;this.eb=null;this.ie=()=>tc(Date.now());this.Rd=!1;this.Hd=[]}setReadyForLogging(){this.Rd=!0;for(const a of this.Hd)this.Ha(a)}setTransactionId(a){const b=
this.G.getTransactionId();this.G.setTransactionId(a);if(null!=b&&b!=a){const c=new z;c.setOldTransactionId(b);this.u.logSwgEvent(3006,!0,c)}}getTransactionId(){return this.G.getTransactionId()}getSku(){return this.G.getSku()}setSku(a){this.G.setSku(a)}setUrl(a){this.G.setUrl(a)}addLabels(a){if(a&&0<a.length){const b=[].concat(this.G.getLabelList());for(const c of a)-1==b.indexOf(c)&&b.push(c);this.G.setLabelList(b)}}getElement(){return this.s}start(){this.la||(this.addLabels(qc(this.j.getWin())),
this.la=this.preparePort());return this.la}async preparePort(){let a;try{a=await this.m.openIframe(this.s,G("/serviceiframe"),null,!0)}catch(b){return this.pc=!0,this.Gb(vc("Could not connect ["+b+"]")),null}a.on(Da,this.Gb.bind(this));await a.whenReady();this.addLabels(qc(this.j.getWin()));return a}setReadyToPay(a){this.G.setReadyToPay(a)}close(){this.j.getBody().removeChild(this.getElement())}getContext(){return this.G}Ha(a){4E3!==a.eventType&&6!==a.eventOriginator&&(3!==a.eventOriginator&&5!==
a.eventOriginator||!0===this.h.config().enableSwgAnalytics)&&(this.Rd?(this.Db++,this.kc=xc(this,a)):this.Hd.push(a))}Gb(a){const b=a&&a.getComplete()||!1;a=a&&a.getError()||"Unknown logging Error";const c="AnalyticsService timed out waiting for a response"===a;b||m("Error when logging: "+a);this.Db--;c||(this.yd=!0);null!==this.ob&&(0===this.Db||this.pc||c)&&(null!==this.eb&&(clearTimeout(this.eb),this.eb=null),this.ob(b),this.ob=this.vb=null)}getLoggingPromise(){if(0===this.Db||this.pc)return Promise.resolve(!0);
if(null===this.vb){this.vb=new Promise(b=>{this.ob=b});const a=this.Gb.bind(this);this.eb=setTimeout(()=>{this.eb=null;a(vc("AnalyticsService timed out waiting for a response"))},this.yd?200:500)}return this.vb}};var zc={en:"Subscribe with Google",ar:"Google \u0627\u0634\u062a\u0631\u0643\u00a0\u0645\u0639",de:"Abonnieren mit Google","en-au":"Subscribe with Google","en-ca":"Subscribe with Google","en-gb":"Subscribe with Google","en-us":"Subscribe with Google",es:"Suscr\u00edbete con Google","es-419":"Suscr\u00edbete con Google","es-latam":"Suscr\u00edbete con Google","es-latn":"Suscr\u00edbete con Google",fr:"S'abonner avec Google","fr-ca":"S'abonner avec Google",hi:"Google \u0915\u0947 \u095b\u0930\u093f\u092f\u0947 \u0938\u0926\u0938\u094d\u092f\u0924\u093e",
id:"Berlangganan dengan Google",it:"Abbonati con Google",ja:"Google \u3067\u8cfc\u8aad",ko:"Google \uc744 \ud1b5\ud55c\uad6c\ub3c5",ms:"Langgan dengan Google",nl:"Abonneren via Google",no:"Abonner med Google",pl:"Subskrybuj z Google",pt:"Subscrever com o Google","pt-br":"Assine com o Google",ru:"\u041f\u043e\u0434\u043f\u0438c\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 Google",sv:"Prenumerera med Google",th:"\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e1f\u0e32\u0e19 Google",tr:"Google ile Abone Ol",uk:"\u041f\u0456\u0434\u043f\u0438\u0441\u0430\u0442\u0438\u0441\u044f \u0447\u0435\u0440\u0435\u0437 Google",
"zh-cn":"\u901a\u8fc7 Google \u8ba2\u9605","zh-hk":"\u900f\u904e Google \u8a02\u95b1","zh-tw":"\u900f\u904e Google \u8a02\u95b1"},Ac={en:"Contribute with Google",ar:"\u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0629 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 Google",de:"Mit Google beitragen","en-au":"Contribute with Google","en-ca":"Contribute with Google","en-gb":"Contribute with Google","en-us":"Contribute with Google",es:"\tContribuye con Google","es-419":"Contribuir con Google","es-latam":"Contribuir con Google",
"es-latn":"Contribuye con Google",fr:"Contribuer avec Google","fr-ca":"Contribuer avec Google",hi:"Google \u0916\u093e\u0924\u0947 \u0915\u0940 \u092e\u0926\u0926 \u0938\u0947 \u092f\u094b\u0917\u0926\u093e\u0928 \u0915\u0930\u0947\u0902",id:"Berkontribusi dengan Google",it:"Contribuisci con Google",ja:"Google \u3067\u5bc4\u4ed8",ko:"Google\uc744 \ud1b5\ud574 \ucc38\uc5ec\ud558\uae30",ms:"Sumbangkan dengan Google",nl:"Bijdragen met Google",no:"Bidra med Google",pl:"Wesprzyj publikacj\u0119 przez Google",
pt:"Contribuir utilizando o Google","pt-br":"Contribua usando o Google",ru:"\u0412\u043d\u0435\u0441\u0442\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 Google",sv:"Bidra med Google",th:"\u0e21\u0e35\u0e2a\u0e48\u0e27\u0e19\u0e23\u0e48\u0e27\u0e21\u0e1c\u0e48\u0e32\u0e19 Google",tr:"Google ile Katk\u0131da Bulun",uk:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0432\u043d\u0435\u0441\u043e\u043a \u0447\u0435\u0440\u0435\u0437 Google","zh-cn":"\u901a\u8fc7 Google \u6350\u8d60",
"zh-hk":"\u900f\u904e Google \u63d0\u4f9b\u5167\u5bb9","zh-tw":"\u900f\u904e Google \u6350\u6b3e"};const Bc={frameborder:"0",scrolling:"no"};
class Cc{constructor(a,b,c,d){this.h=a;this.g=a.win();this.j=this.g.document;this.m=a.activities();this.s=v(this.j,"iframe",Bc);this.Yd=b;this.v=c;this.W=d;this.cb=G("/smartboxiframe");const e={productId:this.h.pageConfig().getProductId(),publicationId:this.h.pageConfig().getPublicationId(),theme:this.v&&this.v.theme||"light",lang:this.v&&this.v.lang||"en"},f=this.v&&this.v.messageTextColor;f&&(e.messageTextColor=f);this.V=H(e)}me(a){a&&a.getIsClicked()&&this.W()}start(){r(this.s,{opacity:1,position:"absolute",
top:0,bottom:0,left:0,height:"100%",right:0,width:"100%"});this.Yd.appendChild(this.s);const a=this.m.addDefaultArguments(this.V);this.m.openIframe(this.s,this.cb,a).then(b=>{b.on(Ia,this.me.bind(this))});return this.s}};function Dc(a,b){const c=a.en;if("object"!==typeof a||!b)return c;let d="string"===typeof b?b:b.lang?b.lang:b.ownerDocument&&b.ownerDocument.documentElement.lang?b.ownerDocument.documentElement.lang:"en";d=d.toLowerCase();d=d.replace(/_/g,"-");const e=d.split("-");for(;e.length;){const f=e.join("-");if(f in a)return a[f];e.pop()}return c};function Ec(a,b,c,d,e){const f=Fc(d),g=("function"==typeof d?d:null)||e,h=k=>{Gc(a,c,!0);"function"===typeof g&&g(k)};b.addEventListener("click",h);return{options:f,clickFun:h}}async function Gc(a,b,c){(await a.Ga).eventManager().logSwgEvent(b,c)}function Fc(a){a=a&&"function"!=typeof a?a:{theme:"light"};const b=a.theme;"light"!==b&&"dark"!==b&&(a.theme="light");return a}
class Hc{constructor(a,b){this.j=a;this.Ga=b}init(){const a=this.j.getHead();a&&(a.querySelector('link[href="https://news.google.com/swg/js/v1/swg-button.css"]')||a.appendChild(v(this.j.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:"https://news.google.com/swg/js/v1/swg-button.css"})))}create(a,b){const c=v(this.j.getWin().document,"button",{});return this.attach(c,a,b)}attach(a,b,c){b=Ec(this,a,1007,b,c).options;a.classList.add(`swg-button-${b.theme}`);a.setAttribute("role","button");
b.lang&&a.setAttribute("lang",b.lang);a.setAttribute("title",Dc(zc,a)||"");Gc(this,6);return a}attachSubscribeButton(a,b,c){b=Ec(this,a,1017,b,c).options;c=b.theme;a.classList.add(`swg-button-v2-${c}`);a.setAttribute("role","button");b.lang&&a.setAttribute("lang",b.lang);b.enable||a.setAttribute("disabled","disabled");a.innerHTML='<div class="swg-button-v2-icon-$theme$"></div>$textContent$'.replace("$theme$",c).replace("$textContent$",Dc(zc,a)||"");Gc(this,16);return a}attachContributeButton(a,b,
c){b=Ec(this,a,1019,b,c).options;c=b.theme;a.classList.add(`swg-button-v2-${c}`);a.setAttribute("role","button");b.lang&&a.setAttribute("lang",b.lang);b.enable||a.setAttribute("disabled","disabled");a.innerHTML='<div class="swg-button-v2-icon-$theme$"></div>$textContent$'.replace("$theme$",c).replace("$textContent$",Dc(Ac,a)||"");Gc(this,19);return a}attachButtonsWithAttribute(a,b,c,d){for(const e of b){const f=this.j.getRootNode().querySelectorAll(`[${a}="${e}"]`);for(let g=0;g<f.length;g++)"subscription"===
e?this.attachSubscribeButton(f[g],c,d[e]):"contribution"===e&&this.attachContributeButton(f[g],c,d[e])}}attachSmartButton(a,b,c,d){c=Ec(this,b,1007,c,d);b.classList.add("swg-smart-button");return(new Cc(a,b,c.options,c.clickFun)).start()}};function R(a,b,c){a.C[b]&&p("[swg.js]: You have registered multiple callbacks for the same response.");a.C[b]=c;b in a.P&&Ic(a,b,c,a.P[b])}function S(a,b,c){a.P[b]=c;const d=a.C[b];d&&Ic(a,b,d,c);return!!d}async function Ic(a,b,c,d){await 0;c(d);b in a.P&&delete a.P[b]}
class Jc{constructor(){this.C={};this.P={};this.xe=null}setOnEntitlementsResponse(a){R(this,1,a)}triggerEntitlementsResponse(a){return S(this,1,a.then(b=>b.clone()))}hasEntitlementsResponsePending(){return!!this.P[1]}setOnLoginRequest(a){R(this,4,a)}triggerLoginRequest(a){return S(this,4,a)}setOnLinkProgress(a){R(this,5,a)}triggerLinkProgress(){return S(this,5,!0)}resetLinkProgress(){5 in this.P&&delete this.P[5]}setOnLinkComplete(a){R(this,6,a)}triggerLinkComplete(){return S(this,6,!0)}hasLinkCompletePending(){return!!this.P[6]}setOnPayConfirmOpened(a){R(this,
9,a)}triggerPayConfirmOpened(a){return S(this,9,a)}setOnSubscribeRequest(a){R(this,2,a)}triggerSubscribeRequest(){return S(this,2,!0)}hasSubscribeRequestCallback(){return!!this.C[2]}setOnOffersFlowRequest(a){R(this,10,a)}triggerOffersFlowRequest(){return S(this,10,!0)}hasOffersFlowRequestCallback(){return!!this.C[10]}setOnSubscribeResponse(a){p("[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'");R(this,3,a)}setOnContributionResponse(a){p("[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'");
R(this,3,a)}setOnPaymentResponse(a){R(this,3,a)}triggerPaymentResponse(a){this.xe=a.then(b=>{S(this,3,Promise.resolve(b.clone()))},b=>{if(!w(b))throw b;});return!!this.C[3]}hasPaymentResponsePending(){return!!this.P[3]}setOnFlowStarted(a){R(this,7,a)}triggerFlowStarted(a,b={}){return S(this,7,{flow:a,data:b})}setOnFlowCanceled(a){R(this,8,a)}triggerFlowCanceled(a,b={}){return S(this,8,{flow:a,data:b})}};class Kc{constructor(a,b){this.displayName=a;this.avatarUrl=b}};class Lc{constructor({displayDelaySeconds:a,dismissalBackOffSeconds:b,maxDismissalsPerWeek:c,maxDismissalsResultingHideSeconds:d,impressionBackOffSeconds:e,maxImpressions:f,maxImpressionsResultingHideSeconds:g}={}){this.clientDisplayTrigger=new Mc(a);this.explicitDismissalConfig=new Nc(b,c,d);this.impressionConfig=new Oc(e,f,g)}}class Mc{constructor(a){this.displayDelaySeconds=a}}
class Nc{constructor(a,b,c){this.backOffSeconds=a;this.maxDismissalsPerWeek=b;this.maxDismissalsResultingHideSeconds=c}}class Oc{constructor(a,b,c){this.backOffSeconds=a;this.maxImpressions=b;this.maxImpressionsResultingHideSeconds=c}};class Pc{constructor({attributionParams:a,autoPromptConfig:b,paySwgVersion:c,uiPredicates:d,usePrefixedHostPath:e,useUpdatedOfferFlows:f,skipAccountCreationScreen:g}={}){this.autoPromptConfig=b;this.paySwgVersion=c;this.usePrefixedHostPath=e||!1;this.useUpdatedOfferFlows=f||!1;this.skipAccountCreationScreen=g||!1;this.uiPredicates=d;this.attributionParams=a}}class Qc{constructor(a,b,c){this.canDisplayAutoPrompt=a;this.canDisplayButton=b;this.purchaseUnavailableRegion=c}};function Rc(a,b){const c=b.paySwgVersion,d=b.autoPromptConfig;let e=void 0;if(d){var f;let l,n,u,t,A,B;e=new Lc({displayDelaySeconds:null==(f=d.clientDisplayTrigger)?void 0:f.displayDelaySeconds,dismissalBackOffSeconds:null==(l=d.explicitDismissalConfig)?void 0:l.backOffSeconds,maxDismissalsPerWeek:null==(n=d.explicitDismissalConfig)?void 0:n.maxDismissalsPerWeek,maxDismissalsResultingHideSeconds:null==(u=d.explicitDismissalConfig)?void 0:u.maxDismissalsResultingHideSeconds,impressionBackOffSeconds:null==
(t=d.impressionConfig)?void 0:t.backOffSeconds,maxImpressions:null==(A=d.impressionConfig)?void 0:A.maxImpressions,maxImpressionsResultingHideSeconds:null==(B=d.impressionConfig)?void 0:B.maxImpressionsResultingHideSeconds})}const g=b.uiPredicates;f=void 0;g&&(f=new Qc(g.canDisplayAutoPrompt,g.canDisplayButton,g.purchaseUnavailableRegion));const h=b.attributionParams;let k;h&&(k=new Kc(h.displayName,h.avatarUrl));return new Pc({autoPromptConfig:e,paySwgVersion:c,usePrefixedHostPath:b.usePrefixedHostPath,
useUpdatedOfferFlows:b.useUpdatedOfferFlows,skipAccountCreationScreen:a.ea.skipAccountCreationScreen,uiPredicates:f,attributionParams:k})}
class Sc{constructor(a,b,c){this.h=a;this.ea={};this.N=b;this.H=c;this.J=null;this.fe=new Pc({skipAccountCreationScreen:this.ea.skipAccountCreationScreen,usePrefixedHostPath:!0})}fetchClientConfig(a){if(!this.N)throw Error("fetchClientConfig requires publicationId");this.J||(a=a||Promise.resolve(),this.J=a.then(()=>this.Ua()));return this.J}getClientConfig(){return this.J||Promise.resolve(this.fe)}async getAutoPromptConfig(){this.J||this.fetchClientConfig();let a;return null==(a=await this.J)?void 0:
a.autoPromptConfig}getLanguage(){return this.ea.lang||"en"}getTheme(){const a=self.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return this.ea.theme||a}shouldAllowScroll(){return!!this.ea.allowScroll}shouldForceLangInIframes(){return!!this.ea.forceLangInIframes&&!!this.ea.lang}async shouldEnableButton(){if(this.ea.disableButton)return Promise.resolve(!1);this.J||this.fetchClientConfig();const {uiPredicates:a}=await this.J;return null==a?void 0:a.canDisplayButton}async Ua(){const a=
await this.h.entitlementsManager().getArticle();if(a)return Rc(this,a.clientConfig);var b=ub("/publication/"+encodeURIComponent(this.N)+"/clientconfiguration");b=await this.H.fetchCredentialedJson(b);if(b.errorMessages&&0<b.errorMessages.length)for(const c of b.errorMessages)p("SwG ClientConfigManager: "+c);return Rc(this,b)}};async function Tc(a){var b;let c;const d=null!=(c=null==(b=a.v)?void 0:b.isClosable)?c:!0;b=await a.D.getClientConfig();if(!a.Uc(b))return null;let e,f;return new x(a.g,a.m,a.cc(b,a.h.pageConfig()),H({productId:a.h.pageConfig().getProductId(),publicationId:a.h.pageConfig().getPublicationId(),productType:"UI_CONTRIBUTION",list:(null==(e=a.v)?void 0:e.list)||"default",skus:(null==(f=a.v)?void 0:f.skus)||null,isClosable:d,supportsEventManager:!0}),!0)}
class Uc{constructor(a,b){this.h=a;this.v=b;this.g=a.win();this.D=a.clientConfigManager();this.m=a.activities();this.o=a.dialogManager();this.hb=Tc(this)}Va(a){a.getSubscriberOrMember()&&this.h.callbacks().triggerLoginRequest({linkRequested:!!a.getLinkRequested()})}Ab(a){const b=a.getSku(),c=a.getOneTime();if(b){const d={skuId:b};c&&(d.oneTime=c);(new J(this.h,d,"UI_CONTRIBUTION")).start()}}async start(){const a=await this.hb;if(!a)return Promise.resolve();this.h.callbacks().triggerFlowStarted("showContributionOptions");
a.onCancel(()=>{this.h.callbacks().triggerFlowCanceled("showContributionOptions")});a.on(ua,this.Va.bind(this));a.on(Ha,this.Ab.bind(this));const b=await this.D.getClientConfig();return this.o.openView(a,!1,this.bc(b,this.D.shouldAllowScroll()))}bc(a,b){return a.useUpdatedOfferFlows&&!b?{shouldDisableBodyScrolling:!0}:{}}Uc(a){let b;return!1!==(null==(b=a.uiPredicates)?void 0:b.canDisplayAutoPrompt)}cc(a,b){return a.useUpdatedOfferFlows?this.D.shouldForceLangInIframes()?G("/contributionoffersiframe",
{hl:this.D.getLanguage(),publicationId:b.getPublicationId()}):G("/contributionoffersiframe",{publicationId:b.getPublicationId()}):G("/contributionsiframe")}async showNoEntitlementFoundToast(){(await this.hb).execute(new Ca)}};function Vc(a,b){a.h.entitlementsManager().blockNextNotification();const c=b.entitlements;var d=b.idToken;const e=b.productType,f=a.h.entitlementsManager().parseEntitlements({signedEntitlements:c});d=new hb(d,(new db).decode(d));b=b.purchaseDataList?b.purchaseDataList.map(l=>new jb(l.data,l.signature)):[new jb(b.purchaseData.data,b.purchaseData.signature)];const g=new Bb(a.h);var h=g.complete.bind(g);h=new kb(f,d,b,h);a.h.eventManager().logSwgEvent(1010,!0);const k=Promise.resolve.bind(Promise);g.start(new ib("",
b[0],d,f,e,k));return h}
class Wc{constructor(a,b){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.ka=this.l=null;this.v=Object.assign({entitlements:null,consent:!0},b||{})}async start(){const a=this.v.entitlements;if(!a||!a.getEntitlementForSource("google"))throw Error('No entitlements with "google" source');this.h.callbacks().triggerFlowStarted("completeDeferredAccountCreation");this.l=new x(this.g,this.m,G("/recoveriframe"),H({publicationId:this.h.pageConfig().getPublicationId(),productId:this.h.pageConfig().getProductId(),
entitlements:(null==a?void 0:a.raw)||null,consent:this.v.consent}),!0);this.ka=this.o.openView(this.l);try{const b=await this.l.acceptResult();return Vc(this,b.data)}catch(b){throw w(b)?this.h.callbacks().triggerFlowCanceled("completeDeferredAccountCreation"):this.o.completeView(this.l),b;}}};const Xc={frameborder:0,scrolling:"no",src:"about:blank"};
class Yc{constructor(a,b={}){const c=Object.assign({},Xc,b);this.s=v(a,"iframe",c);r(this.s,fa);this.xb=new Promise(d=>{this.s.onload=d})}whenReady(){return this.xb}getElement(){return this.s}getDocument(){const a=this.getElement().contentDocument||this.getElement().contentWindow&&this.getElement().contentWindow.document;if(!a)throw Error("not loaded");return a}getBody(){return this.getDocument().body}isConnected(){return this.getElement().isConnected}};async function T(a,b,c){const d=a.ownerDocument.defaultView,e=a.style.transition||"";await new Promise(f=>{d.setTimeout(()=>{d.setTimeout(f,c);const g=`${c}ms ${"ease-out"}`;r(a,Object.assign({transition:`transform ${g}, opacity ${g}`},b))})});r(a,{transition:e})};class Zc{constructor(a,b){this.j=a;this.$=this.j.getWin().document.createElement("swg-popup-background");r(this.$,{"z-index":b,display:"none","pointer-events":"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"})}getElement(){return this.$}isAttached(){return!!this.$.parentNode}attach(){this.j.getBody().appendChild(this.$)}destroy(){this.j.getBody().removeChild(this.$)}show(a=!0){r(this.$,{display:"block",opacity:a?0:1});if(a)return T(this.$,{opacity:1},
300)}async hide(a=!0){a&&await T(this.$,{opacity:0},300);r(this.$,{display:"none"})}};class $c{constructor(a,b={}){this.j=a;this.Ja=v(this.j,"swg-loading-container",{});if(b.additionalClasses)for(const c of b.additionalClasses)this.Ja.classList.add(c);this.Gd=v(this.j,"swg-loading",{});this.Ja.appendChild(this.Gd);this.Ja.style.setProperty("display","none","important");b=this.Gd;a=v(this.j,"swg-loading-animate",{});b.appendChild(a);b=v(this.j,"swg-loading-image",{});a.appendChild(b)}getElement(){return this.Ja}show(){this.Ja.style.removeProperty("display")}hide(){this.Ja.style.setProperty("display",
"none","important")}};const ad=String.raw,bd=ad`
  body {
    padding: 0;
    margin: 0;
  }

  swg-container,
  swg-loading,
  swg-loading-animate,
  swg-loading-image {
    display: block;
  }

  swg-loading-container {
    width: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 148px !important;
    height: 100% !important;
    bottom: 0 !important;
    margin-top: 5px !important;
    z-index: 2147483647 !important;
  }

  /**
  * Since the desktop view has the parent iframe (.swg-dialog) transparent,
  * this style adds the background with borders to the loading indicator.
  */
  @media (min-width: 630px), (min-height: 630px) {
    swg-loading-container {
      width: 560px !important;
      margin-left: auto !important;
      margin-right: auto !important;
      border-top-left-radius: 8px !important;
      border-top-right-radius: 8px !important;
      background-color: rgba(255, 255, 255, 1) !important;
      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,
        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;
    }

    swg-loading-container.centered-on-desktop {
      height: 120px !important;
      min-height: 120px !important;
      border-radius: 8px !important;
    }
  }

  swg-loading {
    z-index: 2147483647 !important;
    width: 36px;
    height: 36px;
    overflow: hidden;
    animation: mspin-rotate 1568.63ms infinite linear;
  }

  swg-loading-animate {
    animation: mspin-revrot 5332ms infinite steps(4);
  }

  swg-loading-image {
    background-image: url('${"https://news.google.com/swg/js/v1"}/loader.svg');
    background-size: 100%;
    width: 11664px;
    height: 36px;
    animation: swg-loading-film 5332ms infinite steps(324);
  }

  @keyframes swg-loading-film {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-11664px);
    }
  }

  @keyframes mspin-rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes mspin-revrot {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(-360deg);
    }
  }
`,cd=ad`
  /** Common styles across all window sizes. */
  .swg-dialog,
  .swg-toast {
    box-sizing: border-box;
    background-color: rgba(255, 255, 255, 1) !important;
  }

  .swg-toast {
    position: fixed !important;
    bottom: 0 !important;
    max-height: 46px !important;
    z-index: 2147483647 !important;
    border: none !important;
  }

  /**
  * Wide desktop screen support, when width is >= 871px and height is >= 641px.
  */
  @media (min-width: 871px) and (min-height: 641px) {
    .swg-dialog.swg-wide-dialog {
      width: 870px !important;
      left: -435px !important;
    }
  }

  /** Tablet/Medium screen support, when width OR height is <= 640px. */
  @media (max-width: 640px), (max-height: 640px) {
    .swg-dialog,
    .swg-toast {
      width: 480px !important;
      left: -240px !important;
      margin-left: calc(100vw - 100vw / 2) !important;
      border-top-left-radius: 8px !important;
      border-top-right-radius: 8px !important;
      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,
        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;
    }
  }

  /** Desktop/Large screen support, when width AND height are >= 641px. */
  @media (min-width: 641px) and (min-height: 641px) {
    .swg-dialog {
      width: 630px !important;
      left: -315px !important;
      margin-left: calc(100vw - 100vw / 2) !important;
      background-color: transparent !important;
      border: none !important;
    }

    .swg-toast {
      border-radius: 4px !important;
      bottom: 8px !important;
      box-shadow: 0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%),
        0 1px 5px 0 rgb(0 0 0 / 12%) !important;
      left: 8px !important;
    }
  }

  /** Phone/Small screen support, when width is <= 480px. */
  @media (max-width: 480px) {
    .swg-dialog,
    .swg-toast {
      width: 100% !important;
      left: 0 !important;
      right: 0 !important;
      margin-left: 0 !important;
    }
  }

  /**
  * Class applied to content page to disable scrolling.
  */
  html > body.swg-disable-scroll {
    height: 100vh !important;
    overflow: hidden !important;
    position: fixed;
    width: 100% !important;
  }

  html > body.swg-disable-scroll * {
    overflow: hidden !important;
  }
`;function dd(a){const b=a.readyState;return"loading"!=b&&"uninitialized"!=b}function ed(a,b){if(dd(a))b(a);else{var c=!1,d=()=>{dd(a)&&!c&&(b(a),c=!0,a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function fd(a){return new Promise(b=>{ed(a,b)})};class gd{constructor(a){const b=!!a.document;this.g=b?a:a.defaultView;this.j=b?a.document:a}getWin(){return this.g}getRootNode(){return this.j}getRootElement(){return this.j.documentElement}getHead(){return this.j.head}getBody(){return this.j.body}isReady(){return dd(this.j)}whenReady(){return fd(this.j)}addToFixedLayer(){return Promise.resolve()}}function hd(a){return 9===a.nodeType||a.document?new gd(a):a};const id={"min-height":"50px",border:"none",display:"block",position:"fixed","z-index":2147483647,"box-sizing":"border-box"},jd={position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:0,height:0,"max-height":"100%","max-width":"100%","min-height":"100%","min-width":"100%",width:0};
function kd(a){a.qa(async()=>{r(a.getElement(),{transform:"translateY(100%)",opactiy:1,visibility:"visible"});await T(a.getElement(),{transform:U(a),opacity:1,visibility:"visible"},300);a.getElement().focus()});a.nb=!1}
function ld(a){const b=a.s.getBody(),c=a.s.getDocument();la(hd(c),bd);const d=[];a.isPositionCenterOnDesktop()&&d.push("centered-on-desktop");a.Xa=new $c(c,{additionalClasses:d});b.appendChild(a.Xa.getElement());a.lb=v(c,"swg-container",{});b.appendChild(a.lb);md(a);a.Cc&&(a.mb=()=>{md(a)},a.Vb.addListener(a.mb))}function md(a){var b=a.getElement();a=V(a)?{top:"50%",bottom:0,transform:U(a)}:{top:"auto",bottom:0,transform:U(a)};r(b,a)}function V(a){return a.Cc&&a.Vb.matches}
function nd(a){a.j.getRootElement().style.removeProperty("padding-bottom")}function U(a){return V(a)?"translateY(-50%)":"translateY(0px)"}function od(a,b){if(V(a))nd(a);else{var c=b+20,d=a.j.getRootElement();r(d,{"padding-bottom":`${c}px`})}}
class pd{constructor(a,b={}){this.j=a;const c=b.desktopConfig||{},d=`swg-dialog ${c.supportsWideScreen?"swg-wide-dialog":""}`,e=b.iframeCssClassOverride||d;this.s=new Yc(a.getWin().document,{"class":e});this.ha=new Zc(a,2147483646);const f=Object.assign({},id,{});r(this.s.getElement(),f);ja(this.s.getElement(),{});this.ra=this.Na=this.lb=this.Xa=null;this.od=0;this.nb=!1;this.ub=null;this.Id=void 0!==b.maxAllowedHeightRatio?b.maxAllowedHeightRatio:.9;this.Cc=!!c.isCenterPositioned;this.De=!!b.shouldDisableBodyScrolling;
this.Vb=this.j.getWin().matchMedia("(min-width: 641px)");this.mb=null}async open(a=!1){const b=this.s;if(b.isConnected())throw Error("already opened");this.j.getBody().appendChild(b.getElement());this.ha.attach();a?(r(b.getElement(),{visibility:"hidden",opacity:0}),this.nb=a):kd(this);await b.whenReady();ld(this);return this}async openInContainer(a){const b=this.s;if(b.isConnected())throw Error("already opened");a.appendChild(b.getElement());await b.whenReady();ld(this);return this}async close(a=
!0){let b;if(a){const d=V(this)?{opacity:0}:{transform:"translateY(100%)"};b=this.qa(()=>{this.ha.hide(!0);return T(this.getElement(),d,300)})}else b=Promise.resolve();this.j.getBody().classList.remove("swg-disable-scroll");await b;const c=this.s.getElement();c.parentNode.removeChild(c);nd(this);this.ha.destroy();this.mb&&this.Vb.removeListener(this.mb)}getContainer(){if(!this.lb)throw Error("not opened yet");return this.lb}getIframe(){return this.s}getElement(){return this.s.getElement()}getLoadingView(){return this.Xa}getMaxAllowedHeightRatio(){return this.Id}isPositionCenterOnDesktop(){return this.Cc}getCurrentView(){return this.Na}async openView(a){r(a.getElement(),
jd);this.Na&&this.Na.hasLoadingIndicator()?this.ub=this.Na:(this.getContainer().textContent="",this.Xa.show());this.Na=a;this.getContainer().appendChild(a.getElement());this.De&&this.j.getBody().classList.add("swg-disable-scroll");a.shouldFadeBody()&&!this.nb&&this.ha.show(!0);await a.init(this);r(a.getElement(),{opacity:1});this.nb&&(a.shouldFadeBody()&&this.ha.show(!0),kd(this));this.ub?(a=this.ub.getElement(),a.parentElement&&a.parentElement.removeChild(a),this.ub=null):this.Xa.hide()}async resizeView(a,
b,c=!0){if(this.Na!=a)return null;const d=Math.min(b,this.j.getWin().innerHeight*this.Id),e=++this.od,f=()=>e!==this.od;if(c){const g=this.getElement().offsetHeight;c=d>=g?this.qa(()=>{if(f())return Promise.resolve();const h={height:`${d}px`};V(this)||(h.transform=`translateY(${d-g}px)`);r(this.getElement(),h);requestAnimationFrame(()=>{T(this.getElement(),{transform:U(this)},300)});return Promise.resolve()}):this.qa(async()=>{await (f()?Promise.resolve():T(this.getElement(),{transform:V(this)?U(this):
`translateY(${g-d}px)`},300));f()||r(this.getElement(),{height:`${d}px`,transform:U(this)})})}else r(this.getElement(),{height:`${d}px`}),c=Promise.resolve();await c;f()||(od(this,b),a.resized())}async qa(a){await this.ra;try{await a()}catch(b){}this.ra=null}};class qd{constructor(a){this.j=a;this.ka=this.fa=null;this.xa=new Zc(a,2147483647);this.sb=null;this.xa.getElement().addEventListener("click",()=>{if(this.sb)try{this.sb.focus()}catch(b){}})}openDialog(a=!1,b={}){this.ka||(this.fa=new pd(this.j,b),this.ka=this.fa.open(a));return this.ka}async openView(a,b=!1,c={}){this.handleCancellations(a);return(await this.openDialog(b,c)).openView(a)}handleCancellations(a){return a.whenComplete().catch(b=>{w(b)&&this.completeView(a);throw b;})}completeView(a){setTimeout(()=>
{this.fa&&this.fa.getCurrentView()==a&&this.Ea()},100)}completeAll(){this.fa&&this.Ea();this.xa.isAttached()&&this.xa.destroy()}getDialog(){return this.fa}Ea(){this.fa.close();this.ka=this.fa=null}popupOpened(a){this.sb=a||null;this.xa.isAttached()||this.xa.attach();this.xa.show()}popupClosed(){this.sb=null;try{this.xa.hide()}catch(a){}}};const rd={[1]:"/metertoastiframe",[2]:"/meteriframe"};function sd(a){const b=a.g.matchMedia("(max-width: 640px), (max-height: 640px)"),c=a.o.getDialog().getElement();b.matches&&r(c,{"box-shadow":"rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px"});b.addListener(d=>{d.matches?r(c,{"box-shadow":"rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px"}):r(c,{"box-shadow":""})})}
function td(a){a.g.matchMedia("(min-width: 640px) and (min-height: 640px)").matches&&(a=a.o.getDialog().getLoadingView().getElement(),r(a,{width:"420px",margin:"auto"}))}function ud(a){return!!a.g.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)}
class vd{constructor(a,{meterClientType:b=1,meterClientUserAttribute:c="anonymous_user"}={}){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.Kd=b;this.se=c;this.Za=null;this.Ya=!1;this.Qc=null}async start(){const a={isClosable:!0,hasSubscriptionCallback:this.h.callbacks().hasSubscribeRequestCallback()};2===this.Kd&&(a.meterType="anonymous_user"===this.se?"UNKNOWN":"KNOWN");const b=this.m.addDefaultArguments(a);var c;const d=rd[null!=(c=this.Kd)?c:1],e={origin:C(this.g.location.href).origin};
this.h.clientConfigManager().shouldForceLangInIframes()&&(e.hl=this.h.clientConfigManager().getLanguage());this.l=new x(this.g,this.m,G(d,e),b,!1);this.ya=()=>{const f=new Qa;f.setClose(!0);this.l.execute(f);this.removeCloseEventListener();this.h.eventManager().logSwgEvent(1027,!0);this.Za&&!this.Ya&&(this.Ya=!0,this.Za())};this.h.callbacks().triggerFlowStarted("showMeterToast");this.l.on(Ra,this.He.bind(this));this.h.callbacks().hasSubscribeRequestCallback()||this.h.callbacks().hasOffersFlowRequestCallback()||
p("[swg.js]: `setOnNativeSubscribeRequest` has not been set before starting the metering flow, so users will not be able to subscribe from the metering dialog directly. Please call `setOnNativeSubscribeRequest` with a subscription flow callback before starting metering.");this.o.handleCancellations(this.l).catch(f=>{this.Za&&!this.Ya&&(this.Ya=!0,this.Za());if(!w(f))throw console.error("[swg.js]: Error occurred during meter toast handling: "+f),f;});c=await this.o.openDialog();sd(this);td(this);await c.openView(this.l);
this.g.addEventListener("click",this.ya);this.g.addEventListener("touchstart",this.ya);this.g.addEventListener("mousedown",this.ya);if(ud(this))ia(this.g.document.body,"overflow","hidden");else{let f,g;this.Qc=()=>{f=f||this.g.pageYOffset;this.g.clearTimeout(g);g=this.g.setTimeout(()=>{100<Math.abs(this.g.pageYOffset-f)&&this.ya()},100)};this.g.addEventListener("scroll",this.Qc)}this.h.eventManager().logSwgEvent(21);this.h.eventManager().logSwgEvent(3011)}setOnConsumeCallback(a){this.Za=a}removeCloseEventListener(){this.g.removeEventListener("click",
this.ya);this.g.removeEventListener("touchstart",this.ya);this.g.removeEventListener("mousedown",this.ya);ud(this)?ia(this.g.document.body,"overflow","visible"):this.g.removeEventListener("scroll",this.Qc)}He(a){this.removeCloseEventListener();this.Ya=!0;a.getNative()?this.h.callbacks().triggerSubscribeRequest():this.h.callbacks().triggerOffersFlowRequest()}};const wd={height:0},xd={frameborder:"0",scrolling:"no","class":"swg-toast"};async function yd(a){await (await a.m.openIframe(a.s,a.cb,a.V)).whenReady();ka(a.s);a.ra=a.qa(()=>{r(a.s,{transform:"translateY(100%)",opacity:1,visibility:"visible"});return T(a.s,{transform:"translateY(0)",opacity:1,visibility:"visible"},400)});a.j.getWin().setTimeout(()=>{a.close()},8E3)}
class zd{constructor(a,b,c){this.j=a.doc();this.m=a.activities();this.cb=b;this.V=c||{};this.ra=null;this.s=v(this.j.getWin().document,"iframe",xd);r(this.s,wd);this.xb=new Promise(d=>{this.s.onload=d})}getElement(){return this.s}open(){this.j.getBody().appendChild(this.s);return yd(this)}async qa(a){await this.ra;try{await a()}catch(b){}}close(){return this.ra=this.qa(()=>{this.j.getWin().setTimeout(()=>{this.j.getBody().removeChild(this.s)},500);return T(this.s,{transform:"translateY(100%)",opacity:1,
visibility:"visible"},400)})}};const Ad={["paywall"]:1,["ad_shown"]:2,["offers_shown"]:3,["subscriptions_landing_page"]:1004,["offer_selected"]:1006,["payment_flow_start"]:1005,["payment_complete"]:1001,["custom"]:3E3},Bd={[0]:null,[1]:"paywall",[2]:"ad_shown",[3]:"offers_shown",[4]:null,[5]:null,[1E3]:null,[1001]:"payment_complete",[1002]:null,[1003]:null,[1004]:"subscriptions_landing_page",[1005]:"payment_flow_start",[1006]:"offer_selected",[2E3]:null,[3E3]:"custom"},Cd={["EVENT_SHOWCASE_METER_OFFERED"]:[3010,3011],["EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION"]:[3007],
["EVENT_SHOWCASE_UNLOCKED_BY_METER"]:[3010,3008],["EVENT_SHOWCASE_UNLOCKED_FREE_PAGE"]:[3012],["EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL"]:[3009,22,23],["EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL"]:[3009,1],["EVENT_SHOWCASE_INELIGIBLE_PAYWALL"]:[3013,3009]},Dd={[22]:2001,[3008]:1003,[3007]:1001,[3012]:1002,[1]:2002,[3013]:2003},Ed={[3]:{eventCategory:"NTG paywall",eventAction:"paywall modal impression",eventLabel:"",nonInteraction:!0},[26]:{eventCategory:"NTG membership",eventAction:"offer impressions",
eventLabel:"",nonInteraction:!0},[1006]:{eventCategory:"NTG paywall",eventAction:"click",eventLabel:"",nonInteraction:!1},[1030]:{eventCategory:"NTG subscription",eventAction:"marketing modal click",eventLabel:"",nonInteraction:!1},[24]:{eventCategory:"NTG subscription",eventAction:"marketing modal impression",eventLabel:"",nonInteraction:!0},[1031]:{eventCategory:"NTG membership",eventAction:"marketing modal click",eventLabel:"",nonInteraction:!1},[25]:{eventCategory:"NTG membership",eventAction:"membership modal impression",
eventLabel:"",nonInteraction:!0},[35]:{eventCategory:"NTG newsletter",eventAction:"newsletter modal impression",eventLabel:"",nonInteraction:!0},[3024]:{eventCategory:"NTG newsletter",eventAction:"newsletter signup",eventLabel:"success",nonInteraction:!1},[34]:{eventCategory:"NTG account",eventAction:"registration modal impression",eventLabel:"",nonInteraction:!0},[3023]:{eventCategory:"NTG account",eventAction:"registration",eventLabel:"success",nonInteraction:!1},[1070]:{eventCategory:"",eventAction:"survey submission",
eventLabel:"",nonInteraction:!1}},Fd={[1001]:{eventCategory:"NTG subscription",eventAction:"submit",eventLabel:"success",nonInteraction:!1}},Gd={[1001]:{eventCategory:"NTG membership",eventAction:"submit",eventLabel:"success",nonInteraction:!1}};function Hd(a,b=!1){a=D(a);if(!(a.gaa_at&&a.gaa_n&&a.gaa_sig&&a.gaa_ts)||!b&&"na"===a.gaa_at)return!1;const c=parseInt(a.gaa_ts,16),d=Date.now()/1E3;return c<d?!1:!0};async function Id(a,b){b=await Jd(a,b);var c=a.ib;a.ib=!1;const d=a.Nb;a.Nb=!1;c||(a.h.callbacks().triggerEntitlementsResponse(Promise.resolve(b)),a.he&&b.enablesThisWithGoogleMetering()&&b.consume(),(c=b.getEntitlementForThis())?d||Kd(a,c):a.h.eventManager().logSwgEvent(3009,!1));return b}
function Ld(a,b,c,d,e){try{const f=a.Dd.decode(b);if(c){const h=Date.now();if(1E3*parseFloat(f.exp)<h)return null}const g=f.entitlements;return g&&Md(a,b,g,d,e)||null}catch(f){a.g.setTimeout(()=>{throw f;})}return null}function Nd(a){return D(a.g.location.search).gaa_n}
async function Od(a,b,c,d,e="",f=null,g=null){const h=new Ba;h.setUsedEntitlement(b);h.setClientEventTime(tc(Date.now()));h.setEntitlementResult(c);h.setEntitlementSource(d);h.setToken(e);"boolean"===typeof f&&h.setIsUserRegistered(f);g&&h.setSubscriptionTimestamp(g);d="/publication/"+encodeURIComponent(a.N)+a.Da;d=Pd(a.g.location,d);if(!a.Ta){const l={metering:{resource:{hashedCanonicalUrl:await Qd(a)}}};a.Ta=$a(Ya(JSON.stringify(l)))}const k=await a.F.get("USER_TOKEN",!0);k&&(d=E(d,"sut",k));d=
E(d,a.xd,a.Ta);return a.H.sendPost(ub(d),h)}async function Qd(a){return sc(qb(a.h.doc()))}async function Jd(a,b){const c=await a.F.get("ents"),d=await a.F.get("isreadytopay"),e=!(!b||!b.encryption);if(c&&!e){a:{switch(d){case "true":var f=!0;break a;case "false":f=!1;break a}f=void 0}const h=Ld(a,c,!0,f);if(h&&h.enablesThis())return a.La=0,h}const g=await Rd(a,b);g&&g.enablesThisWithCacheableEntitlements()&&g.raw&&a.F.set("ents",g.raw);return g}
function Rd(a,b){let c=a.La;a.La=0;const d=async()=>{c--;const e=await a.Ua(b);return e.enablesThis()||0>=c?e:new Promise(f=>{a.g.setTimeout(()=>{f(d())},550)})};return d()}function Md(a,b,c,d,e){return new eb("subscribe.google.com",b,fb(c,a.Dd),a.M.getProductId(),a.Xd.bind(a),a.ce.bind(a),d,e)}
async function Kd(a,b){if("google:metering"===b.source)a.h.eventManager().logSwgEvent(3010,!1),Promise.resolve();else{var c=new z;c.setIsUserRegistered(!0);b.subscriptionTimestamp&&c.setSubscriptionTimestamp(b.subscriptionTimestamp);var d="privileged"===b.source?3014:3007;a.h.eventManager().logSwgEvent(d,!1,c);"1"!==await a.F.get("toast")&&(b=b.source||"google:metering",(new zd(a.h,G("/toastiframe"),H({publicationId:a.N,source:b}))).open())}}
class Sd{constructor(a,b,c,d,e,f){this.g=a;this.M=b;this.N=this.M.getPublicationId();this.H=c;this.h=d;this.Dd=new db;this.J=null;this.La=0;this.Nb=this.ib=!1;this.Ta=null;this.xd=e?"encodedEntitlementsParams":"encodedParams";this.Da=e?"/article":"/entitlements";this.F=d.storage();this.U=d.analytics();this.T=d.config();this.entitlementsPostPromise=null;this.Vd=e;this.he=f;this.pd=null;this.wd=!1;this.h.eventManager().registerEventListener(this.ye.bind(this))}reset(a){this.J=null;this.La=Math.max(this.La,
a?3:0);a&&(this.F.remove("ents"),this.F.remove("isreadytopay"))}clear(){this.J=null;this.La=0;this.unblockNextNotification();this.F.remove("ents");this.F.remove("toast");this.F.remove("isreadytopay")}async getEntitlements(a){"string"===typeof a&&(1600289016959<Date.now()&&p("[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef."),a={encryption:{encryptedDocumentKey:a}});this.J||(this.J=Id(this,a));a=await this.J;null!=
a.isReadyToPay&&this.U.setReadyToPay(a.isReadyToPay);return a}pushNextEntitlements(a,b){return(b=Ld(this,a,!0,b))&&b.enablesThis()?(this.F.set("ents",a),!0):!1}ye(a){if(Hd(this.g.location.search,!0)){var b=Dd[a.eventType];if(b){switch(a.eventOriginator){case 6:var c=3001;break;case 1:if(1003==b)return;c=1001;break;default:return}var d=Nd(this),e,f,g=null==a?void 0:null==(e=a.additionalParameters)?void 0:null==(f=e.getIsUserRegistered)?void 0:f.call(e),h,k;a=null==a?void 0:null==(h=a.additionalParameters)?
void 0:null==(k=h.getSubscriptionTimestamp)?void 0:k.call(h);this.entitlementsPostPromise=Od(this,new Aa,b,c,d,g,a)}}}async getArticle(){if(!this.Vd||!this.J)return null;await this.J;return this.pd}async getExperimentConfigFlags(){const a=await this.getArticle();return this.parseArticleExperimentConfigFlags(a)}parseArticleExperimentConfigFlags(a){const b=a.experimentConfig;if(null!=b){const c=b.experimentFlags;if(null!=c)return c}return[]}setToastShown(a){this.F.set("toast",a?"1":"0")}blockNextNotification(){this.ib=
!0}blockNextToast(){this.Nb=!0}unblockNextNotification(){this.ib=!1}enableMeteredByGoogle(){this.wd=!0}parseEntitlements(a){const b=a.isReadyToPay;null==b?this.F.remove("isreadytopay"):this.F.set("isreadytopay",String(b));const c=a.signedEntitlements,d=a.decryptedDocumentKey,e=a.swgUserToken;e&&e&&this.F.set("USER_TOKEN",e,!0);if(c){if(a=Ld(this,c,!1,b,d))return a}else{const f=a.entitlements;if(f)return Md(this,"",f,b,d)}return Md(this,"",[],b)}Xd(a){a.getEntitlementForThis()&&this.setToastShown(!0)}ce(a,
b){if(a.enablesThisWithGoogleMetering()){const c=a.getEntitlementForThis();a=()=>{b&&b();a:if(c&&"google:metering"===c.source){if(c.subscriptionTokenContents&&2===c.subscriptionTokenContents.metering.clientType)var d=2002;else if(Hd(this.g.location.search)){d=2001;var e=Nd(this)}else break a;this.h.eventManager().logSwgEvent(3008,!1);var f=new Aa;f.setSource(c.source);f.setJwt(c.subscriptionToken);this.entitlementsPostPromise=Od(this,f,1003,d,e)}};if(c.subscriptionTokenContents&&c.subscriptionTokenContents.metering&&
!0===c.subscriptionTokenContents.metering.showToast){const d=new vd(this.h,{meterClientType:c.subscriptionTokenContents.metering.clientType,meterClientUserAttribute:c.subscriptionTokenContents.metering.clientUserAttribute});d.setOnConsumeCallback(a);return d.start()}return a()}}async Ua(a){var b=await this.F.get("USER_TOKEN",!0);const c=await this.F.get("READ_TIME",!1);let d="/publication/"+encodeURIComponent(this.N)+this.Da;d=Pd(this.g.location,d);if(null==a?0:a.encryption)d=E(d,"crypt",a.encryption.encryptedDocumentKey);
b&&(d=E(d,"sut",b));this.T.publisherProvidedId?d=E(d,"ppid",this.T.publisherProvidedId):(null==a?0:a.publisherProvidedId)&&"string"===typeof a.publisherProvidedId&&0<a.publisherProvidedId.length&&(d=E(d,"ppid",a.publisherProvidedId));if(c){const k=parseInt(c,10);if(k){const l=Math.floor((Date.now()-k)/1E3);0<=l&&(d=E(d,"interaction_age",l.toString()))}}const e=await Qd(this);let f=this.wd?{metering:{clientTypes:[2],owner:this.N,resource:{hashedCanonicalUrl:e}}}:void 0,g;if(this.N&&(null==a?0:null==
(g=a.metering)?0:g.state)&&Hd(this.g.location.search)){const k=a.metering.state.id;if("string"===typeof k&&0<k.length){f={metering:{clientTypes:[1],owner:this.N,resource:{hashedCanonicalUrl:e},state:{id:k,attributes:[]},token:Nd(this)}};function l({attributes:n,category:u}){if(n){var t=Object.keys(n);for(const A of t){const B=`${u}_${A}`,N=Number(n[A].timestamp),Ie=N>Date.now()/1E3*2;N&&!Ie||p(`SwG Entitlements: Please specify a Unix timestamp, in seconds, for the "${A}" ${u} attribute. The timestamp you passed (${n[A].timestamp}) looks invalid.`);
f.metering.state.attributes.push({name:B,timestamp:N})}}}l({attributes:a.metering.state.standardAttributes,category:"standard"});l({attributes:a.metering.state.customAttributes,category:"custom"})}else p("SwG Entitlements: Please specify a metering state ID string, ideally a hash to avoid PII.")}f&&(this.Ta=$a(Ya(JSON.stringify(f))),d=E(d,this.xd,this.Ta));d=ub(d);this.h.eventManager().logSwgEvent(1024,!1);b=a=await this.H.fetchCredentialedJson(d);this.Vd&&(this.pd=a,b=a.entitlements);let h;if(0<
(null==(h=a.errorMessages)?void 0:h.length))for(const k of a.errorMessages)p("SwG Entitlements: "+k);return this.parseEntitlements(b)}}function Pd(a,b){const c=D(a.hash)["swg.deventitlement"];return void 0===c?b:E(b,"devEnt",c)};const Td=/^(\)\]\}'\n)/;
class Ud{constructor(a){this.g=a}async fetchCredentialedJson(a){const b=(await (await this.fetch(a,{method:"GET",headers:{Accept:"text/plain, application/json"},credentials:"include"})).text()).replace(Td,"");return JSON.parse(b)}async sendPost(a,b){b={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+JSON.stringify(b.toArray(!1))};a=await this.fetch(a,b);if(!a)return{};a=await a.text();try{const c=a.replace(Td,"");return JSON.parse(c)}catch(c){return na(c),
{}}}async fetch(a,b){try{return await this.g.fetch(a,b)}catch(c){throw a=C(a).origin,Error(`XHR Failed fetching (${a}/...): (Note: a CORS error above may indicate that this publisher or domain is not configured in Publisher Center. The CORS error happens because 4xx responses do not set CORS headers.)\n\n`+c);}}sendBeacon(a,b){b=new Blob(["f.req="+JSON.stringify(b.toArray(!1))],{type:"application/x-www-form-urlencoded;charset=UTF-8"});navigator.sendBeacon(a,b)}};class Vd{constructor(a){this.h=a;this.u=a.eventManager()}start(){this.u.registerEventListener(this.Ha.bind(this))}Ha(a,b){const c=O(this.h.win().ga),d=O(this.h.win().gtag);var e;var f=O(null==(e=this.h.win().dataLayer)?void 0:e.push);if(c||d||f){var {ga:g,gtag:h,dataLayer:k}=this.h.win();e="";a.additionalParameters&&(e=a.additionalParameters.subscriptionFlow||a.additionalParameters.getSubscriptionFlow());a=a.eventType;let n=null;e&&("subscribe"==e?n=Fd[a]:"contribute"==e&&(n=Gd[a]));if(e=n||Ed[a]){var l=
(null==b?void 0:b.googleAnalyticsParameters)||{};e={...e,eventCategory:l.event_category||e.eventCategory,eventLabel:l.event_label||e.eventLabel};c&&g("send","event",e);d&&h("event",e.eventAction,{event_category:e.eventCategory,event_label:e.eventLabel,non_interaction:e.nonInteraction,...l});f&&k.push({event:e.eventAction,event_category:e.eventCategory,event_label:e.eventLabel,non_interaction:e.nonInteraction,...l})}}}};class Wd{constructor(a){this.j=a}async error(...a){await 0;var b=null;var c="";for(const d of a)if(d instanceof Error&&!b)a:{a=d;if((b=Object.getOwnPropertyDescriptor(a,"message"))&&b.writable){b=a;break a}b=a.stack;const e=Error(a.message);for(const f in a)e[f]=a[f];e.stack=b;b=e}else c&&(c+=" "),c+=d;b?c&&(b.message=c+": "+b.message):b=Error(c);c=b;c.reported||(this.j.getWin().document.createElement("img").src="https://news.google.com/_/SubscribewithgoogleClientUi/jserror?error="+encodeURIComponent(String(c))+
"&script="+encodeURIComponent("https://news.google.com/swg/js/v1/swg.js")+"&line="+(c.lineNumber||1)+"&trace="+encodeURIComponent(c.stack),c.reported=!0)}};class Xd{constructor(a){this.h=a;this.m=a.activities();this.M=a.pageConfig();this.o=a.dialogManager()}start(a={}){this.h.callbacks().triggerFlowStarted("linkAccount");const b="redirect"==this.h.config().windowOpenMode;a=a.ampReaderId?H({publicationId:this.M.getPublicationId(),ampReaderId:a.ampReaderId}):H({publicationId:this.M.getPublicationId()});const c=this.m.open("swg-link",G("/linkbackstart"),b?"_top":"_blank",a,{});this.h.eventManager().logSwgEvent(12);this.o.popupOpened(c&&c.targetWin);return Promise.resolve()}}
function Yd(a){a.activities().onResult("swg-link",async function(b){a.entitlementsManager().blockNextNotification();a.callbacks().triggerLinkProgress();a.dialogManager().popupClosed();try{const c=await ba(b,C(F().frontEnd).origin,!1,!1);a.eventManager().logSwgEvent(1011,!0);a.eventManager().logSwgEvent(3029);(new Zd(a,c)).start()}catch(c){a.entitlementsManager().unblockNextNotification(),w(c)?(a.eventManager().logSwgEvent(1012,!0),a.callbacks().triggerFlowCanceled("linkAccount")):a.eventManager().logSwgEvent(1011,
!0)}})}async function $d(a){try{const b=await a.l.acceptResultAndVerify(C(F().frontEnd).origin,!0,!0);a.O(b,!!b.success)}catch(b){setTimeout(()=>{throw b;})}a.o.completeView(a.l)}
class Zd{constructor(a,b){this.h=a;this.g=a.win();this.D=a.clientConfigManager();this.m=a.activities();this.o=a.dialogManager();this.Z=a.entitlementsManager();this.C=a.callbacks();this.l=null;this.ba=b||{};this.sd=null;this.ae=new Promise(c=>{this.sd=c})}async start(){if(this.ba.saveAndRefresh)return this.O(this.ba,this.ba.linked),Promise.resolve();const a=await this.D.getClientConfig();this.l=new x(this.g,this.m,G("/linkconfirmiframe",{},a.usePrefixedHostPath,"u/"+(this.ba.index||"0")),H({productId:this.h.pageConfig().getProductId(),
publicationId:this.h.pageConfig().getPublicationId()}),!0);$d(this);this.h.eventManager().logSwgEvent(3005,!0);this.h.eventManager().logSwgEvent(14,!0);return this.o.openView(this.l)}O(a,b){this.h.eventManager().logSwgEvent(1013,!0);const c=a.swgUserToken;c&&this.h.storage().set("USER_TOKEN",c,!0);this.C.triggerLinkComplete();this.C.resetLinkProgress();this.Z.setToastShown(!0);this.Z.unblockNextNotification();this.Z.reset(b);a&&a.entitlements&&this.Z.pushNextEntitlements(a.entitlements);this.sd()}whenComplete(){return this.ae}}
async function ae(a,b){a.O();if(!b.linked)throw ma("not linked");a.o.popupClosed();a.h.callbacks().triggerFlowStarted("linkAccount");a.h.eventManager().logSwgEvent(3030);b=new Zd(a.h,b);await b.start();a.h.callbacks().triggerLinkProgress();await b.whenComplete();return!0}
async function be(a,b){if(b&&b.getRequested())try{const c=await a.W(),d=new Ea;if(null==c?0:c.token){if(c.authCode)throw Error("Both authCode and token are available");d.setToken(c.token)}else if(null==c?0:c.authCode)d.setAuthCode(c.authCode);else throw Error("Neither token or authCode is available");a.l.execute(d);return c}catch(c){throw a.O(),c;}}
class ce{constructor(a,b){this.g=a.win();this.h=a;this.m=a.activities();this.o=a.dialogManager();this.W=b;this.l=this.ka=this.Ud=null}getRequestPromise(){return this.Ud}O(){this.o.completeView(this.l)}async start(){const a=this.m.addDefaultArguments({isClosable:!0});this.l=new x(this.g,this.m,G("/linksaveiframe"),a,!1,!0);this.l.on(Fa,b=>{this.Ud=be(this,b)});this.ka=this.o.openView(this.l,!0);this.h.eventManager().logSwgEvent(13);try{const b=await this.l.acceptResultAndVerify(C(F().frontEnd).origin,
!0,!0);return await ae(this,b)}catch(b){this.O();if(w(b))return this.h.eventManager().logSwgEvent(1016,!0),this.h.callbacks().triggerFlowCanceled("linkAccount"),!1;throw b;}}};class de{constructor(a){this.u=a.eventManager()}sendSubscriptionState(a,b){if(!M(lb,a))throw Error("Invalid subscription state provided");if(("subscriber"==a||"past_subscriber"==a)&&!b)throw Error("Entitlements must be provided for users with active or expired subscriptions");if(b&&!L(b))throw Error("Entitlements must be an Object");let c=null;b&&(c=JSON.stringify(b));this.u.logEvent({eventType:4E3,eventOriginator:5,isFromUserAction:null,additionalParameters:{state:a,productsOrSkus:c}})}sendEvent(a){let b=
null;if(!M(mb,a.name)||!Ad[a.name])throw Error("Invalid user event provided("+a.name+")");if(a.data)if(L(a.data))b=Object.assign({},b,a.data);else throw Error("Event data must be an Object("+a.data+")");if(P(a.active))b||(b={}),Object.assign(b,{is_active:a.active});else if(null!=a.active)throw Error("Event active must be a boolean");this.u.logEvent({eventType:Ad[a.name],eventOriginator:5,isFromUserAction:a.active,additionalParameters:b})}};class ee{constructor(a){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.$a=null;this.l=new x(this.g,this.m,G("/loginiframe"),H({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),userConsent:!1}),!0)}async start(){this.h.callbacks().triggerFlowStarted("showLoginNotification");this.$a=this.o.openView(this.l);try{await this.l.acceptResult()}catch(a){throw this.o.completeView(this.l),a;}this.o.completeView(this.l)}};class fe{constructor(a){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.$a=null;this.l=new x(this.g,this.m,G("/loginiframe"),H({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),userConsent:!0}),!0)}async start(){this.h.callbacks().triggerFlowStarted("showLoginPrompt");this.$a=this.o.openView(this.l);try{await this.l.acceptResult()}catch(a){throw w(a)?this.h.callbacks().triggerFlowCanceled("showLoginPrompt"):this.o.completeView(this.l),
a;}this.o.completeView(this.l)}};class ge{constructor(a,b){this.T=a;this.H=b}getOffers(a=this.T.getProductId()){if(!a)throw Error("getOffers requires productId in config or arguments");return this.Ua(a)}async Ua(a){a=ub("/publication/"+encodeURIComponent(this.T.getPublicationId())+"/offers?label="+encodeURIComponent(a));return(await this.H.fetchCredentialedJson(a)).offers||[]}};class he{constructor(a,b){let c,d;const e=a.indexOf(":");-1!=e?(c=a,a=c.substring(0,e),d=c.substring(e+1)):d=c=null;this.N=a;this.Ma=c;this.Wa=d;this.pe=b}getPublicationId(){return this.N}getProductId(){return this.Ma}getLabel(){return this.Wa}isLocked(){return this.pe}};const ie="CreativeWork Article NewsArticle Blog Comment Course HowTo Message Review WebPage".split(" "),je=new RegExp(ie.join("|"));
class ke{constructor(a){this.j=hd(a);this.Fa=null;this.be=new Promise(b=>{this.Fa=b});this.re=new le(this.j);this.oe=new me(this.j);this.te=new ne(this.j)}resolveConfig(){Promise.resolve().then(this.check.bind(this));this.j.whenReady().then(this.check.bind(this));return this.be}check(){if(!this.Fa)return null;const a=this.re.check()||this.oe.check()||this.te.check();a?(this.Fa(a),this.Fa=null):this.j.isReady()&&(this.Fa(Promise.reject("No config could be discovered in the page")),this.Fa=null);ca(a);
return a}}class oe{constructor(){}checkValue(a,b){if(a){var c=this.checkArray;a=Array.isArray(a)?a:[a];c=c.call(this,a,b)}else c=!1;return c}checkString(a,b){return this.checkArray(a.split(/\s+/),b)}checkArray(a,b){for(const c of a){const d=c.replace(/^http:\/\/schema.org\//i,"");if(b.includes(d))return!0}return!1}}
class le{constructor(a){this.j=a}check(){if(!this.j.getBody())return null;const a=pe(this.j.getRootNode(),"subscriptions-product-id");if(!a)return null;var b=pe(this.j.getRootNode(),"subscriptions-accessible-for-free");b=!(!b||"false"!==b.toLowerCase());return new he(a,b)}}function qe(a,b){a=a[b];return null==a||""===a?null:Array.isArray(a)?a:[a]}function re(a,b){const c=qe(a,b);a=c&&c[0];return null==a||""===a?null:a}
class me{constructor(a){this.j=a;this.Pa=new oe}check(){if(!this.j.getBody())return null;const a=this.j.isReady(),b=this.j.getRootNode().querySelectorAll('script[type="application/ld+json"]');for(let d=0;d<b.length;d++){const e=b[d];var c;if(!(c=e["__SWG-SEEN__"]||!e.textContent)&&(c=!a)){a:{c=e;do if(c.nextSibling){c=!0;break a}while((c=c.parentNode)&&void 0!=c);c=!1}c=!c}if(c)continue;e["__SWG-SEEN__"]=!0;if(!je.test(e.textContent))continue;const f=this.dd(e);if(f)return f}return null}dd(a){let b=
ab(a.textContent);if(!b)return null;Array.isArray(b)||(b=[b]);let c=b;for(var d=0;d<c.length;d++){const e=c[d];e["@graph"]&&Array.isArray(e["@graph"])&&(c=c.concat(e["@graph"]));if(!this.Pa.checkValue(e["@type"],ie))continue;a=null;const f=qe(e,"isPartOf");if(f)for(let g=0;g<f.length&&!(a=this.Wb(f[g]));g++);if(a)return d=re(e,"isAccessibleForFree"),d="boolean"===typeof d?d:"string"===typeof d&&"false"===d.toLowerCase()?!1:!0,new he(a,!d)}return null}Wb(a){return this.Pa.checkValue(a["@type"],["Product"])?
re(a,"productID"):null}}function se(a,b,c){for(var d=b;d&&!d[c];d=d.parentNode)if(d[c]=!0,d.hasAttribute&&d.hasAttribute("itemscope")&&d.hasAttribute("itemtype"))return d=d.getAttribute("itemtype"),a.Pa.checkString(d,ie);return!1}
function te(a,b){const c=b.querySelectorAll("[itemprop='isAccessibleForFree']");for(b=0;c[b];b++){const d=c[b],e=d.getAttribute("content")||d.textContent;if(e&&se(a,d,"alreadySeenForAccessInfo")){let f=null;"true"==e.toLowerCase()?f=!0:"false"==e.toLowerCase()&&(f=!1);return f}}return null}function ue(a){let b=null;null!=a.gb?b=!a.gb:a.j.isReady()&&(b=!1);return null!=a.Ma&&null!=b?new he(a.Ma,b):null}
class ne{constructor(a){this.j=a;this.Ma=this.gb=null;this.Pa=new oe}Wb(a){a=a.querySelectorAll('[itemprop="productID"]');for(let c=0;a[c];c++){var b=a[c];const d=b.getAttribute("content")||b.textContent;b=b.closest("[itemtype][itemscope]");if(!(-1>=b.getAttribute("itemtype").indexOf("http://schema.org/Product"))&&se(this,b.parentElement,"alreadySeenForProductInfo"))return d}return null}dd(){var a=Array.prototype.slice.call(this.j.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter(b=>
this.Pa.checkString(b.getAttribute("itemtype"),ie));for(const b of a)if(null==this.gb&&(this.gb=te(this,b)),this.Ma||(this.Ma=this.Wb(b)),a=ue(this))return a;return null}check(){return this.j.getBody()?this.dd():null}}function pe(a,b){return(a=a.querySelector(`meta[name="${b}"]`))?a.getAttribute("content"):null};/*

 Copyright 2018 Google Inc. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var ve={LOCAL:"LOCAL",PREPROD:"PREPROD",PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX",TEST:"TEST",TIN:"TIN"},we={CARD:"CARD",TOKENIZED_CARD:"TOKENIZED_CARD",UPI:"UPI"},xe={CRYPTOGRAM_3DS:"CRYPTOGRAM_3DS",PAN_ONLY:"PAN_ONLY"},ye={ESTIMATED:"ESTIMATED",FINAL:"FINAL",NOT_CURRENTLY_KNOWN:"NOT_CURRENTLY_KNOWN"};class ze{constructor(){this.Ke=W.contentWindow}postMessage(a,b){this.Ke.postMessage(a,b)}};let W=null,Ae=null,Be=null,Ce=null,De=Date.now(),Ee=null,Fe=!1,Ge=[];
function He(){W||(Be=(window.gpayInitParams||{}).environment||"PRODUCTION",W=document.createElement("iframe"),W.src=`https://pay${"PREPROD"==Be?"-preprod.sandbox":"SANDBOX"==Be?".sandbox":""}.google.com/gp/p/ui/payframe?origin=${window.location.origin}&mid=%{merchantId}`,X({eventType:15,clientLatencyStartMs:Date.now()}),W.height="0",W.width="0",W.style.display="none",W.style.visibility="hidden",W.onload=function(){X({eventType:17,clientLatencyStartMs:Date.now()});Je()},document.body?(document.body.appendChild(W),
Ae=new ze):document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(W);Ae=new ze}))}function X(a){if(Fe){a=Object.assign({buyFlowActivityMode:Ee,googleTransactionId:Ce,originTimeMs:De},a);var b=Ae,c=b.postMessage;let d="https://pay";"SANDBOX"==Be?d+=".sandbox":"PREPROD"==Be&&(d+="-preprod.sandbox");c.call(b,a,d+".google.com")}else Ge.push(a)}function Je(){Fe=!0;Ge.forEach(function(a){X(a)});Ge.length=0}
function Ke(a,b){function c(e){e.data.isReadyToPayResponse&&(b(e),window.removeEventListener("message",c))}window.addEventListener("message",c);const d=Object.assign({eventType:6},a);X(d)};function Le(a,b,c,d){let e={};a&&(e=JSON.parse(JSON.stringify(a)));e.apiVersion||(e.apiVersion=1);e.swg&&(e.allowedPaymentMethods=["CARD"]);b&&"TEST"==b&&(e.environment=b);return new PaymentRequest([{supportedMethods:["https://google.com/pay"],data:e}],{total:{label:"Estimated Total Price",amount:{currency:c||"USD",value:d||"0"}}})}
function Me(a,b){b=Le(b,a.L,b.transactionInfo&&b.transactionInfo.currencyCode||void 0,b.transactionInfo&&b.transactionInfo.totalPrice||void 0);a.W(b.show().then(c=>{c.complete("success");return c.details}).catch(function(c){c.statusCode="CANCELED";throw c;}))}
class Ne{constructor(a){this.L=a;this.W=null}onResult(a){this.W=a}isReadyToPay(a){const b=Le(a);return new Promise(c=>{b.canMakePayment().then(d=>{window.sessionStorage.setItem("google.payments.api.storage.isreadytopay.result",d.toString());const e={result:d};2<=a.apiVersion&&a.existingPaymentMethodRequired&&(e.paymentMethodPresent=d);c(e)}).catch(function(){window.sessionStorage.getItem("google.payments.api.storage.isreadytopay.result")?c({result:"true"==window.sessionStorage.getItem("google.payments.api.storage.isreadytopay.result")}):
c({result:!1})})})}prefetchPaymentData(a){Le(a,this.L,a.transactionInfo.currencyCode,a.transactionInfo.totalPrice)}loadPaymentData(a){Me(this,a)}};class Oe{constructor(){var a=window.document;this.j=a;this.Y=a.createElement("gpay-graypane");Pe(this.Y,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"});this.tb=null;this.Y.addEventListener("click",()=>{if(this.tb)try{this.tb.focus()}catch(b){}})}show(a){this.tb=a||null;this.j.body.appendChild(this.Y);Pe(this.Y,{display:"block",opacity:0});return Qe(this.Y,{opacity:1})}hide(){this.tb=null;if(this.Y.parentElement)return Qe(this.Y,
{opacity:0}).then(()=>{Pe(this.Y,{display:"none"});this.j.body.removeChild(this.Y)})}}function Pe(a,b){for(const c in b)a.style.setProperty(c,b[c].toString(),"important")}function Qe(a,b){const c=a.ownerDocument.defaultView,d=a.style.transition||"";return(new Promise(e=>{c.setTimeout(()=>{c.setTimeout(e,300);Pe(a,Object.assign({transition:"transform 300ms ease-out, opacity 300ms ease-out"},b))})})).then(()=>{Pe(a,Object.assign({transition:d},b))})};function Re(){if(-1!=window.navigator.userAgent.indexOf("OPR/"))return!1;const a=window.navigator.userAgent.match(/Android/i),b=window.navigator.userAgent.match(/Chrome\/([0-9]+)\./i);return null!=a&&"PaymentRequest"in window&&"Google Inc."==window.navigator.vendor&&null!=b&&59<=Number(b[1])}function Se(a){if(2<=a.apiVersion){const b=Te(a);if(b&&1==b.length&&"CRYPTOGRAM_3DS"==b[0])return!0}return 1==a.allowedPaymentMethods.length&&"TOKENIZED_CARD"==a.allowedPaymentMethods[0]}
function Ue(a,b){return 2<=a.apiVersion&&(a=Te(a))&&a.includes(b)?!0:!1}function Ve(){return window.location.hostname.endsWith(".google.com")||void 0===window.isSecureContext?null:window.isSecureContext?null:"Google Pay APIs should be called in secure context!"}function We(a){if(a.environment&&!Object.values(ve).includes(a.environment))throw Error("Parameter environment in PaymentOptions can optionally be set to PRODUCTION, otherwise it defaults to TEST. "+a.environment);}
function Xe(a){if(!a)return"isReadyToPayRequest must be set!";if(2<=a.apiVersion){if(!("apiVersionMinor"in a))return"apiVersionMinor must be set!";if(!a.allowedPaymentMethods||!Array.isArray(a.allowedPaymentMethods)||0==a.allowedPaymentMethods.length)return"for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods";for(var b=0;b<a.allowedPaymentMethods.length;b++){let e=a.allowedPaymentMethods[b];if("CARD"==e.type){if(!e.parameters)return"Field parameters must be setup in each allowedPaymentMethod";
var c=e.parameters.allowedCardNetworks;if(!c||!Array.isArray(c)||0==c.length)return"allowedCardNetworks must be setup in parameters for type CARD";var d=e.parameters.allowedAuthMethods;if(!d||!Array.isArray(d)||0==d.length||!d.every(Ye))return"allowedAuthMethods must be setup in parameters for type 'CARD'  and must contain 'CRYPTOGRAM_3DS' and/or 'PAN_ONLY'"}}}else if(!a.allowedPaymentMethods||!Array.isArray(a.allowedPaymentMethods)||0==a.allowedPaymentMethods.length||!a.allowedPaymentMethods.every(Ze))return"allowedPaymentMethods must be set to an array containing 'CARD' and/or 'TOKENIZED_CARD'!";
return null}function Ze(a){return Object.values(we).includes(a)}function Ye(a){return Object.values(xe).includes(a)}
function $e(a){if(!a)return"paymentDataRequest must be set!";if(a.swg)return(a=a.swg)?a.skuId&&a.publicationId?null:"Both skuId and publicationId must be provided":"Swg parameters must be provided";if(a.transactionInfo)if(a.transactionInfo.currencyCode){if(!a.transactionInfo.totalPriceStatus||!Object.values(ye).includes(a.transactionInfo.totalPriceStatus))return"totalPriceStatus in transactionInfo must be set to one of NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!";if("NOT_CURRENTLY_KNOWN"!==a.transactionInfo.totalPriceStatus&&
!a.transactionInfo.totalPrice)return"totalPrice in transactionInfo must be set when totalPriceStatus is ESTIMATED or FINAL!"}else return"currencyCode in transactionInfo must be set!";else return"transactionInfo must be set!";var b=af(a);if(b){if(!b.parameters)return"parameters must be set in allowedPaymentMethod!";b=b.parameters;if(b.payeeVpa)if(b.payeeName)if(b.referenceUrl){if(!b.mcc)return"mcc in allowedPaymentMethod parameters must be set!";if(!b.transactionReferenceId)return"transactionReferenceId in allowedPaymentMethod parameters must be set!"}else return"referenceUrl in allowedPaymentMethod parameters must be set!";
else return"payeeName in allowedPaymentMethod parameters must be set!";else return"payeeVpa in allowedPaymentMethod parameters must be set!";if("INR"!==a.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set to INR!";if("FINAL"!==a.transactionInfo.totalPriceStatus)return"totalPriceStatus in transactionInfo must be set to FINAL!";if(!a.transactionInfo.transactionNote)return"transactionNote in transactionInfo must be set!"}return null}
function af(a){return!Re()||2>a.apiVersion||!a.allowedPaymentMethods?null:bf(a,"UPI")}function Te(a){return a.allowedPaymentMethods&&(a=bf(a,"CARD"))&&a.parameters?a.parameters.allowedAuthMethods:null}function bf(a,b){for(var c=0;c<a.allowedPaymentMethods.length;c++){const d=a.allowedPaymentMethods[c];if(d.type==b)return d}return null};function cf(a){return"LOCAL"==a.L?"":"https://"+("PREPROD"==a.L?"pay-preprod.sandbox":"SANDBOX"==a.L?"pay.sandbox":"pay")+".google.com"}
function df(a,b){return new Promise((c,d)=>{const e=ef(a),f=new XMLHttpRequest;f.open("POST",e,!0);"withCredentials"in f&&(f.withCredentials=!0);f.onreadystatechange=()=>{if(!(2>f.readyState))if(100>f.status||599<f.status)f.onreadystatechange=null,d(Error(`Unknown HTTP status ${f.status}`));else if(4==f.readyState)try{c(JSON.parse(f.responseText))}catch(g){d(g)}};f.onerror=()=>{d(Error("Network failure"))};f.onabort=()=>{d(Error("Request aborted"))};f.send(b)})}
function ef(a){let b=cf(a)+"/gp/p/apis/buyflow/process";a.Td&&(b+="?rk="+encodeURIComponent(a.Td));return b}function ff(a,b){a.style.setProperty("transition",b);a.style.setProperty("-webkit-transition",b)}function gf(a,b){ff(b,"all 250ms ease 0s");b.height="0px";setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},250)}
class hf{constructor(a,b,c){var d=Y;this.L=a;this.activities=b||new ic(window);this.ha=new Oe;this.Pe=this.W=null;this.Tc=!1;this.ge=this.A=null;this.Me=d;this.Td=c||null;this.bb=null}onResult(a){this.W||(this.W=a,this.activities.onResult("GPAY",this.ve.bind(this)))}ve(a){this.ha.hide();this.W(a.acceptResult().then(b=>{if(b.origin!=cf(this))throw Error("channel mismatch");const c=b.data;if(c.redirectEncryptedCallbackData)return Ee=3,df(this,c.redirectEncryptedCallbackData).then(d=>{const e=Object.assign({},
c);delete e.redirectEncryptedCallbackData;return Object.assign(e,d)});if(!b.originVerified||!b.secureChannel)throw Error("channel mismatch");return c},b=>{const c=b.message;let d=b.message;try{d=JSON.parse(c.substring(7))}catch(e){}d.statusCode&&-1==["DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR"].indexOf(d.statusCode)&&(d={statusCode:"CANCELED"});"AbortError"==d&&(d={statusCode:"CANCELED"});return Promise.reject(d)}))}isReadyToPay(a){return new Promise(b=>{if(Se(a))b({result:!1});else{var c=window.navigator.userAgent;
if(0<c.indexOf("GSA/")&&0<c.indexOf("Safari"))b({result:!1});else if(0<c.indexOf("FxiOS"))b({result:!1});else{var d=0<c.indexOf("Chrome")||0<c.indexOf("Firefox")||0<c.indexOf("Safari");d&&2<=a.apiVersion&&a.existingPaymentMethodRequired?(a.environment=this.L,Ke(a,e=>{const f={result:d};a.existingPaymentMethodRequired&&(f.paymentMethodPresent="READY_TO_PAY"==e.data.isReadyToPayResponse);b(f)})):b({result:d})}}})}prefetchPaymentData(){}loadPaymentData(a){a.swg||a.apiVersion||(a.apiVersion=1);a.environment=
this.L;Ee=a.forceRedirect?3:2;a=this.activities.open("GPAY","TIN"==this.L?"/ui/pay":cf(this)+"/gp/p/ui/pay",a.forceRedirect?"_top":"gp-js-popup",a,{width:600,height:600});this.ha.show(a&&a.targetWin)}getIframeUrl(a,b){let c=`https://pay.google.com/gp/p/ui/pay?origin=${b}`;if("SANDBOX"==a||"PREPROD"==a)c=`https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=${b}`;return c}Ne(){var a=document.createElement("div");a.classList.add("google-payments-dialogContainer");
var b=document.createElement("div");b.classList.add("iframeContainer");var c=document.createElement("iframe");c.classList.add("google-payments-dialog");c.setAttribute("frameborder","0");c.setAttribute("scrolling","no");b.appendChild(c);a.appendChild(b);document.body.appendChild(a);a={container:a,iframe:c};b=a.iframe;c=a.container;c.addEventListener("click",this.Zd.bind(this,a));c.style.display="none";b.style.display="none";b.height="0px";ff(b,"all 250ms ease 0s");this.Tc=!1;return a}Le(a){a.container.parentNode&&
(this.ge(Promise.reject({errorCode:"CANCELED"})),gf(a.container,a.iframe),this.A&&this.A.disconnect())}Zd(a){a.container.parentNode&&history.back()}Qe(a,b){a.style.display="block";b.style.display="block";setTimeout(()=>{b.height="280px";setTimeout(()=>{this.Tc=!0;this.bb&&(ff(b,this.bb.transition),b.height=this.bb.height,this.bb=null)},250)},1)}Oe(a,b,c){c.swg||c.apiVersion||(c.apiVersion=1);c.environment=this.L;let d;const e=this.getIframeUrl(this.L,window.location.origin);return this.activities.openIframe(b,
e,c).then(f=>{this.A=f;f.onMessage(g=>{"resize"===g.type&&this.Tc?(d||(d=Date.now()),Date.now()<d+250?ff(b,g.transition+", height 250ms"):ff(b,g.transition),b.height=g.height):this.bb={height:g.height,transition:g.transition}});return f.acceptResult()}).then(f=>{gf(a,b);history.back();return f.data},f=>{gf(a,b);history.back();return Promise.reject(f)})}};function jf(a){const b=window.sessionStorage.getItem("google.payments.api.storage.upi.canMakePaymentCache");return b?Promise.resolve("true"===b):a.canMakePayment?a.canMakePayment().then(c=>{c&&window.sessionStorage.setItem("google.payments.api.storage.upi.canMakePaymentCache",c.toString());return c}):Promise.resolve(!0)}function kf(a){return a.show().then(b=>{b.complete("success");return b.details})}
class lf{constructor(){}isUpiRequest(a){return!!af(a)}isReadyToPay(a){if(af(a))return a.existingPaymentMethodRequired?Promise.resolve({result:!0,paymentMethodPresent:!0}):Promise.resolve({result:!0});throw Error("No Upi payment method found in handler");}loadPaymentData(a,b,c){const d=b.parameters,e=a.transactionInfo,f=[{supportedMethods:["https://tez.google.com/pay"],data:{pa:d.payeeVpa,pn:d.payeeName,tr:d.transactionReferenceId,url:d.referenceUrl,mc:d.mcc,tn:e.transactionNote}}];d.transactionId&&
(f[0].data.tid=d.transactionId);let g=new PaymentRequest(f,{total:{label:"Total",amount:{currency:e.currencyCode,value:e.totalPrice}},displayItems:[{label:"Original Amount",amount:{currency:e.currencyCode,value:e.totalPrice}}]});c(jf(g).then(h=>{h?h=kf(g):(window.location.replace("https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user"),h=Promise.reject({errorMessage:"Cannot redirect to Tez page in Google Play."}));return h}).then(h=>{var k=JSON.parse(h.tezResponse);
if("FAILURE"===k.Status){switch(k.responseCode){case "ZM":k={errorCode:3,errorMessage:"Payment failure due to invalid MPIN."};break;case "Z9":k={errorCode:3,errorMessage:"Payment failure due to insufficient funds."};break;case "91":k={errorCode:1,errorMessage:"Payment failure due to transaction timeout or connection issue."};break;default:k={errorMessage:"Payment cancelled."}}k=Promise.reject(k)}else k=Promise.resolve({apiVersion:a.apiVersion,apiVersionMinor:a.apiVersionMinor,paymentMethodData:{type:b.type,
tokenizationData:{type:"DIRECT",token:{protocolVersion:"ECv1",signature:"",signedMessage:{paymentMethodType:"UPI",payeeVpa:b.parameters.payeeVpa,status:k.Status,transactionReferenceId:b.parameters.transactionReferenceId,transactionId:b.parameters.transactionId?b.parameters.transactionId:k.txnId,transactionInfo:a.transactionInfo}}}}});return k}).catch(h=>{h.statusCode="CANCELED";return Promise.reject(h)}))}};/*

Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com
Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/
var mf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");function nf(a){for(var b=Array(36),c=0,d,e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=mf[19==e?d&3|8:d]);return b.join("")+"."+a};const of="actions.google.com amp-actions.sandbox.google.com amp-actions-staging.sandbox.google.com amp-actions-autopush.sandbox.google.com payments.developers.google.com payments.google.com".split(" ");function pf(a,b){console.error("DEVELOPER_ERROR in "+a+" : "+b)}function qf(a,b){if(a.ed.isUpiRequest(b))return a.ed.isReadyToPay(b);if(Re()&&!rf(b)){if(2<=b.apiVersion)return sf(a,b);const c=a.Ca.isReadyToPay(b),d=a.Sa.isReadyToPay(b);return Se(b)?d:d.then(()=>c)}return a.Ca.isReadyToPay(b)}
function sf(a,b){let c=Promise.resolve({result:!1});b.existingPaymentMethodRequired&&(c=Promise.resolve({result:!1,paymentMethodPresent:!1}));var d=c;if(Ue(b,"CRYPTOGRAM_3DS")){const f=JSON.parse(JSON.stringify(b));for(d=0;d<f.allowedPaymentMethods.length;d++)"CARD"==f.allowedPaymentMethods[d].type&&(f.allowedPaymentMethods[d].parameters.allowedAuthMethods=["CRYPTOGRAM_3DS"]);d=a.Sa.isReadyToPay(f)}let e=c;Ue(b,"PAN_ONLY")&&(e=a.Ca.isReadyToPay(b));return d.then(f=>1==(f&&f.result)?f:e)}
function tf(a){const b={startTimeMs:Date.now(),googleTransactionId:Y};a.i=a.i?Object.assign(b,a.i):b}
class uf{constructor(a,b,c){this.Ld=b;We(a);this.Fd=null;this.L=a.environment||"TEST";Y||(Y=-1!=of.indexOf(window.location.hostname)&&a.i&&a.i.googleTransactionId?a.i.googleTransactionId:nf(this.L));this.we=a;this.Ca=new hf(this.L,c,a.i&&a.i.redirectKey);this.Oa=5;const d=Re();this.Sa=d?new Ne(this.L):this.Ca;this.ed=new lf;this.Ca.onResult(this.xc.bind(this));this.Sa.onResult(this.xc.bind(this));He();d&&(Ee=4);Ce=Y;X({eventType:9,clientLatencyStartMs:Date.now()});window.addEventListener("message",
e=>{-1!=of.indexOf(window.location.hostname)&&"logPaymentData"===e.data.name&&X(e.data.data)})}isReadyToPay(a){a&&(a=Object.assign({},this.we,a));const b=Date.now(),c=Ve()||Xe(a);if(c)return new Promise((e,f)=>{pf("isReadyToPay",c);X({eventType:0,error:2});f({statusCode:"DEVELOPER_ERROR",statusMessage:c})});const d=qf(this,a);d.then(e=>{X({eventType:0,clientLatencyStartMs:b,isReadyToPayApiResponse:e});return e});return d}prefetchPaymentData(a){const b=Ve()||$e(a);b?pf("prefetchPaymentData",b):(tf(a),
Re()&&!rf(a)?this.Sa.prefetchPaymentData(a):this.Ca.prefetchPaymentData(a))}loadPaymentData(a){X({eventType:5});const b=Ve()||$e(a);this.Oa=a&&a.swg?6:5;if(b)this.Ld(new Promise((d,e)=>{X({eventType:1,error:2,buyFlowMode:this.Oa});pf("loadPaymentData",b);e({statusCode:"DEVELOPER_ERROR",statusMessage:b})}));else{var c=af(a);c?this.ed.loadPaymentData(a,c,this.xc.bind(this)):(this.Fd=Date.now(),tf(a),rf(a)?this.Ca.loadPaymentData(a):this.Sa.loadPaymentData(a))}}createButton(){const a=Date.now();X({eventType:2,
clientLatencyStartMs:a});return null}xc(a){a.then(()=>{X({eventType:1,clientLatencyStartMs:this.Fd,buyFlowMode:this.Oa})}).catch(b=>{b.errorCode?X({eventType:1,error:b.errorCode,buyFlowMode:this.Oa}):X({eventType:1,error:6,buyFlowMode:this.Oa})});this.Ld(a)}}var Y;function rf(a){return!0===(a.i&&a.i.disableNative)};function vf(a,b,c){const d=v(a.j,"link",{rel:c,href:b});a.j.head.appendChild(d)}class wf{constructor(a){this.j=a}preconnect(a){vf(this,a,"preconnect")}prefetch(a){vf(this,a,"preconnect prefetch")}};const xf={PRODUCTION:"https://pay.google.com",SANDBOX:"https://pay.sandbox.google.com"};function yf(a){var b={environment:F().payEnv,i:{redirectKey:a.Kc.restoreKey()}};var c=a.nd.getTransactionId(),d=a.le.bind(a);Y=c;b=new uf(b,d,a.m.getOriginalWebActivityPorts());a.Rb=b}async function zf(a,b){try{const c=await a;b&&(c.paymentRequest=b);return c}catch(c){if("object"==typeof c&&"CANCELED"==c.statusCode)throw a=ma("Cancelled"),a.productType=b?b.i.productType:null,a;throw c;}}
class Af{constructor(a){this.g=a.win();this.m=a.activities();this.ba=this.Nc=this.Pc=null;this.nd=a.analytics();this.Kc=new Bf(this.g);this.Rb=null;this.Od=new wf(this.g.document);var b;if(b=Q(this.g)["pay-client-redirect"]||!1){var c=this.g.location.hash;b=/redirectEncryptedCallbackData/.test(c);c=/swgRequest/.test(c);b=b&&c}b&&(this.preconnect(this.Od),yf(this));this.Kc.prepare();this.u=a.eventManager()}preconnect(a){a.prefetch(E(xf[F().payEnv]+"/gp/p/ui/pay","_",wb()));a.prefetch("https://payments.google.com/payments/v4/js/integrator.js?ss=md");
a.prefetch("https://clients2.google.com/gr/gr_full_2.0.6.js")}getType(){return"PAYJS"}start(a,b={}){this.Nc=a;this.Rb||(this.preconnect(this.Od),yf(this));b.forceRedirect&&(a=Object.assign(a,{forceRedirect:b.forceRedirect||!1}));a.i=Object.assign(a.i||{},{["disableNative"]:b.forceDisableNative||this.g!=this.g.top});let c=null;const d=new Promise(e=>c=e);this.Kc.useVerifier(async e=>{e&&(a.i=Object.assign(a.i||{},{["redirectVerifier"]:e}));b.forceRedirect&&(await this.u.getReadyPromise(),await this.nd.getLoggingPromise());
this.Rb.loadPaymentData(a);c(!0)});return d}async onResponse(a){this.Pc=a;this.ba&&(await 0,a(zf(this.ba,this.Nc)))}le(a){this.ba=a;this.Pc&&this.Pc(zf(this.ba,this.Nc))}}async function Cf(a,b){if(!a.qb){a:{try{var c=!!a.g.localStorage}catch(e){c=!1;break a}const d=a.g.crypto;c=!!(c&&d&&d.getRandomValues&&d.subtle&&d.subtle.digest)}c?(a.qb=Df(a),a.zc=await a.qb):(a.qb=Promise.resolve(),a.zc=null)}b(a.zc)}
async function Df(a){a=a.g.crypto;try{const b=new Uint8Array(16);a.getRandomValues(b);const c=btoa(Wa(b)),d=await a.subtle.digest({name:"SHA-384"},Va(c)),e=btoa(Wa(new Uint8Array(d)));return{key:c,verifier:e}}catch(b){return null}}
class Bf{constructor(a){this.g=a;this.zc=this.qb=null}prepare(){return Cf(this,()=>{})}useVerifier(a){Cf(this,b=>{if(b)try{this.g.localStorage.setItem("subscribe.google.com:rk",b.key)}catch(c){b=null}a(b&&b.verifier||null)})}restoreKey(){try{return this.g.localStorage&&this.g.localStorage.getItem("subscribe.google.com:rk")||null}catch(a){return null}}};function Ef(a,b){b=E(b,"u_tz","240");b=E(b,"v",String(a.Je));if(!a.Pb){var c=a.g.document.cookie.match("(^|;)\\s*__gads\\s*=\\s*([^;]+)");a.Pb=c&&encodeURIComponent(c.pop())}(c=a.Pb)&&(b=E(b,"cookie",c));return b=E(b,"cdm",a.g.location.hostname)}
class Ff{constructor(a,b,c){this.g=a;this.h=b;this.N=this.h.pageConfig().getPublicationId();this.Pb=null;this.H=c;this.Je=1;this.h.eventManager().registerEventListener(this.Ha.bind(this))}sendSubscriptionState(a,b){let c=vb("/subopt/data");c=E(c,"states",this.N+":"+a);b&&(c=E(c,"extrainfo",b));return this.H.fetch(Ef(this,c),{method:"GET",credentials:"include"})}Ha(a){if(6!==a.eventOriginator&&(this.h.config().enablePropensity||3===a.eventOriginator))if(4E3===a.eventType)this.sendSubscriptionState(a.additionalParameters.state,
a.additionalParameters.productsOrSkus);else{var b=Bd[a.eventType];if(null!=b){var c=a.additionalParameters;c instanceof z&&(c=void 0);P(a.isFromUserAction)&&(L(c)||(c={}),c.is_active=a.isFromUserAction);a=JSON.stringify(c);let d=vb("/subopt/data");d=E(d,"events",this.N+":"+b);a&&(d=E(d,"extrainfo",a));this.H.fetch(Ef(this,d),{method:"GET",credentials:"include"})}}}async getPropensity(a,b){a=vb("/subopt/pts?products=")+this.N+"&type="+b+"&ref="+a;b=await (await this.H.fetch(Ef(this,a),{method:"GET",
credentials:"include"})).json();a={};if(b.header)if(b.header.ok){const c=b.scores;b=[];for(let d=0;d<c.length;d++){const e=c[d];b.push(e.score?{product:e.product,score:{value:e.score,bucketed:2==e.score_type}}:{product:e.product,error:e.error_message})}b&&(a={header:{ok:!0},body:{scores:b}})}else a={header:{ok:!1},body:{error:b.error}};else a={header:{ok:!1},body:{error:"No valid response"}};return a}};class Gf{constructor(a,b,c){this.g=a;this.Qd=new Ff(a,b,c);this.u=b.eventManager()}sendSubscriptionState(a,b){if(!Object.values(lb).includes(a))throw Error("Invalid subscription state provided");if(("subscriber"==a||"past_subscriber"==a)&&!b)throw Error("Entitlements must be provided for users with active or expired subscriptions");if(b&&!L(b))throw Error("Entitlements must be an Object");let c=null;b&&(c=JSON.stringify(b));this.Qd.sendSubscriptionState(a,c)}getPropensity(a){if(a&&!Object.values(nb).includes(a))throw Error("Invalid propensity type requested");
a||(a="general");return this.Qd.getPropensity(this.g.document.referrer,a)}sendEvent(a){const b=Ad[a.name];let c=null;if(!M(mb,a.name)||!b)throw Error("Invalid user event provided("+a.name+")");if(a.data)if(L(a.data))c={},Object.assign(c,a.data);else throw Error("Event data must be an Object("+a.data+")");if(P(a.active))c||(c={}),Object.assign(c,{is_active:a.active});else if(null!=a.active)throw Error("Event active must be a boolean");this.u.logEvent({eventType:b,eventOriginator:3,isFromUserAction:a.active,
additionalParameters:c})}};function Hf(a){return null===a?[]:a.split(",").map(b=>parseInt(b,10))}
class If{constructor(a){this.g=a;this.fb={}}get(a,b=!1){this.fb[a]||(this.fb[a]=new Promise(c=>{const d=b?this.g.localStorage:this.g.sessionStorage;if(d)try{c(d.getItem(Jf(a)))}catch(e){c(null)}else c(null)}));return this.fb[a]}set(a,b,c=!1){this.fb[a]=Promise.resolve(b);return new Promise(d=>{const e=c?this.g.localStorage:this.g.sessionStorage;if(e)try{e.setItem(Jf(a),b)}catch(f){}d()})}remove(a,b=!1){delete this.fb[a];return new Promise(c=>{const d=b?this.g.localStorage:this.g.sessionStorage;if(d)try{d.removeItem(Jf(a))}catch(e){}c()})}async storeEvent(a){const b=
await this.getEvent(a);b.push(Date.now());const c=b.join(",");this.set(a,c,!0)}async getEvent(a){a=await this.get(a,!0);a=Hf(a);const b=Date.now();let c=a.length;for(let d=0;d<a.length;d++)if(6048E5>=b-a[d]){c=d;break}return a.slice(c)}}function Jf(a){return"subscribe.google.com:"+a};class Kf{constructor(a){this.m=a.activities();this.g=a.win();this.M=a.pageConfig();this.o=a.dialogManager();this.td=()=>{}}async start(a){a=a.publisherProvidedId;if(!a)throw Error("Missing required field: publisherProvidedId");var b=this.M.getPublicationId();b=H({publicationId:b});a=new x(this.g,this.m,G("/linksaveiframe",{subscriptionLinking:!0,ppid:a}),b,!1);a.on(Ka,d=>{let e;this.td({publisherProvidedId:d.getPublisherProvidedId(),success:null!=(e=d.getSuccess())?e:!1})});const c=new Promise(d=>
{this.td=d});await this.o.openView(a,!1,{desktopConfig:{isCenterPositioned:!1}});return c}};class Lf{constructor(a,b){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.$a=null;this.Wd=b||Promise.reject("No account promise provided");this.l=new x(this.g,this.m,G("/waitforsubscriptionlookupiframe"),H({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId()}),!0,!0)}async start(){this.$a=this.o.openView(this.l);try{const a=await this.Wd;this.o.completeView(this.l);return a}catch(a){throw this.o.completeView(this.l),a;}}};async function Mf(a){if(a.Dc)return new he(a.Dc,!1);a.Ka=new ke(a.j);try{const b=await a.Ka.resolveConfig();a.Ka=null;return b}catch(b){throw a.Ka=null,b;}}async function Z(a,b){if(!b)return a.Ga;if(a.Xc)return a.Ka&&a.Ka.check(),a.Ga;a.Xc=!0;var c=await Mf(a);c=new Nf(a.j,c,{configPromise:a.Ga},a.T);a.ud(c);return c}
class Of{constructor(a){this.g=a;this.j=hd(a);this.xb=Promise.resolve();this.Dc=null;this.T={};this.Xc=!1;this.ud=null;this.Ga=new Promise(b=>{this.ud=b});this.Ka=null;this.sa=new Hc(this.j,this.Ga);this.sa.init()}whenReady(){return this.xb}startSubscriptionsFlowIfNeeded(){{var a=this.g.document;const b=pe(a,"subscriptions-control");a=b?b:(a=a.querySelector("script[subscriptions-control]"))?a.getAttribute("subscriptions-control"):null}ca(a,"mode");return"manual"==a?null:this.start()}init(a){q(!this.Xc,
"already configured");this.Dc=a;Z(this,!0).then(b=>{b.analytics().setReadyForLogging();b.analytics().start()})}async configure(a){Object.assign(this.T,a);return(await Z(this,!1)).configure(a)}async start(){return(await Z(this,!0)).start()}async reset(){return(await Z(this,!0)).reset()}async clear(){return(await Z(this,!0)).clear()}async getEntitlements(a){return(await Z(this,!0)).getEntitlements(a)}async setOnEntitlementsResponse(a){return(await Z(this,!1)).setOnEntitlementsResponse(a)}async getOffers(a){return(await Z(this,
!0)).getOffers(a)}async showOffers(a){return(await Z(this,!0)).showOffers(a)}async showUpdateOffers(a){return(await Z(this,!0)).showUpdateOffers(a)}async showSubscribeOption(a){return(await Z(this,!0)).showSubscribeOption(a)}async showAbbrvOffer(a){return(await Z(this,!0)).showAbbrvOffer(a)}async showContributionOptions(a){return(await Z(this,!0)).showContributionOptions(a)}async waitForSubscriptionLookup(a){return(await Z(this,!0)).waitForSubscriptionLookup(a)}async setOnNativeSubscribeRequest(a){return(await Z(this,
!1)).setOnNativeSubscribeRequest(a)}async setOnSubscribeResponse(a){return(await Z(this,!1)).setOnSubscribeResponse(a)}async subscribe(a){return(await Z(this,!0)).subscribe(a)}async updateSubscription(a){return(await Z(this,!0)).updateSubscription(a)}async setOnContributionResponse(a){return(await Z(this,!1)).setOnContributionResponse(a)}async setOnPaymentResponse(a){return(await Z(this,!1)).setOnPaymentResponse(a)}async contribute(a){return(await Z(this,!0)).contribute(a)}async completeDeferredAccountCreation(a){return(await Z(this,
!0)).completeDeferredAccountCreation(a)}async setOnLoginRequest(a){return(await Z(this,!1)).setOnLoginRequest(a)}async triggerLoginRequest(a){return(await Z(this,!1)).triggerLoginRequest(a)}async setOnLinkComplete(a){return(await Z(this,!1)).setOnLinkComplete(a)}async linkAccount(a={}){return(await Z(this,!0)).linkAccount(a)}async setOnFlowStarted(a){return(await Z(this,!1)).setOnFlowStarted(a)}async setOnFlowCanceled(a){return(await Z(this,!1)).setOnFlowCanceled(a)}async saveSubscription(a){return(await Z(this,
!0)).saveSubscription(a)}async showLoginPrompt(){return(await Z(this,!0)).showLoginPrompt()}async showLoginNotification(){return(await Z(this,!0)).showLoginNotification()}createButton(a,b){return this.sa.create(a,b)}async attachSmartButton(a,b,c){return(await Z(this,!0)).attachSmartButton(a,b,c)}attachButton(a,b,c){return this.sa.attach(a,b,c)}async getPropensityModule(){return(await Z(this,!0)).getPropensityModule()}async getLogger(){return(await Z(this,!0)).getLogger()}async getEventManager(){return(await Z(this,
!0)).getEventManager()}async setShowcaseEntitlement(a){return(await Z(this,!0)).setShowcaseEntitlement(a)}async consumeShowcaseEntitlementJwt(a,b){return(await Z(this,!0)).consumeShowcaseEntitlementJwt(a,b)}showBestAudienceAction(){p("Not implemented yet")}async setPublisherProvidedId(a){return(await Z(this,!0)).setPublisherProvidedId(a)}async linkSubscription(a){return(await Z(this,!0)).linkSubscription(a)}}
function Pf(a,b){let c="";for(const e in b){const f=b[e];switch(e){case "windowOpenMode":"auto"!=f&&"redirect"!=f&&(c="Unknown windowOpenMode: "+f);break;case "experiments":for(const g of f){var d=g;Q(a.g)[d]=!0}a.analytics()&&a.analytics().addLabels(f);break;case "analyticsMode":0!=f&&1!=f&&(c="Unknown analytics mode: "+f);break;case "enableSwgAnalytics":P(f)||(c="Unknown enableSwgAnalytics value: "+f);break;case "enablePropensity":P(f)||(c="Unknown enablePropensity value: "+f);break;case "skipAccountCreationScreen":P(f)||
(c="Unknown skipAccountCreationScreen value: "+f);break;case "publisherProvidedId":void 0==f||"string"===typeof f&&""!=f||(c="publisherProvidedId must be a string, value: "+f);break;default:c="Unknown config property: "+e}}q(!c,c||void 0);Object.assign(a.T,b)}
class Nf{constructor(a,b,c,d){c=c||{};c.configPromise=c.configPromise||Promise.resolve();this.u=new oc(c.configPromise);this.j=hd(a);this.g=this.j.getWin();this.T={windowOpenMode:"auto",analyticsMode:0,enableSwgAnalytics:!1,enablePropensity:!1};d&&Pf(this,d);this.M=b;this.K=this.j.whenReady();this.Cd=new Wd(this.j);this.H=c.fetcher||new Ud(this.g);this.F=new If(this.g);this.o=new qd(this.j);this.C=new Jc;this.lc=this.nc=null;this.X=void 0;c.enableGoogleAnalytics&&(this.je=new Vd(this),this.je.start());
this.m=new mc(this);this.U=new yc(this,this.H);this.Ac=new Af(this);this.qe=new de(this);this.Z=new Sd(this.g,this.M,this.H,this,c.useArticleEndpoint||!1,c.enableDefaultMeteringHandler||!1);this.D=new Sc(this,b.getPublicationId(),this.H);this.ze=new Gf(this.g,this,this.H);this.u.logSwgEvent(11,!1);this.ue=new ge(this.M,this.H);this.sa=new Hc(this.j,Promise.resolve(this));const e=new wf(this.g.document);e.prefetch("https://news.google.com/swg/js/v1/loader.svg");e.preconnect("https://www.gstatic.com/");
e.preconnect("https://www.google.com/");Yd(this);Ab(this);la(this.j,cd);this.m.onRedirectError(f=>{this.U.addLabels(["redirect"]);this.u.logSwgEvent(2E3,!1);this.Cd.error("Redirect error",f)})}doc(){return this.j}win(){return this.g}pageConfig(){return this.M}jserror(){return this.Cd}activities(){return this.m}payClient(){return this.Ac}dialogManager(){return this.o}entitlementsManager(){return this.Z}callbacks(){return this.C}storage(){return this.F}clientConfigManager(){return this.D}analytics(){return this.U}init(){}configure(a){Pf(this,
a)}config(){return this.T}reset(){this.Z.reset();this.closeDialog()}clear(){this.Z.clear();this.closeDialog()}closeDialog(){this.o.completeAll()}start(){if(!this.M.getProductId()||!this.M.isLocked())return Promise.resolve();this.getEntitlements()}async getEntitlements(a){if(null==a?0:a.publisherProvidedId)a.publisherProvidedId=this.X;a=await this.Z.getEntitlements(a);this.U.setReadyForLogging();this.U.start();if(a)try{const b=a.entitlements.map(c=>c.getSku()||"unknown subscriptionToken");0<b.length&&
this.U.setSku(b.join(","))}catch(b){}return a.clone()}setOnEntitlementsResponse(a){this.C.setOnEntitlementsResponse(a)}getOffers(a){return this.ue.getOffers(a&&a.productId)}async showOffers(a){await this.K;q(a?!a.oldSku:!0,"The showOffers() method cannot be used to update a subscription. Use the showUpdateOffers() method instead.");this.nc=new Eb(this,a);return this.nc.start()}async showUpdateOffers(a){q(Q(this.g)["replace-subscription"]||!1,"Not yet launched!");await this.K;q(a?!!a.oldSku:!1,"The showUpdateOffers() method cannot be used for new subscribers. Use the showOffers() method instead.");
return(new Eb(this,a)).start()}async showSubscribeOption(a){await this.K;return(new Fb(this,a)).start()}async showAbbrvOffer(a){await this.K;return(new Gb(this,a)).start()}async showContributionOptions(a){await this.K;this.lc=new Uc(this,a);return this.lc.start()}getLastContributionsFlow(){return this.lc}async waitForSubscriptionLookup(a){await this.K;return(new Lf(this,a)).start()}setOnLoginRequest(a){this.C.setOnLoginRequest(a)}triggerLoginRequest(a){this.C.triggerLoginRequest(a)}setOnLinkComplete(a){this.C.setOnLinkComplete(a)}async linkAccount(a=
{}){await this.K;return(new Xd(this)).start(a)}async saveSubscription(a){await this.K;return(new ce(this,a)).start()}async showLoginPrompt(){await this.K;return(new fe(this)).start()}async showLoginNotification(){await this.K;return(new ee(this)).start()}setOnNativeSubscribeRequest(a){this.C.setOnSubscribeRequest(a)}setOnSubscribeResponse(a){this.C.setOnSubscribeResponse(a)}setOnPaymentResponse(a){this.C.setOnPaymentResponse(a)}async subscribe(a){q("string"===typeof a,"The subscribe() method can only take a sku as its parameter; for subscription updates please use the updateSubscription() method");
await this.K;return(new J(this,{skuId:a})).start()}async updateSubscription(a){q(Q(this.g)["replace-subscription"]||!1,"Not yet launched!");q(a?a.oldSku:!1,"The updateSubscription() method should be used for subscription updates; for new subscriptions please use the subscribe() method");await this.K;return(new J(this,a)).start()}setOnContributionResponse(a){this.C.setOnContributionResponse(a)}async contribute(a){a="string"==typeof a?{skuId:a}:a;await this.K;return(new J(this,a,"UI_CONTRIBUTION")).start()}async completeDeferredAccountCreation(a){await this.K;
return(new Wc(this,a||null)).start()}setOnFlowStarted(a){this.C.setOnFlowStarted(a)}setOnFlowCanceled(a){this.C.setOnFlowCanceled(a)}createButton(a,b){return this.sa.create(a,b)}attachButton(a,b,c){this.sa.attach(a,b,c)}attachSmartButton(a,b,c){q(Q(this.g).smartbox||!1,"Not yet launched!");this.sa.attachSmartButton(this,a,b,c)}getPropensityModule(){return Promise.resolve(this.ze)}eventManager(){return this.u}getLastOffersFlow(){return this.nc}getEventManager(){return Promise.resolve(this.u)}getLogger(){return Promise.resolve(this.qe)}setShowcaseEntitlement(a){var b;
(b=!a)||(b=(b=this.win().location)||rb,b=!("https"===b.protocol||"https:"===b.protocol));if(b||!Hd(this.win().location.search,!0))return Promise.resolve();const c=Cd[a.entitlement]||[];b=new z;b.setIsUserRegistered(a.isUserRegistered);a.subscriptionTimestamp&&(a=a.subscriptionTimestamp,b.setSubscriptionTimestamp.call(b,tc(1E14<=a||-1E14>=a?Math.floor(a/1E3):1E11<=a||-3E10>=a?a:Math.floor(1E3*a))));for(a=0;a<c.length;a++)this.eventManager().logEvent({eventType:c[a],eventOriginator:6,isFromUserAction:!1,
additionalParameters:b});return Promise.resolve()}consumeShowcaseEntitlementJwt(a,b){this.entitlementsManager().parseEntitlements({signedEntitlements:a}).consume(b)}showBestAudienceAction(){p("Not implemented yet")}setPublisherProvidedId(a){this.X=a}async linkSubscription(a){await this.K;return(new Kf(this)).start(a)}}
function Qf(a){return{init:a.init.bind(a),configure:a.configure.bind(a),start:a.start.bind(a),reset:a.reset.bind(a),clear:a.clear.bind(a),getEntitlements:a.getEntitlements.bind(a),linkAccount:a.linkAccount.bind(a),showLoginPrompt:a.showLoginPrompt.bind(a),showLoginNotification:a.showLoginNotification.bind(a),getOffers:a.getOffers.bind(a),showOffers:a.showOffers.bind(a),showUpdateOffers:a.showUpdateOffers.bind(a),showAbbrvOffer:a.showAbbrvOffer.bind(a),showSubscribeOption:a.showSubscribeOption.bind(a),
showContributionOptions:a.showContributionOptions.bind(a),waitForSubscriptionLookup:a.waitForSubscriptionLookup.bind(a),subscribe:a.subscribe.bind(a),updateSubscription:a.updateSubscription.bind(a),contribute:a.contribute.bind(a),completeDeferredAccountCreation:a.completeDeferredAccountCreation.bind(a),setOnEntitlementsResponse:a.setOnEntitlementsResponse.bind(a),setOnLoginRequest:a.setOnLoginRequest.bind(a),triggerLoginRequest:a.triggerLoginRequest.bind(a),setOnLinkComplete:a.setOnLinkComplete.bind(a),
setOnNativeSubscribeRequest:a.setOnNativeSubscribeRequest.bind(a),setOnPaymentResponse:a.setOnPaymentResponse.bind(a),setOnSubscribeResponse:a.setOnSubscribeResponse.bind(a),setOnContributionResponse:a.setOnContributionResponse.bind(a),setOnFlowStarted:a.setOnFlowStarted.bind(a),setOnFlowCanceled:a.setOnFlowCanceled.bind(a),saveSubscription:a.saveSubscription.bind(a),createButton:a.createButton.bind(a),attachButton:a.attachButton.bind(a),attachSmartButton:a.attachSmartButton.bind(a),getPropensityModule:a.getPropensityModule.bind(a),
getLogger:a.getLogger.bind(a),getEventManager:a.getEventManager.bind(a),setShowcaseEntitlement:a.setShowcaseEntitlement.bind(a),consumeShowcaseEntitlementJwt:a.consumeShowcaseEntitlementJwt.bind(a),showBestAudienceAction:a.showBestAudienceAction.bind(a),setPublisherProvidedId:a.setPublisherProvidedId.bind(a),linkSubscription:a.linkSubscription.bind(a)}};m("Subscriptions Runtime: 1.0.5");(function(a){async function b(f){f&&(await c.whenReady(),f(d))}if(!a.SWG||Array.isArray(a.SWG)){var c=new Of(a),d=Qf(c),e=[].concat(a.SWG,a.SUBSCRIPTIONS);for(const f of e)b(f);a.SWG=a.SUBSCRIPTIONS={push:b};c.startSubscriptionsFlowIfNeeded()}})(self);}).call(this);

//# sourceMappingURL=swg.js.map
